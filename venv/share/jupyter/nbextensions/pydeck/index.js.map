{
  "version": 3,
  "sources": ["../../../node_modules/mapbox-gl/node_modules/@mapbox/unitbezier/index.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/point-geometry/index.js", "../../../node_modules/mapbox-gl/src/util/browser/window.js", "../../../node_modules/mapbox-gl/src/util/util.js", "../../../node_modules/mapbox-gl/src/util/browser.js", "../../../node_modules/mapbox-gl/src/util/webp_supported.js", "../../../node_modules/mapbox-gl/src/util/config.js", "../../../node_modules/mapbox-gl/src/util/sku_token.js", "../../../node_modules/mapbox-gl/src/util/mapbox.js", "../../../node_modules/mapbox-gl/src/util/tile_request_cache.js", "../../../node_modules/mapbox-gl/src/util/offscreen_canvas_supported.js", "../../../node_modules/mapbox-gl/src/util/ajax.js", "../../../node_modules/mapbox-gl/src/util/evented.js", "../../../node_modules/mapbox-gl/src/style-spec/error/validation_error.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_constants.js", "../../../node_modules/mapbox-gl/src/style-spec/util/extend.js", "../../../node_modules/mapbox-gl/src/style-spec/util/unbundle_jsonlint.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/parsing_error.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/scope.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/types.js", "../../../node_modules/mapbox-gl/node_modules/csscolorparser/csscolorparser.js", "../../../node_modules/mapbox-gl/src/style-spec/util/color.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/types/collator.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/types/formatted.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/types/resolved_image.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/values.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/literal.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/runtime_error.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/assertion.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/format.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/image.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/coercion.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/evaluation_context.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/compound_expression.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/collator.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/within.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/is_constant.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/var.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/parsing_context.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/stops.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/step.js", "../../../node_modules/mapbox-gl/src/style-spec/util/interpolate.js", "../../../node_modules/mapbox-gl/src/style-spec/util/color_spaces.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/interpolate.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/coalesce.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/let.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/at.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/in.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/index_of.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/match.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/case.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/slice.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/comparison.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/number_format.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/length.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/definitions/index.js", "../../../node_modules/mapbox-gl/src/style-spec/util/result.js", "../../../node_modules/mapbox-gl/src/style-spec/util/properties.js", "../../../node_modules/mapbox-gl/src/style-spec/util/get_type.js", "../../../node_modules/mapbox-gl/src/style-spec/function/index.js", "../../../node_modules/mapbox-gl/src/style-spec/expression/index.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_object.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_array.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_number.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_function.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_expression.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_enum.js", "../../../node_modules/mapbox-gl/src/style-spec/feature_filter/index.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_filter.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_property.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_paint_property.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_layout_property.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_layer.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_string.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_source.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_light.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_boolean.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_color.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_formatted.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_image.js", "../../../node_modules/mapbox-gl/src/style-spec/validate/validate_glyphs_url.js", "../../../node_modules/mapbox-gl/src/style-spec/validate_style.min.js", "../../../node_modules/mapbox-gl/src/style/validate_style.js", "../../../node_modules/mapbox-gl/node_modules/grid-index/grid-index.js", "../../../node_modules/mapbox-gl/src/util/web_worker_transfer.js", "../../../node_modules/mapbox-gl/src/style/zoom_history.js", "../../../node_modules/mapbox-gl/src/util/is_char_in_unicode_block.js", "../../../node_modules/mapbox-gl/src/util/script_detection.js", "../../../node_modules/mapbox-gl/src/source/rtl_text_plugin.js", "../../../node_modules/mapbox-gl/src/style/evaluation_parameters.js", "../../../node_modules/mapbox-gl/src/style/properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer.js", "../../../node_modules/mapbox-gl/src/util/struct_array.js", "../../../node_modules/mapbox-gl/src/data/array_types.js", "../../../node_modules/mapbox-gl/src/data/bucket/circle_attributes.js", "../../../node_modules/mapbox-gl/src/data/segment.js", "../../../node_modules/mapbox-gl/src/shaders/encode_attribute.js", "../../../node_modules/mapbox-gl/src/data/bucket/pattern_attributes.js", "../../../node_modules/mapbox-gl/node_modules/murmurhash-js/murmurhash3_gc.js", "../../../node_modules/mapbox-gl/node_modules/murmurhash-js/murmurhash2_gc.js", "../../../node_modules/mapbox-gl/node_modules/murmurhash-js/index.js", "../../../node_modules/mapbox-gl/src/data/feature_position_map.js", "../../../node_modules/mapbox-gl/src/render/uniform_binding.js", "../../../node_modules/mapbox-gl/src/data/program_configuration.js", "../../../node_modules/mapbox-gl/src/data/extent.js", "../../../node_modules/mapbox-gl/src/data/load_geometry.js", "../../../node_modules/mapbox-gl/src/data/evaluation_feature.js", "../../../node_modules/mapbox-gl/src/data/bucket/circle_bucket.js", "../../../node_modules/mapbox-gl/src/util/intersection_tests.js", "../../../node_modules/mapbox-gl/src/style/query_utils.js", "../../../node_modules/mapbox-gl/src/style/style_layer/circle_style_layer_properties.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/common.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/mat4.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/vec3.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/vec4.js", "../../../node_modules/mapbox-gl/src/style/style_layer/circle_style_layer.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/vec2.js", "../../../node_modules/mapbox-gl/src/data/bucket/heatmap_bucket.js", "../../../node_modules/mapbox-gl/src/util/image.js", "../../../node_modules/mapbox-gl/src/style/style_layer/heatmap_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/util/color_ramp.js", "../../../node_modules/mapbox-gl/src/style/style_layer/heatmap_style_layer.js", "../../../node_modules/mapbox-gl/src/style/style_layer/hillshade_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer/hillshade_style_layer.js", "../../../node_modules/mapbox-gl/src/data/bucket/fill_attributes.js", "../../../node_modules/mapbox-gl/node_modules/earcut/src/earcut.js", "../../../node_modules/mapbox-gl/node_modules/quickselect/index.js", "../../../node_modules/mapbox-gl/src/util/classify_rings.js", "../../../node_modules/mapbox-gl/src/data/bucket/pattern_bucket_features.js", "../../../node_modules/mapbox-gl/src/data/bucket/fill_bucket.js", "../../../node_modules/mapbox-gl/src/style/style_layer/fill_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer/fill_style_layer.js", "../../../node_modules/mapbox-gl/src/data/bucket/fill_extrusion_attributes.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/vector-tile/lib/vectortilefeature.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/vector-tile/lib/vectortilelayer.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/vector-tile/lib/vectortile.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/vector-tile/index.js", "../../../node_modules/mapbox-gl/src/data/bucket/fill_extrusion_bucket.js", "../../../node_modules/mapbox-gl/src/style/style_layer/fill_extrusion_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer/fill_extrusion_style_layer.js", "../../../node_modules/mapbox-gl/src/data/bucket/line_attributes.js", "../../../node_modules/mapbox-gl/src/data/bucket/line_attributes_ext.js", "../../../node_modules/mapbox-gl/src/data/bucket/line_bucket.js", "../../../node_modules/mapbox-gl/src/style/style_layer/line_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer/line_style_layer.js", "../../../node_modules/mapbox-gl/src/data/bucket/symbol_attributes.js", "../../../node_modules/mapbox-gl/src/symbol/transform_text.js", "../../../node_modules/mapbox-gl/src/util/verticalize_punctuation.js", "../../../node_modules/mapbox-gl/node_modules/ieee754/index.js", "../../../node_modules/mapbox-gl/node_modules/pbf/index.js", "../../../node_modules/mapbox-gl/src/style/parse_glyph_pbf.js", "../../../node_modules/mapbox-gl/node_modules/potpack/index.mjs", "../../../node_modules/mapbox-gl/src/render/image_atlas.js", "../../../node_modules/mapbox-gl/src/symbol/shaping.js", "../../../node_modules/mapbox-gl/src/symbol/anchor.js", "../../../node_modules/mapbox-gl/src/symbol/symbol_size.js", "../../../node_modules/mapbox-gl/src/symbol/check_max_angle.js", "../../../node_modules/mapbox-gl/src/symbol/get_anchors.js", "../../../node_modules/mapbox-gl/src/symbol/clip_line.js", "../../../node_modules/mapbox-gl/src/symbol/quads.js", "../../../node_modules/mapbox-gl/src/symbol/collision_feature.js", "../../../node_modules/mapbox-gl/node_modules/tinyqueue/index.js", "../../../node_modules/mapbox-gl/src/util/find_pole_of_inaccessibility.js", "../../../node_modules/mapbox-gl/src/symbol/symbol_layout.js", "../../../node_modules/mapbox-gl/src/data/bucket/symbol_bucket.js", "../../../node_modules/mapbox-gl/src/symbol/mergelines.js", "../../../node_modules/mapbox-gl/src/style/style_layer/symbol_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/format_section_override.js", "../../../node_modules/mapbox-gl/src/style/style_layer/symbol_style_layer.js", "../../../node_modules/mapbox-gl/src/util/resolve_tokens.js", "../../../node_modules/mapbox-gl/src/style/style_layer/background_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer/background_style_layer.js", "../../../node_modules/mapbox-gl/src/style/style_layer/raster_style_layer_properties.js", "../../../node_modules/mapbox-gl/src/style/style_layer/raster_style_layer.js", "../../../node_modules/mapbox-gl/src/style/style_layer/custom_style_layer.js", "../../../node_modules/mapbox-gl/src/style/create_style_layer.js", "../../../node_modules/mapbox-gl/src/render/texture.js", "../../../node_modules/mapbox-gl/src/util/throttled_invoker.js", "../../../node_modules/mapbox-gl/src/util/actor.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/whoots-js/index.mjs", "../../../node_modules/mapbox-gl/src/geo/lng_lat_bounds.js", "../../../node_modules/mapbox-gl/src/geo/lng_lat.js", "../../../node_modules/mapbox-gl/src/geo/mercator_coordinate.js", "../../../node_modules/mapbox-gl/src/source/tile_id.js", "../../../node_modules/mapbox-gl/src/data/dem_data.js", "../../../node_modules/mapbox-gl/src/util/dictionary_coder.js", "../../../node_modules/mapbox-gl/src/util/vectortile_to_geojson.js", "../../../node_modules/mapbox-gl/src/source/source_state.js", "../../../node_modules/mapbox-gl/src/data/feature_index.js", "../../../node_modules/mapbox-gl/src/source/tile.js", "../../../node_modules/mapbox-gl/src/data/bucket.js", "../../../node_modules/mapbox-gl/src/style-spec/util/ref_properties.js", "../../../node_modules/mapbox-gl/src/util/performance.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/mat3.js", "../../../node_modules/mapbox-gl/node_modules/gl-matrix/esm/mat2.js", "../../../node_modules/mapbox-gl/src/style-spec/util/deep_equal.js", "../../../node_modules/mapbox-gl/src/style-spec/group_by_layout.js", "../../../node_modules/mapbox-gl/src/style/style_layer_index.js", "../../../node_modules/mapbox-gl/src/render/glyph_atlas.js", "../../../node_modules/mapbox-gl/src/source/worker_tile.js", "../../../node_modules/mapbox-gl/src/source/vector_tile_worker_source.js", "../../../node_modules/mapbox-gl/src/source/raster_dem_tile_worker_source.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/geojson-rewind/index.js", "../../../node_modules/mapbox-gl/src/source/geojson_wrapper.js", "../../../node_modules/mapbox-gl/node_modules/vt-pbf/lib/geojson_wrapper.js", "../../../node_modules/mapbox-gl/node_modules/vt-pbf/index.js", "../../../node_modules/mapbox-gl/node_modules/kdbush/src/sort.js", "../../../node_modules/mapbox-gl/node_modules/kdbush/src/within.js", "../../../node_modules/mapbox-gl/node_modules/kdbush/src/index.js", "../../../node_modules/mapbox-gl/node_modules/kdbush/src/range.js", "../../../node_modules/mapbox-gl/node_modules/supercluster/index.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/simplify.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/feature.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/convert.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/clip.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/wrap.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/transform.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/tile.js", "../../../node_modules/mapbox-gl/node_modules/geojson-vt/src/index.js", "../../../node_modules/mapbox-gl/src/source/geojson_worker_source.js", "../../../node_modules/mapbox-gl/src/source/worker.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/mapbox-gl-supported/index.js", "../../../node_modules/mapbox-gl/src/util/dom.js", "../../../node_modules/mapbox-gl/src/style/style_image.js", "../../../node_modules/mapbox-gl/src/render/image_manager.js", "../../../node_modules/mapbox-gl/node_modules/@mapbox/tiny-sdf/index.js", "../../../node_modules/mapbox-gl/src/render/glyph_manager.js", "../../../node_modules/mapbox-gl/src/style/load_glyph_range.js", "../../../node_modules/mapbox-gl/src/style/light.js", "../../../node_modules/mapbox-gl/src/render/line_atlas.js", "../../../node_modules/mapbox-gl/src/util/dispatcher.js", "../../../node_modules/mapbox-gl/src/source/load_tilejson.js", "../../../node_modules/mapbox-gl/src/source/tile_bounds.js", "../../../node_modules/mapbox-gl/src/source/vector_tile_source.js", "../../../node_modules/mapbox-gl/src/source/raster_tile_source.js", "../../../node_modules/mapbox-gl/src/source/raster_dem_tile_source.js", "../../../node_modules/mapbox-gl/src/source/geojson_source.js", "../../../node_modules/mapbox-gl/src/source/image_source.js", "../../../node_modules/mapbox-gl/src/source/video_source.js", "../../../node_modules/mapbox-gl/src/source/canvas_source.js", "../../../node_modules/mapbox-gl/src/source/source.js", "../../../node_modules/mapbox-gl/src/source/query_features.js", "../../../node_modules/mapbox-gl/src/source/tile_cache.js", "../../../node_modules/mapbox-gl/src/gl/index_buffer.js", "../../../node_modules/mapbox-gl/src/gl/vertex_buffer.js", "../../../node_modules/mapbox-gl/src/gl/value.js", "../../../node_modules/mapbox-gl/src/gl/framebuffer.js", "../../../node_modules/mapbox-gl/src/gl/depth_mode.js", "../../../node_modules/mapbox-gl/src/gl/stencil_mode.js", "../../../node_modules/mapbox-gl/src/gl/color_mode.js", "../../../node_modules/mapbox-gl/src/gl/cull_face_mode.js", "../../../node_modules/mapbox-gl/src/gl/context.js", "../../../node_modules/mapbox-gl/src/source/source_cache.js", "../../../node_modules/mapbox-gl/src/util/browser/web_worker.js", "../../../node_modules/mapbox-gl/src/util/worker_pool.js", "../../../node_modules/mapbox-gl/src/util/global_worker_pool.js", "../../../node_modules/mapbox-gl/src/style-spec/deref.js", "../../../node_modules/mapbox-gl/src/style-spec/diff.js", "../../../node_modules/mapbox-gl/src/symbol/path_interpolator.js", "../../../node_modules/mapbox-gl/src/symbol/grid_index.js", "../../../node_modules/mapbox-gl/src/symbol/projection.js", "../../../node_modules/mapbox-gl/src/symbol/collision_index.js", "../../../node_modules/mapbox-gl/src/source/pixels_to_tile_units.js", "../../../node_modules/mapbox-gl/src/symbol/placement.js", "../../../node_modules/mapbox-gl/src/style/pauseable_placement.js", "../../../node_modules/mapbox-gl/src/symbol/cross_tile_symbol_index.js", "../../../node_modules/mapbox-gl/src/style/style.js", "../../../node_modules/mapbox-gl/src/style-spec/empty.js", "../../../node_modules/mapbox-gl/src/style/load_sprite.js", "../../../node_modules/mapbox-gl/src/data/pos_attributes.js", "../../../node_modules/mapbox-gl/src/shaders/shaders.js", "../../../node_modules/mapbox-gl/src/render/vertex_array_object.js", "../../../node_modules/mapbox-gl/src/render/program.js", "../../../node_modules/mapbox-gl/src/render/program/pattern.js", "../../../node_modules/mapbox-gl/src/render/program/fill_extrusion_program.js", "../../../node_modules/mapbox-gl/src/render/program/fill_program.js", "../../../node_modules/mapbox-gl/src/render/program/circle_program.js", "../../../node_modules/mapbox-gl/src/render/program/collision_program.js", "../../../node_modules/mapbox-gl/src/render/program/debug_program.js", "../../../node_modules/mapbox-gl/src/render/program/clipping_mask_program.js", "../../../node_modules/mapbox-gl/src/render/program/heatmap_program.js", "../../../node_modules/mapbox-gl/src/render/program/line_program.js", "../../../node_modules/mapbox-gl/src/render/program/raster_program.js", "../../../node_modules/mapbox-gl/src/render/program/symbol_program.js", "../../../node_modules/mapbox-gl/src/render/draw_collision_debug.js", "../../../node_modules/mapbox-gl/src/render/program/background_program.js", "../../../node_modules/mapbox-gl/src/render/program/program_uniforms.js", "../../../node_modules/mapbox-gl/src/render/program/hillshade_program.js", "../../../node_modules/mapbox-gl/src/render/draw_symbol.js", "../../../node_modules/mapbox-gl/src/render/draw_fill.js", "../../../node_modules/mapbox-gl/src/render/draw_fill_extrusion.js", "../../../node_modules/mapbox-gl/src/render/draw_hillshade.js", "../../../node_modules/mapbox-gl/src/render/draw_raster.js", "../../../node_modules/mapbox-gl/src/render/draw_debug.js", "../../../node_modules/mapbox-gl/src/render/painter.js", "../../../node_modules/mapbox-gl/src/render/draw_circle.js", "../../../node_modules/mapbox-gl/src/render/draw_heatmap.js", "../../../node_modules/mapbox-gl/src/render/draw_line.js", "../../../node_modules/mapbox-gl/src/render/draw_background.js", "../../../node_modules/mapbox-gl/src/render/draw_custom.js", "../../../node_modules/mapbox-gl/src/util/primitives.js", "../../../node_modules/mapbox-gl/src/geo/edge_insets.js", "../../../node_modules/mapbox-gl/src/geo/transform.js", "../../../node_modules/mapbox-gl/src/ui/hash.js", "../../../node_modules/mapbox-gl/src/util/throttle.js", "../../../node_modules/mapbox-gl/src/ui/handler_inertia.js", "../../../node_modules/mapbox-gl/src/ui/events.js", "../../../node_modules/mapbox-gl/src/ui/handler/map_event.js", "../../../node_modules/mapbox-gl/src/ui/handler/box_zoom.js", "../../../node_modules/mapbox-gl/src/ui/handler/handler_util.js", "../../../node_modules/mapbox-gl/src/ui/handler/tap_recognizer.js", "../../../node_modules/mapbox-gl/src/ui/handler/tap_zoom.js", "../../../node_modules/mapbox-gl/src/ui/handler/mouse.js", "../../../node_modules/mapbox-gl/src/ui/handler/touch_pan.js", "../../../node_modules/mapbox-gl/src/ui/handler/touch_zoom_rotate.js", "../../../node_modules/mapbox-gl/src/ui/handler/keyboard.js", "../../../node_modules/mapbox-gl/src/ui/handler/scroll_zoom.js", "../../../node_modules/mapbox-gl/src/ui/handler/shim/dblclick_zoom.js", "../../../node_modules/mapbox-gl/src/ui/handler/click_zoom.js", "../../../node_modules/mapbox-gl/src/ui/handler/tap_drag_zoom.js", "../../../node_modules/mapbox-gl/src/ui/handler/shim/drag_pan.js", "../../../node_modules/mapbox-gl/src/ui/handler/shim/drag_rotate.js", "../../../node_modules/mapbox-gl/src/ui/handler/shim/touch_zoom_rotate.js", "../../../node_modules/mapbox-gl/src/ui/handler_manager.js", "../../../node_modules/mapbox-gl/src/ui/camera.js", "../../../node_modules/mapbox-gl/src/ui/control/attribution_control.js", "../../../node_modules/mapbox-gl/src/ui/control/logo_control.js", "../../../node_modules/mapbox-gl/src/util/task_queue.js", "../../../node_modules/mapbox-gl/src/ui/default_locale.js", "../../../node_modules/mapbox-gl/src/ui/map.js", "../../../node_modules/mapbox-gl/src/ui/control/navigation_control.js", "../../../node_modules/mapbox-gl/src/util/smart_wrap.js", "../../../node_modules/mapbox-gl/src/ui/anchor.js", "../../../node_modules/mapbox-gl/src/ui/marker.js", "../../../node_modules/mapbox-gl/src/ui/control/geolocate_control.js", "../../../node_modules/mapbox-gl/src/ui/control/scale_control.js", "../../../node_modules/mapbox-gl/src/ui/control/fullscreen_control.js", "../../../node_modules/mapbox-gl/src/ui/popup.js", "../../../node_modules/mapbox-gl/src/index.js", "../../../node_modules/mapbox-gl/rollup/mapboxgl.js", "../../../node_modules/hammerjs/hammer.js", "../../../node_modules/earcut/src/earcut.js", "../../../node_modules/fast-xml-parser/src/util.js", "../../../node_modules/fast-xml-parser/src/validator.js", "../../../node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js", "../../../node_modules/fast-xml-parser/src/xmlparser/xmlNode.js", "../../../node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js", "../../../node_modules/strnum/strnum.js", "../../../node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js", "../../../node_modules/fast-xml-parser/src/xmlparser/node2json.js", "../../../node_modules/fast-xml-parser/src/xmlparser/XMLParser.js", "../../../node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js", "../../../node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js", "../../../node_modules/fast-xml-parser/src/fxp.js", "../../../node_modules/long/dist/long.js", "../../../node_modules/ieee754/index.js", "../../../node_modules/pbf/index.js", "../../../node_modules/jsep/build/jsep.js", "../../../node_modules/base64-js/index.js", "../../../node_modules/@lumino/coreutils/src/json.ts", "../../../node_modules/@lumino/coreutils/src/mime.ts", "../../../node_modules/@lumino/coreutils/src/promise.ts", "../../../node_modules/@lumino/coreutils/src/token.ts", "../../../node_modules/@lumino/coreutils/src/random.ts", "../../../node_modules/@lumino/coreutils/src/random.browser.ts", "../../../node_modules/@lumino/coreutils/src/uuid.ts", "../../../node_modules/@lumino/coreutils/src/uuid.browser.ts", "../../../node_modules/lodash/_listCacheClear.js", "../../../node_modules/lodash/eq.js", "../../../node_modules/lodash/_assocIndexOf.js", "../../../node_modules/lodash/_listCacheDelete.js", "../../../node_modules/lodash/_listCacheGet.js", "../../../node_modules/lodash/_listCacheHas.js", "../../../node_modules/lodash/_listCacheSet.js", "../../../node_modules/lodash/_ListCache.js", "../../../node_modules/lodash/_stackClear.js", "../../../node_modules/lodash/_stackDelete.js", "../../../node_modules/lodash/_stackGet.js", "../../../node_modules/lodash/_stackHas.js", "../../../node_modules/lodash/_freeGlobal.js", "../../../node_modules/lodash/_root.js", "../../../node_modules/lodash/_Symbol.js", "../../../node_modules/lodash/_getRawTag.js", "../../../node_modules/lodash/_objectToString.js", "../../../node_modules/lodash/_baseGetTag.js", "../../../node_modules/lodash/isObject.js", "../../../node_modules/lodash/isFunction.js", "../../../node_modules/lodash/_coreJsData.js", "../../../node_modules/lodash/_isMasked.js", "../../../node_modules/lodash/_toSource.js", "../../../node_modules/lodash/_baseIsNative.js", "../../../node_modules/lodash/_getValue.js", "../../../node_modules/lodash/_getNative.js", "../../../node_modules/lodash/_Map.js", "../../../node_modules/lodash/_nativeCreate.js", "../../../node_modules/lodash/_hashClear.js", "../../../node_modules/lodash/_hashDelete.js", "../../../node_modules/lodash/_hashGet.js", "../../../node_modules/lodash/_hashHas.js", "../../../node_modules/lodash/_hashSet.js", "../../../node_modules/lodash/_Hash.js", "../../../node_modules/lodash/_mapCacheClear.js", "../../../node_modules/lodash/_isKeyable.js", "../../../node_modules/lodash/_getMapData.js", "../../../node_modules/lodash/_mapCacheDelete.js", "../../../node_modules/lodash/_mapCacheGet.js", "../../../node_modules/lodash/_mapCacheHas.js", "../../../node_modules/lodash/_mapCacheSet.js", "../../../node_modules/lodash/_MapCache.js", "../../../node_modules/lodash/_stackSet.js", "../../../node_modules/lodash/_Stack.js", "../../../node_modules/lodash/_setCacheAdd.js", "../../../node_modules/lodash/_setCacheHas.js", "../../../node_modules/lodash/_SetCache.js", "../../../node_modules/lodash/_arraySome.js", "../../../node_modules/lodash/_cacheHas.js", "../../../node_modules/lodash/_equalArrays.js", "../../../node_modules/lodash/_Uint8Array.js", "../../../node_modules/lodash/_mapToArray.js", "../../../node_modules/lodash/_setToArray.js", "../../../node_modules/lodash/_equalByTag.js", "../../../node_modules/lodash/_arrayPush.js", "../../../node_modules/lodash/isArray.js", "../../../node_modules/lodash/_baseGetAllKeys.js", "../../../node_modules/lodash/_arrayFilter.js", "../../../node_modules/lodash/stubArray.js", "../../../node_modules/lodash/_getSymbols.js", "../../../node_modules/lodash/_baseTimes.js", "../../../node_modules/lodash/isObjectLike.js", "../../../node_modules/lodash/_baseIsArguments.js", "../../../node_modules/lodash/isArguments.js", "../../../node_modules/lodash/stubFalse.js", "../../../node_modules/lodash/isBuffer.js", "../../../node_modules/lodash/_isIndex.js", "../../../node_modules/lodash/isLength.js", "../../../node_modules/lodash/_baseIsTypedArray.js", "../../../node_modules/lodash/_baseUnary.js", "../../../node_modules/lodash/_nodeUtil.js", "../../../node_modules/lodash/isTypedArray.js", "../../../node_modules/lodash/_arrayLikeKeys.js", "../../../node_modules/lodash/_isPrototype.js", "../../../node_modules/lodash/_overArg.js", "../../../node_modules/lodash/_nativeKeys.js", "../../../node_modules/lodash/_baseKeys.js", "../../../node_modules/lodash/isArrayLike.js", "../../../node_modules/lodash/keys.js", "../../../node_modules/lodash/_getAllKeys.js", "../../../node_modules/lodash/_equalObjects.js", "../../../node_modules/lodash/_DataView.js", "../../../node_modules/lodash/_Promise.js", "../../../node_modules/lodash/_Set.js", "../../../node_modules/lodash/_WeakMap.js", "../../../node_modules/lodash/_getTag.js", "../../../node_modules/lodash/_baseIsEqualDeep.js", "../../../node_modules/lodash/_baseIsEqual.js", "../../../node_modules/lodash/isEqual.js", "../../../node_modules/lodash/_getPrototype.js", "../../../node_modules/lodash/isPlainObject.js", "../../../node_modules/underscore/modules/_setup.js", "../../../node_modules/underscore/modules/restArguments.js", "../../../node_modules/underscore/modules/isObject.js", "../../../node_modules/underscore/modules/isNull.js", "../../../node_modules/underscore/modules/isUndefined.js", "../../../node_modules/underscore/modules/isBoolean.js", "../../../node_modules/underscore/modules/isElement.js", "../../../node_modules/underscore/modules/_tagTester.js", "../../../node_modules/underscore/modules/isString.js", "../../../node_modules/underscore/modules/isNumber.js", "../../../node_modules/underscore/modules/isDate.js", "../../../node_modules/underscore/modules/isRegExp.js", "../../../node_modules/underscore/modules/isError.js", "../../../node_modules/underscore/modules/isSymbol.js", "../../../node_modules/underscore/modules/isArrayBuffer.js", "../../../node_modules/underscore/modules/isFunction.js", "../../../node_modules/underscore/modules/_hasObjectTag.js", "../../../node_modules/underscore/modules/_stringTagBug.js", "../../../node_modules/underscore/modules/isDataView.js", "../../../node_modules/underscore/modules/isArray.js", "../../../node_modules/underscore/modules/_has.js", "../../../node_modules/underscore/modules/isArguments.js", "../../../node_modules/underscore/modules/isFinite.js", "../../../node_modules/underscore/modules/isNaN.js", "../../../node_modules/underscore/modules/constant.js", "../../../node_modules/underscore/modules/_createSizePropertyCheck.js", "../../../node_modules/underscore/modules/_shallowProperty.js", "../../../node_modules/underscore/modules/_getByteLength.js", "../../../node_modules/underscore/modules/_isBufferLike.js", "../../../node_modules/underscore/modules/isTypedArray.js", "../../../node_modules/underscore/modules/_getLength.js", "../../../node_modules/underscore/modules/_collectNonEnumProps.js", "../../../node_modules/underscore/modules/keys.js", "../../../node_modules/underscore/modules/isEmpty.js", "../../../node_modules/underscore/modules/isMatch.js", "../../../node_modules/underscore/modules/underscore.js", "../../../node_modules/underscore/modules/_toBufferView.js", "../../../node_modules/underscore/modules/isEqual.js", "../../../node_modules/underscore/modules/allKeys.js", "../../../node_modules/underscore/modules/_methodFingerprint.js", "../../../node_modules/underscore/modules/isMap.js", "../../../node_modules/underscore/modules/isWeakMap.js", "../../../node_modules/underscore/modules/isSet.js", "../../../node_modules/underscore/modules/isWeakSet.js", "../../../node_modules/underscore/modules/values.js", "../../../node_modules/underscore/modules/pairs.js", "../../../node_modules/underscore/modules/invert.js", "../../../node_modules/underscore/modules/functions.js", "../../../node_modules/underscore/modules/_createAssigner.js", "../../../node_modules/underscore/modules/extend.js", "../../../node_modules/underscore/modules/extendOwn.js", "../../../node_modules/underscore/modules/defaults.js", "../../../node_modules/underscore/modules/_baseCreate.js", "../../../node_modules/underscore/modules/create.js", "../../../node_modules/underscore/modules/clone.js", "../../../node_modules/underscore/modules/tap.js", "../../../node_modules/underscore/modules/toPath.js", "../../../node_modules/underscore/modules/_toPath.js", "../../../node_modules/underscore/modules/_deepGet.js", "../../../node_modules/underscore/modules/get.js", "../../../node_modules/underscore/modules/has.js", "../../../node_modules/underscore/modules/identity.js", "../../../node_modules/underscore/modules/matcher.js", "../../../node_modules/underscore/modules/property.js", "../../../node_modules/underscore/modules/_optimizeCb.js", "../../../node_modules/underscore/modules/_baseIteratee.js", "../../../node_modules/underscore/modules/iteratee.js", "../../../node_modules/underscore/modules/_cb.js", "../../../node_modules/underscore/modules/mapObject.js", "../../../node_modules/underscore/modules/noop.js", "../../../node_modules/underscore/modules/propertyOf.js", "../../../node_modules/underscore/modules/times.js", "../../../node_modules/underscore/modules/random.js", "../../../node_modules/underscore/modules/now.js", "../../../node_modules/underscore/modules/_createEscaper.js", "../../../node_modules/underscore/modules/_escapeMap.js", "../../../node_modules/underscore/modules/escape.js", "../../../node_modules/underscore/modules/_unescapeMap.js", "../../../node_modules/underscore/modules/unescape.js", "../../../node_modules/underscore/modules/templateSettings.js", "../../../node_modules/underscore/modules/template.js", "../../../node_modules/underscore/modules/result.js", "../../../node_modules/underscore/modules/uniqueId.js", "../../../node_modules/underscore/modules/chain.js", "../../../node_modules/underscore/modules/_executeBound.js", "../../../node_modules/underscore/modules/partial.js", "../../../node_modules/underscore/modules/bind.js", "../../../node_modules/underscore/modules/_isArrayLike.js", "../../../node_modules/underscore/modules/_flatten.js", "../../../node_modules/underscore/modules/bindAll.js", "../../../node_modules/underscore/modules/memoize.js", "../../../node_modules/underscore/modules/delay.js", "../../../node_modules/underscore/modules/defer.js", "../../../node_modules/underscore/modules/throttle.js", "../../../node_modules/underscore/modules/debounce.js", "../../../node_modules/underscore/modules/wrap.js", "../../../node_modules/underscore/modules/negate.js", "../../../node_modules/underscore/modules/compose.js", "../../../node_modules/underscore/modules/after.js", "../../../node_modules/underscore/modules/before.js", "../../../node_modules/underscore/modules/once.js", "../../../node_modules/underscore/modules/findKey.js", "../../../node_modules/underscore/modules/_createPredicateIndexFinder.js", "../../../node_modules/underscore/modules/findIndex.js", "../../../node_modules/underscore/modules/findLastIndex.js", "../../../node_modules/underscore/modules/sortedIndex.js", "../../../node_modules/underscore/modules/_createIndexFinder.js", "../../../node_modules/underscore/modules/indexOf.js", "../../../node_modules/underscore/modules/lastIndexOf.js", "../../../node_modules/underscore/modules/find.js", "../../../node_modules/underscore/modules/findWhere.js", "../../../node_modules/underscore/modules/each.js", "../../../node_modules/underscore/modules/map.js", "../../../node_modules/underscore/modules/_createReduce.js", "../../../node_modules/underscore/modules/reduce.js", "../../../node_modules/underscore/modules/reduceRight.js", "../../../node_modules/underscore/modules/filter.js", "../../../node_modules/underscore/modules/reject.js", "../../../node_modules/underscore/modules/every.js", "../../../node_modules/underscore/modules/some.js", "../../../node_modules/underscore/modules/contains.js", "../../../node_modules/underscore/modules/invoke.js", "../../../node_modules/underscore/modules/pluck.js", "../../../node_modules/underscore/modules/where.js", "../../../node_modules/underscore/modules/max.js", "../../../node_modules/underscore/modules/min.js", "../../../node_modules/underscore/modules/toArray.js", "../../../node_modules/underscore/modules/sample.js", "../../../node_modules/underscore/modules/shuffle.js", "../../../node_modules/underscore/modules/sortBy.js", "../../../node_modules/underscore/modules/_group.js", "../../../node_modules/underscore/modules/groupBy.js", "../../../node_modules/underscore/modules/indexBy.js", "../../../node_modules/underscore/modules/countBy.js", "../../../node_modules/underscore/modules/partition.js", "../../../node_modules/underscore/modules/size.js", "../../../node_modules/underscore/modules/_keyInObj.js", "../../../node_modules/underscore/modules/pick.js", "../../../node_modules/underscore/modules/omit.js", "../../../node_modules/underscore/modules/initial.js", "../../../node_modules/underscore/modules/first.js", "../../../node_modules/underscore/modules/rest.js", "../../../node_modules/underscore/modules/last.js", "../../../node_modules/underscore/modules/compact.js", "../../../node_modules/underscore/modules/flatten.js", "../../../node_modules/underscore/modules/difference.js", "../../../node_modules/underscore/modules/without.js", "../../../node_modules/underscore/modules/uniq.js", "../../../node_modules/underscore/modules/union.js", "../../../node_modules/underscore/modules/intersection.js", "../../../node_modules/underscore/modules/unzip.js", "../../../node_modules/underscore/modules/zip.js", "../../../node_modules/underscore/modules/object.js", "../../../node_modules/underscore/modules/range.js", "../../../node_modules/underscore/modules/chunk.js", "../../../node_modules/underscore/modules/_chainResult.js", "../../../node_modules/underscore/modules/mixin.js", "../../../node_modules/underscore/modules/underscore-array-methods.js", "../../../node_modules/underscore/modules/index.js", "../../../node_modules/underscore/modules/index-default.js", "../../../node_modules/underscore/modules/index-all.js", "../../../node_modules/jquery/dist/jquery.js", "../../../node_modules/backbone/backbone.js", "../src/index.js", "../src/version.js", "../../../node_modules/@loaders.gl/schema/dist/lib/table/batches/base-table-batch-aggregator.js", "../../../node_modules/@loaders.gl/schema/dist/lib/table/simple-table/row-utils.js", "../../../node_modules/@loaders.gl/schema/dist/lib/table/batches/row-table-batch-aggregator.js", "../../../node_modules/@loaders.gl/schema/dist/lib/table/batches/columnar-table-batch-aggregator.js", "../../../node_modules/@loaders.gl/schema/dist/lib/table/batches/table-batch-builder.js", "../../../node_modules/@loaders.gl/schema/dist/lib/table/simple-table/data-type.js", "../../../node_modules/@loaders.gl/schema/dist/lib/mesh/mesh-utils.js", "../../../node_modules/@loaders.gl/schema/dist/lib/mesh/deduce-mesh-schema.js", "../../../node_modules/@loaders.gl/schema/dist/lib/utils/async-queue.js", "../../../node_modules/@loaders.gl/csv/dist/papaparse/papaparse.js", "../../../node_modules/@loaders.gl/csv/dist/papaparse/async-iterator-streamer.js", "../../../node_modules/@loaders.gl/csv/dist/csv-loader.js", "../../../node_modules/@loaders.gl/loader-utils/dist/loader-types.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/env-utils/assert.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/env-utils/globals.js", "../../../node_modules/@probe.gl/env/dist/lib/globals.js", "../../../node_modules/@probe.gl/env/dist/lib/is-electron.js", "../../../node_modules/@probe.gl/env/dist/lib/is-browser.js", "../../../node_modules/@probe.gl/env/dist/lib/get-browser.js", "../../../node_modules/@probe.gl/env/dist/index.js", "../../../node_modules/@probe.gl/log/dist/utils/local-storage.js", "../../../node_modules/@probe.gl/log/dist/utils/formatters.js", "../../../node_modules/@probe.gl/log/dist/utils/color.js", "../../../node_modules/@probe.gl/log/dist/utils/autobind.js", "../../../node_modules/@probe.gl/log/dist/utils/assert.js", "../../../node_modules/@probe.gl/log/dist/utils/hi-res-timestamp.js", "../../../node_modules/@probe.gl/log/dist/log.js", "../../../node_modules/@probe.gl/log/dist/init.js", "../../../node_modules/@probe.gl/log/dist/index.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/option-utils/merge-loader-options.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/module-utils/js-module-utils.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/env-utils/version.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/env-utils/assert.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/env-utils/globals.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-job.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/node/worker_threads-browser.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-utils/get-loadable-worker-url.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-utils/get-transfer-list.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-thread.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-pool.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-farm.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-api/get-worker-url.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/worker-api/validate-worker-version.js", "../../../node_modules/@loaders.gl/worker-utils/dist/lib/library-utils/library-utils.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/worker-loader-utils/parse-with-worker.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/binary-utils/get-first-characters.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/parser-utils/parse-json.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/binary-utils/array-buffer-utils.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/binary-utils/memory-copy-utils.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/iterators/async-iteration.js", "../../../node_modules/@probe.gl/stats/dist/utils/hi-res-timestamp.js", "../../../node_modules/@probe.gl/stats/dist/lib/stat.js", "../../../node_modules/@probe.gl/stats/dist/lib/stats.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/request-utils/request-scheduler.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/path-utils/file-aliases.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/binary-utils/memory-conversion-utils.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/path-utils/path.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/path-utils/get-cwd.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/sources/data-source.js", "../../../node_modules/@loaders.gl/loader-utils/dist/lib/sources/image-source.js", "../../../node_modules/@loaders.gl/core/dist/javascript-utils/is-type.js", "../../../node_modules/@loaders.gl/core/dist/lib/fetch/fetch-error.js", "../../../node_modules/@loaders.gl/core/dist/lib/utils/mime-type-utils.js", "../../../node_modules/@loaders.gl/core/dist/lib/utils/url-utils.js", "../../../node_modules/@loaders.gl/core/dist/lib/utils/resource-utils.js", "../../../node_modules/@loaders.gl/core/dist/lib/utils/response-utils.js", "../../../node_modules/@loaders.gl/core/dist/lib/fetch/fetch-file.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/loggers.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/option-defaults.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/option-utils.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/normalize-loader.js", "../../../node_modules/@loaders.gl/core/dist/lib/api/register-loaders.js", "../../../node_modules/@loaders.gl/core/dist/lib/utils/log.js", "../../../node_modules/@loaders.gl/core/dist/lib/api/select-loader.js", "../../../node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-string-iterator.js", "../../../node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-array-buffer-iterator.js", "../../../node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-blob-iterator.js", "../../../node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-stream-iterator.js", "../../../node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-iterator.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/get-data.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/get-fetch-function.js", "../../../node_modules/@loaders.gl/core/dist/lib/loader-utils/loader-context.js", "../../../node_modules/@loaders.gl/core/dist/lib/api/parse.js", "../../../node_modules/@loaders.gl/core/dist/lib/api/load.js", "../../../node_modules/@luma.gl/core/dist/utils/log.js", "../../../node_modules/@luma.gl/core/dist/utils/stats-manager.js", "../../../node_modules/@luma.gl/core/dist/init.js", "../../../node_modules/@luma.gl/core/dist/utils/is-array.js", "../../../node_modules/@luma.gl/core/dist/utils/utils.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/resource.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/buffer.js", "../../../node_modules/@luma.gl/core/dist/adapter/type-utils/decode-data-type.js", "../../../node_modules/@luma.gl/core/dist/adapter/type-utils/decode-texture-format.js", "../../../node_modules/@luma.gl/core/dist/adapter/device.js", "../../../node_modules/@luma.gl/core/dist/utils/assert.js", "../../../node_modules/@luma.gl/core/dist/lib/luma.js", "../../../node_modules/@luma.gl/core/dist/adapter/canvas-context.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/texture.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/texture-view.js", "../../../node_modules/@luma.gl/core/dist/lib/compiler-log/format-compiler-log.js", "../../../node_modules/@luma.gl/core/dist/lib/compiler-log/get-shader-info.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/shader.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/sampler.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/framebuffer.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/render-pipeline.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/render-pass.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/compute-pipeline.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/command-encoder.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/command-buffer.js", "../../../node_modules/@luma.gl/core/dist/adapter/type-utils/decode-attribute-type.js", "../../../node_modules/@luma.gl/core/dist/adapter/type-utils/decode-vertex-format.js", "../../../node_modules/@luma.gl/core/dist/adapter/attribute-utils/get-attribute-from-layouts.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/vertex-array.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/transform-feedback.js", "../../../node_modules/@luma.gl/core/dist/adapter/resources/query-set.js", "../../../node_modules/@luma.gl/core/dist/adapter/type-utils/decode-shader-types.js", "../../../node_modules/@luma.gl/core/dist/utils/array-utils-flat.js", "../../../node_modules/@luma.gl/core/dist/lib/uniforms/uniform-buffer-layout.js", "../../../node_modules/@luma.gl/core/dist/utils/array-equal.js", "../../../node_modules/@luma.gl/core/dist/lib/uniforms/uniform-block.js", "../../../node_modules/@luma.gl/core/dist/lib/uniforms/uniform-store.js", "../../../node_modules/@luma.gl/core/dist/adapter/type-utils/vertex-format-from-attribute.js", "../../../node_modules/@luma.gl/core/dist/lib/uniforms/uniform.js", "../../../node_modules/@luma.gl/core/dist/utils/check-props.js", "../../../node_modules/@luma.gl/core/dist/utils/load-file.js", "../../../node_modules/@luma.gl/core/dist/utils/deep-equal.js", "../../../node_modules/@luma.gl/core/dist/utils/request-animation-frame.js", "../../../node_modules/@luma.gl/constants/dist/webgl-constants.js", "../../../node_modules/@luma.gl/webgl/dist/context/parameters/webgl-parameter-tables.js", "../../../node_modules/@luma.gl/webgl/dist/context/parameters/unified-parameter-api.js", "../../../node_modules/@luma.gl/webgl/dist/context/state-tracker/deep-array-equal.js", "../../../node_modules/@luma.gl/webgl/dist/context/state-tracker/track-context-state.js", "../../../node_modules/@luma.gl/webgl/dist/context/helpers/create-browser-context.js", "../../../node_modules/@luma.gl/webgl/dist/context/helpers/webgl-extensions.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/device-helpers/webgl-device-info.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/converters/vertex-formats.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/converters/texture-formats.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/device-helpers/webgl-device-features.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/device-helpers/webgl-device-limits.js", "../../../node_modules/@luma.gl/webgl/dist/context/state-tracker/with-parameters.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/converters/device-parameters.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/converters/sampler-parameters.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-buffer.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-sampler.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-texture-view.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-texture.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-framebuffer.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/webgl-canvas-context.js", "../../../node_modules/@luma.gl/webgl/dist/context/debug/spector.js", "../../../node_modules/@luma.gl/webgl/dist/context/debug/webgl-developer-tools.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/helpers/parse-shader-compiler-log.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-shader.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-render-pass.js", "../../../node_modules/@luma.gl/webgl/dist/classic/typed-array-utils.js", "../../../node_modules/@luma.gl/webgl/dist/classic/accessor.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/helpers/decode-webgl-types.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/helpers/get-shader-layout.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/helpers/set-uniform.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/helpers/webgl-topology-utils.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-render-pipeline.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-command-buffer.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-command-encoder.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-vertex-array.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-transform-feedback.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/resources/webgl-query-set.js", "../../../node_modules/@luma.gl/webgl/dist/classic/format-utils.js", "../../../node_modules/@luma.gl/webgl/dist/classic/copy-and-blit.js", "../../../node_modules/@luma.gl/webgl/dist/classic/clear.js", "../../../node_modules/@luma.gl/webgl/dist/adapter/webgl-device.js", "../src/playground/widget-tooltip.js", "../src/playground/utils/css-utils.js", "../src/playground/utils/mapbox-utils.js", "../src/playground/utils/script-utils.js", "../../../node_modules/@loaders.gl/images/dist/lib/utils/version.js", "../../../node_modules/@loaders.gl/images/dist/lib/category-api/image-type.js", "../../../node_modules/@loaders.gl/images/dist/lib/category-api/parsed-image-api.js", "../../../node_modules/@loaders.gl/images/dist/lib/parsers/svg-utils.js", "../../../node_modules/@loaders.gl/images/dist/lib/parsers/parse-to-image.js", "../../../node_modules/@loaders.gl/images/dist/lib/parsers/parse-to-image-bitmap.js", "../../../node_modules/@loaders.gl/images/dist/lib/category-api/parse-isobmff-binary.js", "../../../node_modules/@loaders.gl/images/dist/lib/category-api/binary-image-api.js", "../../../node_modules/@loaders.gl/images/dist/lib/parsers/parse-to-node-image.js", "../../../node_modules/@loaders.gl/images/dist/lib/parsers/parse-image.js", "../../../node_modules/@loaders.gl/images/dist/image-loader.js", "../../../node_modules/@loaders.gl/images/dist/lib/category-api/image-format.js", "../../core/dist/utils/log.js", "../../core/dist/debug/index.js", "../../core/dist/utils/json-loader.js", "../../core/dist/lib/init.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/utils/assert.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/filters/prop-types.js", "../../../node_modules/@luma.gl/shadertools/dist/module-injectors.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembly/shader-injections.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-module/shader-module-instance.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembly/select-shaders.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembly/resolve-modules.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembly/platform-defines.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-transpiler/transpile-glsl-shader.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembly/shader-hooks.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/glsl-utils/get-shader-info.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembly/assemble-shaders.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-assembler.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/shader-module/normalize-shader-module.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/glsl-utils/shader-utils.js", "../../../node_modules/@luma.gl/shadertools/dist/libs/wgsl-reflect/wgsl_reflect.module.js", "../../../node_modules/@luma.gl/shadertools/dist/lib/wgsl/get-shader-layout-wgsl.js", "../../../node_modules/@luma.gl/shadertools/dist/modules/math/fp32/fp32.js", "../../../node_modules/@luma.gl/shadertools/dist/modules/engine/picking/picking.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/math/fp64/fp64-utils.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/math/fp64/fp64-arithmetic-glsl.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/math/fp64/fp64.js", "../../../node_modules/@math.gl/core/dist/lib/common.js", "../../../node_modules/@math.gl/core/dist/classes/base/math-array.js", "../../../node_modules/@math.gl/core/dist/lib/validators.js", "../../../node_modules/@math.gl/core/dist/lib/assert.js", "../../../node_modules/@math.gl/core/dist/classes/base/vector.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/vec2.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/common.js", "../../../node_modules/@math.gl/core/dist/lib/gl-matrix-extras.js", "../../../node_modules/@math.gl/core/dist/classes/vector2.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/vec3.js", "../../../node_modules/@math.gl/core/dist/classes/vector3.js", "../../../node_modules/@math.gl/core/dist/classes/vector4.js", "../../../node_modules/@math.gl/core/dist/classes/base/matrix.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/mat3.js", "../../../node_modules/@math.gl/core/dist/classes/matrix3.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/mat4.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/vec4.js", "../../../node_modules/@math.gl/core/dist/classes/matrix4.js", "../../../node_modules/@math.gl/core/dist/gl-matrix/quat.js", "../../../node_modules/@math.gl/core/dist/classes/quaternion.js", "../../../node_modules/@math.gl/core/dist/classes/spherical-coordinates.js", "../../../node_modules/@math.gl/core/dist/lib/math-utils.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/lights/lights-glsl.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/lights/lights.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/phong-lighting/phong-lighting-glsl.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/phong-lighting/phong-lighting.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/pbr/pbr-vertex-glsl.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/pbr/pbr-fragment-glsl.js", "../../../node_modules/@luma.gl/shadertools/dist/modules-webgl1/lighting/pbr/pbr.js", "../../core/dist/shaderlib/misc/geometry.js", "../../core/dist/lib/constants.js", "../../core/dist/shaderlib/project/project.glsl.js", "../../core/dist/utils/memoize.js", "../../core/dist/shaderlib/project/viewport-uniforms.js", "../../core/dist/shaderlib/project/project.js", "../../core/dist/shaderlib/project32/project32.js", "../../../node_modules/@math.gl/web-mercator/dist/math-utils.js", "../../../node_modules/@math.gl/web-mercator/dist/assert.js", "../../../node_modules/@math.gl/web-mercator/dist/web-mercator-utils.js", "../../../node_modules/@math.gl/web-mercator/dist/fit-bounds.js", "../../../node_modules/@math.gl/web-mercator/dist/get-bounds.js", "../../../node_modules/@math.gl/web-mercator/dist/normalize-viewport-props.js", "../../../node_modules/@math.gl/web-mercator/dist/fly-to-viewport.js", "../../core/dist/shaderlib/shadow/shadow.js", "../../core/dist/shaderlib/picking/picking.js", "../../core/dist/shaderlib/index.js", "../../core/dist/effects/lighting/ambient-light.js", "../../core/dist/effects/lighting/directional-light.js", "../../core/dist/passes/pass.js", "../../core/dist/passes/layers-pass.js", "../../core/dist/passes/shadow-pass.js", "../../core/dist/effects/lighting/lighting-effect.js", "../../core/dist/utils/typed-array-manager.js", "../../core/dist/utils/math-utils.js", "../../core/dist/viewports/viewport.js", "../../core/dist/viewports/web-mercator-viewport.js", "../../core/dist/shaderlib/project/project-functions.js", "../../core/dist/effects/lighting/point-light.js", "../../core/dist/effects/lighting/camera-light.js", "../../../node_modules/@math.gl/sun/dist/suncalc.js", "../../core/dist/effects/lighting/sun-light.js", "../../../node_modules/@luma.gl/engine/dist/animation/timeline.js", "../../../node_modules/@luma.gl/engine/dist/animation-loop/animation-loop.js", "../../../node_modules/@luma.gl/engine/dist/geometry/gpu-geometry.js", "../../../node_modules/@luma.gl/engine/dist/shader-inputs.js", "../../../node_modules/@luma.gl/engine/dist/lib/pipeline-factory.js", "../../../node_modules/@luma.gl/engine/dist/lib/shader-factory.js", "../../../node_modules/@luma.gl/engine/dist/debug/debug-shader-layout.js", "../../../node_modules/@luma.gl/engine/dist/debug/debug-framebuffer.js", "../../../node_modules/@luma.gl/engine/dist/model/model.js", "../../../node_modules/@luma.gl/engine/dist/transform/buffer-transform.js", "../../../node_modules/@luma.gl/engine/dist/transform/texture-transform.js", "../../../node_modules/@luma.gl/engine/dist/geometry/geometry.js", "../../../node_modules/@luma.gl/engine/dist/lib/clip-space.js", "../../../node_modules/@luma.gl/engine/dist/scenegraph/scenegraph-node.js", "../../../node_modules/@luma.gl/engine/dist/scenegraph/group-node.js", "../../../node_modules/@luma.gl/engine/dist/scenegraph/model-node.js", "../../../node_modules/@luma.gl/engine/dist/geometries/cube-geometry.js", "../../../node_modules/@luma.gl/engine/dist/geometries/sphere-geometry.js", "../../core/dist/passes/screen-pass.js", "../../core/dist/effects/post-process-effect.js", "../../core/dist/passes/pick-layers-pass.js", "../../core/dist/lifecycle/constants.js", "../../core/dist/utils/flatten.js", "../../core/dist/lib/resource/resource.js", "../../core/dist/lib/resource/resource-manager.js", "../../core/dist/lib/layer-manager.js", "../../core/dist/utils/deep-equal.js", "../../core/dist/lib/view-manager.js", "../../core/dist/utils/positions.js", "../../core/dist/views/view.js", "../../core/dist/transitions/transition.js", "../../core/dist/controllers/transition-manager.js", "../../core/dist/utils/assert.js", "../../core/dist/transitions/transition-interpolator.js", "../../core/dist/transitions/linear-interpolator.js", "../../core/dist/controllers/controller.js", "../../core/dist/controllers/view-state.js", "../../core/dist/controllers/map-controller.js", "../../core/dist/views/map-view.js", "../../core/dist/lib/effect-manager.js", "../../core/dist/passes/draw-layers-pass.js", "../../core/dist/lib/deck-renderer.js", "../../core/dist/lib/picking/query-object.js", "../../core/dist/lib/picking/pick-info.js", "../../core/dist/lib/deck-picker.js", "../../core/dist/lib/widget-manager.js", "../../core/dist/lib/tooltip.js", "../../../node_modules/mjolnir.js/src/utils/hammer.browser.ts", "../../../node_modules/mjolnir.js/src/utils/hammer-overrides.ts", "../../../node_modules/mjolnir.js/src/inputs/input.ts", "../../../node_modules/mjolnir.js/src/constants.ts", "../../../node_modules/mjolnir.js/src/utils/globals.ts", "../../../node_modules/mjolnir.js/src/inputs/wheel-input.ts", "../../../node_modules/mjolnir.js/src/inputs/move-input.ts", "../../../node_modules/mjolnir.js/src/inputs/key-input.ts", "../../../node_modules/mjolnir.js/src/inputs/contextmenu-input.ts", "../../../node_modules/mjolnir.js/src/utils/event-utils.ts", "../../../node_modules/mjolnir.js/src/utils/event-registrar.ts", "../../../node_modules/mjolnir.js/src/event-manager.ts", "../../core/dist/lib/deck.js", "../../core/dist/lib/attribute/gl-utils.js", "../../core/dist/lib/attribute/data-column.js", "../../core/dist/utils/iterable-utils.js", "../../core/dist/utils/range.js", "../../core/dist/lib/attribute/transition-settings.js", "../../core/dist/lib/attribute/attribute.js", "../../core/dist/utils/array-utils.js", "../../core/dist/transitions/gpu-transition-utils.js", "../../core/dist/transitions/gpu-transition.js", "../../core/dist/transitions/gpu-interpolation-transition.js", "../../core/dist/transitions/gpu-spring-transition.js", "../../core/dist/lib/attribute/attribute-transition-manager.js", "../../core/dist/lib/attribute/attribute-manager.js", "../../core/dist/transitions/cpu-interpolation-transition.js", "../../core/dist/transitions/cpu-spring-transition.js", "../../core/dist/lib/uniform-transition-manager.js", "../../core/dist/lifecycle/props.js", "../../core/dist/utils/count.js", "../../core/dist/utils/shader.js", "../../core/dist/utils/texture.js", "../../core/dist/lifecycle/prop-types.js", "../../core/dist/lifecycle/create-props.js", "../../core/dist/lifecycle/component.js", "../../core/dist/lifecycle/component-state.js", "../../core/dist/lib/layer-state.js", "../../core/dist/lib/layer.js", "../../core/dist/lib/composite-layer.js", "../../core/dist/viewports/globe-viewport.js", "../../core/dist/viewports/orbit-viewport.js", "../../core/dist/viewports/orthographic-viewport.js", "../../core/dist/viewports/first-person-viewport.js", "../../core/dist/controllers/first-person-controller.js", "../../core/dist/views/first-person-view.js", "../../core/dist/controllers/orbit-controller.js", "../../core/dist/views/orbit-view.js", "../../core/dist/controllers/orthographic-controller.js", "../../core/dist/views/orthographic-view.js", "../../core/dist/controllers/globe-controller.js", "../../core/dist/views/globe-view.js", "../../core/dist/lib/layer-extension.js", "../../core/dist/transitions/fly-to-interpolator.js", "../../core/dist/utils/tesselator.js", "../../google-maps/dist/utils.js", "../../google-maps/dist/google-maps-overlay.js", "../src/playground/utils/google-maps-utils.js", "../src/lib/components/component-css.js", "../src/lib/components/description-card.js", "../src/lib/components/add-support-components.js", "../src/deck-bundle.js", "../../layers/dist/arc-layer/arc-layer-vertex.glsl.js", "../../layers/dist/arc-layer/arc-layer-fragment.glsl.js", "../../layers/dist/arc-layer/arc-layer.js", "../../layers/dist/bitmap-layer/create-mesh.js", "../../layers/dist/bitmap-layer/bitmap-layer-vertex.js", "../../layers/dist/bitmap-layer/bitmap-layer-fragment.js", "../../layers/dist/bitmap-layer/bitmap-layer.js", "../../layers/dist/icon-layer/icon-layer-vertex.glsl.js", "../../layers/dist/icon-layer/icon-layer-fragment.glsl.js", "../../layers/dist/icon-layer/icon-manager.js", "../../layers/dist/icon-layer/icon-layer.js", "../../layers/dist/line-layer/line-layer-vertex.glsl.js", "../../layers/dist/line-layer/line-layer-fragment.glsl.js", "../../layers/dist/line-layer/line-layer.js", "../../layers/dist/point-cloud-layer/point-cloud-layer-vertex.glsl.js", "../../layers/dist/point-cloud-layer/point-cloud-layer-fragment.glsl.js", "../../layers/dist/point-cloud-layer/point-cloud-layer.js", "../../layers/dist/scatterplot-layer/scatterplot-layer-vertex.glsl.js", "../../layers/dist/scatterplot-layer/scatterplot-layer-fragment.glsl.js", "../../layers/dist/scatterplot-layer/scatterplot-layer.js", "../../../node_modules/@math.gl/polygon/dist/polygon-utils.js", "../../../node_modules/@math.gl/polygon/dist/earcut.js", "../../../node_modules/@math.gl/polygon/dist/utils.js", "../../../node_modules/@math.gl/polygon/dist/lineclip.js", "../../../node_modules/@math.gl/polygon/dist/cut-by-grid.js", "../../../node_modules/@math.gl/polygon/dist/cut-by-mercator-bounds.js", "../../layers/dist/column-layer/column-geometry.js", "../../layers/dist/column-layer/column-layer-vertex.glsl.js", "../../layers/dist/column-layer/column-layer-fragment.glsl.js", "../../layers/dist/column-layer/column-layer.js", "../../layers/dist/column-layer/grid-cell-layer.js", "../../layers/dist/path-layer/path.js", "../../layers/dist/path-layer/path-tesselator.js", "../../layers/dist/path-layer/path-layer-vertex.glsl.js", "../../layers/dist/path-layer/path-layer-fragment.glsl.js", "../../layers/dist/path-layer/path-layer.js", "../../layers/dist/solid-polygon-layer/polygon.js", "../../layers/dist/solid-polygon-layer/polygon-tesselator.js", "../../layers/dist/solid-polygon-layer/solid-polygon-layer-vertex-main.glsl.js", "../../layers/dist/solid-polygon-layer/solid-polygon-layer-vertex-top.glsl.js", "../../layers/dist/solid-polygon-layer/solid-polygon-layer-vertex-side.glsl.js", "../../layers/dist/solid-polygon-layer/solid-polygon-layer-fragment.glsl.js", "../../layers/dist/solid-polygon-layer/solid-polygon-layer.js", "../../layers/dist/utils.js", "../../layers/dist/polygon-layer/polygon-layer.js", "../../layers/dist/geojson-layer/geojson-binary.js", "../../layers/dist/text-layer/multi-icon-layer/multi-icon-layer-fragment.glsl.js", "../../layers/dist/text-layer/multi-icon-layer/multi-icon-layer.js", "../../../node_modules/@mapbox/tiny-sdf/index.js", "../../layers/dist/text-layer/utils.js", "../../layers/dist/text-layer/lru-cache.js", "../../layers/dist/text-layer/font-atlas-manager.js", "../../layers/dist/text-layer/text-background-layer/text-background-layer-vertex.glsl.js", "../../layers/dist/text-layer/text-background-layer/text-background-layer-fragment.glsl.js", "../../layers/dist/text-layer/text-background-layer/text-background-layer.js", "../../layers/dist/text-layer/text-layer.js", "../../layers/dist/geojson-layer/sub-layer-map.js", "../../layers/dist/geojson-layer/geojson.js", "../../layers/dist/geojson-layer/geojson-layer-props.js", "../../layers/dist/geojson-layer/geojson-layer.js", "../../aggregation-layers/dist/utils/aggregation-operation-utils.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/gpu-grid-aggregator-constants.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/aggregate-to-grid-vs.glsl.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/aggregate-to-grid-fs.glsl.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/aggregate-all-vs.glsl.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/aggregate-all-fs.glsl.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/transform-mean-vs.glsl.js", "../../aggregation-layers/dist/utils/resource-utils.js", "../../aggregation-layers/dist/utils/gpu-grid-aggregation/gpu-grid-aggregator.js", "../../aggregation-layers/dist/utils/color-utils.js", "../../aggregation-layers/dist/screen-grid-layer/screen-grid-layer-vertex.glsl.js", "../../aggregation-layers/dist/screen-grid-layer/screen-grid-layer-fragment.glsl.js", "../../aggregation-layers/dist/screen-grid-layer/screen-grid-cell-layer.js", "../../aggregation-layers/dist/utils/prop-utils.js", "../../aggregation-layers/dist/aggregation-layer.js", "../../aggregation-layers/dist/utils/scale-utils.js", "../../aggregation-layers/dist/utils/bin-sorter.js", "../../aggregation-layers/dist/utils/grid-aggregation-utils.js", "../../aggregation-layers/dist/cpu-grid-layer/grid-aggregator.js", "../../aggregation-layers/dist/grid-aggregation-layer.js", "../../aggregation-layers/dist/screen-grid-layer/screen-grid-layer.js", "../../aggregation-layers/dist/utils/cpu-aggregator.js", "../../aggregation-layers/dist/cpu-grid-layer/cpu-grid-layer.js", "../../../node_modules/d3-hexbin/src/hexbin.js", "../../aggregation-layers/dist/hexagon-layer/hexagon-aggregator.js", "../../aggregation-layers/dist/hexagon-layer/hexagon-layer.js", "../../aggregation-layers/dist/contour-layer/marching-squares-codes.js", "../../aggregation-layers/dist/contour-layer/marching-squares.js", "../../aggregation-layers/dist/contour-layer/contour-utils.js", "../../aggregation-layers/dist/contour-layer/contour-layer.js", "../../aggregation-layers/dist/gpu-grid-layer/gpu-grid-cell-layer-vertex.glsl.js", "../../aggregation-layers/dist/gpu-grid-layer/gpu-grid-cell-layer-fragment.glsl.js", "../../aggregation-layers/dist/gpu-grid-layer/gpu-grid-cell-layer.js", "../../aggregation-layers/dist/gpu-grid-layer/gpu-grid-layer.js", "../../aggregation-layers/dist/grid-layer/grid-layer.js", "../../aggregation-layers/dist/heatmap-layer/heatmap-layer-utils.js", "../../aggregation-layers/dist/heatmap-layer/triangle-layer-vertex.glsl.js", "../../aggregation-layers/dist/heatmap-layer/triangle-layer-fragment.glsl.js", "../../aggregation-layers/dist/heatmap-layer/triangle-layer.js", "../../aggregation-layers/dist/heatmap-layer/weights-vs.glsl.js", "../../aggregation-layers/dist/heatmap-layer/weights-fs.glsl.js", "../../aggregation-layers/dist/heatmap-layer/max-vs.glsl.js", "../../aggregation-layers/dist/heatmap-layer/max-fs.glsl.js", "../../aggregation-layers/dist/heatmap-layer/heatmap-layer.js", "../../../node_modules/@loaders.gl/xml/dist/lib/xml-utils/uncapitalize.js", "../../../node_modules/@loaders.gl/xml/dist/lib/parsers/parse-xml.js", "../../../node_modules/@loaders.gl/xml/dist/xml-loader.js", "../../../node_modules/@loaders.gl/wms/dist/lib/parsers/wms/parse-wms-error.js", "../../../node_modules/@loaders.gl/wms/dist/wms-error-loader.js", "../../../node_modules/@loaders.gl/wms/dist/lib/parsers/xml/parse-xml-helpers.js", "../../../node_modules/@loaders.gl/wms/dist/lib/parsers/wms/parse-wms-capabilities.js", "../../../node_modules/@loaders.gl/wms/dist/wms-capabilities-loader.js", "../../../node_modules/@loaders.gl/wms/dist/lib/parsers/wms/parse-wms-features.js", "../../../node_modules/@loaders.gl/wms/dist/wip/wms-feature-info-loader.js", "../../../node_modules/@loaders.gl/wms/dist/lib/parsers/wms/parse-wms-layer-description.js", "../../../node_modules/@loaders.gl/wms/dist/wip/wms-layer-description-loader.js", "../../../node_modules/@loaders.gl/wms/dist/lib/services/create-image-service.js", "../../../node_modules/@loaders.gl/wms/dist/services/ogc/wms-service.js", "../../../node_modules/@loaders.gl/wms/dist/lib/services/image-service.js", "../../../node_modules/@loaders.gl/wms/dist/services/arcgis/arcgis-image-service.js", "../../../node_modules/@loaders.gl/wms/dist/services/create-image-source.js", "../../geo-layers/dist/wms-layer/utils.js", "../../geo-layers/dist/wms-layer/wms-layer.js", "../../geo-layers/dist/great-circle-layer/great-circle-layer.js", "../../geo-layers/dist/geo-cell-layer/GeoCellLayer.js", "../../geo-layers/dist/s2-layer/s2-geometry.js", "../../geo-layers/dist/s2-layer/s2-utils.js", "../../geo-layers/dist/s2-layer/s2-layer.js", "../../geo-layers/dist/quadkey-layer/quadkey-utils.js", "../../geo-layers/dist/quadkey-layer/quadkey-layer.js", "../../geo-layers/dist/tileset-2d/tile-2d-header.js", "../../../node_modules/@math.gl/culling/dist/constants.js", "../../../node_modules/@math.gl/culling/dist/lib/bounding-volumes/axis-aligned-bounding-box.js", "../../../node_modules/@math.gl/culling/dist/lib/bounding-volumes/bounding-sphere.js", "../../../node_modules/@math.gl/culling/dist/lib/bounding-volumes/oriented-bounding-box.js", "../../../node_modules/@math.gl/culling/dist/lib/plane.js", "../../../node_modules/@math.gl/culling/dist/lib/culling-volume.js", "../../../node_modules/@math.gl/culling/dist/lib/perspective-off-center-frustum.js", "../../../node_modules/@math.gl/culling/dist/lib/algorithms/bounding-sphere-from-points.js", "../../../node_modules/@math.gl/culling/dist/lib/algorithms/compute-eigen-decomposition.js", "../../../node_modules/@math.gl/culling/dist/lib/algorithms/bounding-box-from-points.js", "../../geo-layers/dist/tileset-2d/tile-2d-traversal.js", "../../geo-layers/dist/tileset-2d/utils.js", "../../geo-layers/dist/tileset-2d/memoize.js", "../../geo-layers/dist/tileset-2d/tileset-2d.js", "../../geo-layers/dist/tile-layer/tile-layer.js", "../../geo-layers/dist/trips-layer/trips-layer.js", "../../../node_modules/h3-js/dist/libh3-browser.js", "../../../node_modules/h3-js/lib/bindings.js", "../../../node_modules/h3-js/lib/errors.js", "../../../node_modules/h3-js/lib/h3core.js", "../../geo-layers/dist/h3-layers/h3-utils.js", "../../geo-layers/dist/h3-layers/h3-hexagon-layer.js", "../../geo-layers/dist/h3-layers/h3-cluster-layer.js", "../../mesh-layers/dist/utils/matrix.js", "../../mesh-layers/dist/simple-mesh-layer/simple-mesh-layer-vertex.glsl.js", "../../mesh-layers/dist/simple-mesh-layer/simple-mesh-layer-fragment.glsl.js", "../../mesh-layers/dist/simple-mesh-layer/simple-mesh-layer.js", "../../../node_modules/@luma.gl/gltf/dist/pbr/parse-pbr-material.js", "../../../node_modules/@loaders.gl/textures/dist/lib/utils/version.js", "../../../node_modules/@loaders.gl/textures/dist/lib/parsers/basis-module-loader.js", "../../../node_modules/@loaders.gl/textures/dist/lib/gl-extensions.js", "../../../node_modules/@loaders.gl/textures/dist/lib/utils/texture-formats.js", "../../../node_modules/ktx-parse/src/constants.ts", "../../../node_modules/ktx-parse/src/container.ts", "../../../node_modules/ktx-parse/src/buffer-reader.ts", "../../../node_modules/ktx-parse/src/util.ts", "../../../node_modules/ktx-parse/src/read.ts", "../../../node_modules/ktx-parse/src/write.ts", "../../../node_modules/@loaders.gl/textures/dist/lib/parsers/parse-ktx.js", "../../../node_modules/@loaders.gl/textures/dist/lib/parsers/parse-basis.js", "../../../node_modules/@loaders.gl/textures/dist/basis-loader.js", "../../../node_modules/@luma.gl/gltf/dist/gltf/gltf-animator.js", "../../../node_modules/@luma.gl/gltf/dist/gltf/create-gltf-model.js", "../../../node_modules/@luma.gl/gltf/dist/gltf/gltf-instantiator.js", "../../../node_modules/@luma.gl/gltf/dist/gltf/create-gltf-objects.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/EXT_mesh_features.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/utils/assert.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/gltf-utils/gltf-constants.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/gltf-utils/gltf-utils.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/gltf-utils/get-typed-array.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/api/gltf-scenegraph.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/utils/3d-tiles-utils.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/EXT_structural_metadata.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/deprecated/EXT_feature_metadata.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/utils/version.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/parsers/parse-glb.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/gltf-utils/resolve-url.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/EXT_meshopt_compression.js", "../../../node_modules/@loaders.gl/gltf/dist/meshopt/meshopt-decoder.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/EXT_texture_webp.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/KHR_texture_basisu.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/KHR_draco_mesh_compression.js", "../../../node_modules/@loaders.gl/draco/dist/lib/utils/version.js", "../../../node_modules/@loaders.gl/draco/dist/draco-loader.js", "../../../node_modules/@loaders.gl/draco/dist/lib/utils/get-draco-schema.js", "../../../node_modules/@loaders.gl/draco/dist/lib/draco-parser.js", "../../../node_modules/@loaders.gl/draco/dist/lib/draco-module-loader.js", "../../../node_modules/@loaders.gl/draco/dist/index.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/gltf-utils/gltf-attribute-utils.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/KHR_texture_transform.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/deprecated/KHR_lights_punctual.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/deprecated/KHR_materials_unlit.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/deprecated/KHR_techniques_webgl.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/api/gltf-extensions.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/extensions/KHR_binary_gltf.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/api/normalize-gltf-v1.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/parsers/parse-gltf.js", "../../../node_modules/@loaders.gl/gltf/dist/gltf-loader.js", "../../../node_modules/@loaders.gl/gltf/dist/lib/api/post-process-gltf.js", "../../mesh-layers/dist/scenegraph-layer/gltf-utils.js", "../../mesh-layers/dist/scenegraph-layer/scenegraph-layer-vertex.glsl.js", "../../mesh-layers/dist/scenegraph-layer/scenegraph-layer-fragment.glsl.js", "../../mesh-layers/dist/scenegraph-layer/scenegraph-layer.js", "../../geo-layers/dist/mesh-layer/mesh-layer-vertex.glsl.js", "../../geo-layers/dist/mesh-layer/mesh-layer-fragment.glsl.js", "../../geo-layers/dist/mesh-layer/mesh-layer.js", "../../../node_modules/@math.gl/geospatial/dist/constants.js", "../../../node_modules/@math.gl/geospatial/dist/type-utils.js", "../../../node_modules/@math.gl/geospatial/dist/ellipsoid/helpers/ellipsoid-transform.js", "../../../node_modules/@math.gl/geospatial/dist/ellipsoid/helpers/scale-to-geodetic-surface.js", "../../../node_modules/@math.gl/geospatial/dist/ellipsoid/ellipsoid.js", "../../../node_modules/@loaders.gl/tiles/dist/utils/doubly-linked-list-node.js", "../../../node_modules/@loaders.gl/tiles/dist/utils/doubly-linked-list.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/tileset-cache.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/transform-utils.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/frame-state.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/zoom.js", "../../../node_modules/@loaders.gl/tiles/dist/constants.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/bounding-volume.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/tiles-3d-lod.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/i3s-lod.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/helpers/3d-tiles-options.js", "../../../node_modules/@loaders.gl/tiles/dist/utils/managed-array.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/tileset-traverser.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/tile-3d.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/format-3d-tiles/tileset-3d-traverser.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/format-i3s/i3s-pending-tiles-register.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/format-i3s/i3s-tile-manager.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/format-i3s/i3s-tileset-traverser.js", "../../../node_modules/@loaders.gl/tiles/dist/tileset/tileset-3d.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/version.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/constants.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/parse-utils.js", "../../../node_modules/@loaders.gl/math/dist/geometry/constants.js", "../../../node_modules/@loaders.gl/math/dist/geometry/gl/gl-type.js", "../../../node_modules/@loaders.gl/math/dist/geometry/utils/assert.js", "../../../node_modules/@loaders.gl/math/dist/geometry/colors/rgb565.js", "../../../node_modules/@loaders.gl/math/dist/geometry/compression/attribute-compression.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/classes/tile-3d-feature-table.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/classes/helpers/tile-3d-accessor-utils.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/classes/tile-3d-batch-table-hierarchy.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/classes/tile-3d-batch-table.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/parse-3d-tile-header.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/parse-3d-tile-tables.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/normalize-3d-tile-colors.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/normalize-3d-tile-normals.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/normalize-3d-tile-positions.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile-point-cloud.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/parse-3d-tile-gltf-view.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile-batched-model.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile-instanced-model.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile-composite.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile-gltf.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/parse-3d-tile-subtree.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/tile-3d-subtree-loader.js", "../../../node_modules/@loaders.gl/3d-tiles/node_modules/long/index.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/s2-token-functions.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/s2geometry/s2-geometry.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/converters/s2-to-boundary.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/s2geometry/s2-cell-utils.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/s2-geometry-functions.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/converters/s2-to-region.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/s2/converters/s2-to-obb-points.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/utils/obb/s2-corners-to-obb.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/helpers/parse-3d-implicit-tiles.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/lib/parsers/parse-3d-tile-header.js", "../../../node_modules/@loaders.gl/3d-tiles/dist/tiles-3d-loader.js", "../../geo-layers/dist/tile-3d-layer/tile-3d-layer.js", "../../../node_modules/@loaders.gl/terrain/dist/lib/decode-quantized-mesh.js", "../../../node_modules/@loaders.gl/terrain/dist/lib/helpers/skirt.js", "../../../node_modules/@loaders.gl/terrain/dist/lib/parse-quantized-mesh.js", "../../../node_modules/@mapbox/martini/index.js", "../../../node_modules/@loaders.gl/terrain/dist/lib/delatin/index.js", "../../../node_modules/@loaders.gl/terrain/dist/lib/parse-terrain.js", "../../../node_modules/@loaders.gl/terrain/dist/lib/utils/version.js", "../../../node_modules/@loaders.gl/terrain/dist/terrain-loader.js", "../../../node_modules/@loaders.gl/terrain/dist/quantized-mesh-loader.js", "../../../node_modules/@loaders.gl/terrain/dist/index.js", "../../geo-layers/dist/terrain-layer/terrain-layer.js", "../../extensions/dist/clip/clip-extension.js", "../../../node_modules/@loaders.gl/gis/dist/lib/binary-features/flat-geojson-to-binary.js", "../../../node_modules/@loaders.gl/gis/dist/lib/binary-features/binary-to-geojson.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/parse-mvt.js", "../../../node_modules/@loaders.gl/mvt/dist/helpers/mapbox-util-functions.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/mapbox-vector-tile/vector-tile-feature.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/mapbox-vector-tile/vector-tile-layer.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/mapbox-vector-tile/vector-tile.js", "../../../node_modules/@loaders.gl/mvt/dist/helpers/binary-util-functions.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/binary-vector-tile/vector-tile-feature.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/binary-vector-tile/vector-tile-layer.js", "../../../node_modules/@loaders.gl/mvt/dist/lib/binary-vector-tile/vector-tile.js", "../../../node_modules/@loaders.gl/mvt/dist/mvt-loader.js", "../../geo-layers/dist/mvt-layer/coordinate-transform.js", "../../geo-layers/dist/mvt-layer/find-index-binary.js", "../../geo-layers/dist/mvt-layer/mvt-layer.js", "../../geo-layers/dist/geohash-layer/geohash-utils.js", "../../geo-layers/dist/geohash-layer/geohash-layer.js", "../../json/dist/utils/assert.js", "../../json/dist/utils/get.js", "../../../node_modules/expression-eval/index.ts", "../../json/dist/helpers/parse-expression-string.js", "../../json/dist/syntactic-sugar.js", "../../json/dist/json-configuration.js", "../../json/dist/helpers/convert-functions.js", "../../json/dist/helpers/instantiate-class.js", "../../json/dist/helpers/execute-function.js", "../../json/dist/helpers/parse-json.js", "../../json/dist/json-converter.js", "../../json/dist/transports/transport.js", "../../json/dist/utils/shallow-equal-objects.js", "../../core/dist/scripting/map-wrapper.js", "../../core/dist/scripting/deckgl.js", "../src/playground/create-deck.js", "../src/playground/playground.js", "../src/lib/jupyter-transport.js", "../../../node_modules/@jupyter-widgets/base/lib/index.js", "../../../node_modules/@jupyter-widgets/base/lib/utils.js", "../../../node_modules/@jupyter-widgets/base/lib/manager-base.js", "../../../node_modules/@jupyter-widgets/base/lib/version.js", "../../../node_modules/@jupyter-widgets/base/lib/backbone-patch.js", "../../../node_modules/@jupyter-widgets/base/lib/widget.js", "../../../node_modules/@jupyter-widgets/base/lib/nativeview.js", "../../../node_modules/@lumino/algorithm/src/array.ts", "../../../node_modules/@lumino/algorithm/src/iter.ts", "../../../node_modules/@lumino/algorithm/src/chain.ts", "../../../node_modules/@lumino/algorithm/src/empty.ts", "../../../node_modules/@lumino/algorithm/src/enumerate.ts", "../../../node_modules/@lumino/algorithm/src/filter.ts", "../../../node_modules/@lumino/algorithm/src/find.ts", "../../../node_modules/@lumino/algorithm/src/map.ts", "../../../node_modules/@lumino/algorithm/src/range.ts", "../../../node_modules/@lumino/algorithm/src/reduce.ts", "../../../node_modules/@lumino/algorithm/src/repeat.ts", "../../../node_modules/@lumino/algorithm/src/retro.ts", "../../../node_modules/@lumino/algorithm/src/sort.ts", "../../../node_modules/@lumino/algorithm/src/stride.ts", "../../../node_modules/@lumino/algorithm/src/string.ts", "../../../node_modules/@lumino/algorithm/src/take.ts", "../../../node_modules/@lumino/algorithm/src/zip.ts", "../../../node_modules/@lumino/domutils/src/clipboard.ts", "../../../node_modules/@lumino/domutils/src/element.ts", "../../../node_modules/@lumino/domutils/src/platform.ts", "../../../node_modules/@lumino/domutils/src/selector.ts", "../../../node_modules/@lumino/collections/src/bplustree.ts", "../../../node_modules/@lumino/collections/src/linkedlist.ts", "../../../node_modules/@lumino/messaging/node_modules/tslib/tslib.es6.js", "../../../node_modules/@lumino/messaging/src/index.ts", "../../../node_modules/@lumino/properties/src/index.ts", "../../../node_modules/@lumino/signaling/src/index.ts", "../../../node_modules/@lumino/disposable/node_modules/tslib/tslib.es6.js", "../../../node_modules/@lumino/disposable/src/index.ts", "../../../node_modules/@lumino/dragdrop/src/index.ts", "../../../node_modules/@lumino/keyboard/src/index.ts", "../../../node_modules/@lumino/commands/node_modules/tslib/tslib.es6.js", "../../../node_modules/@lumino/commands/src/index.ts", "../../../node_modules/@lumino/virtualdom/node_modules/tslib/tslib.es6.js", "../../../node_modules/@lumino/virtualdom/src/index.ts", "../../../node_modules/@lumino/widgets/node_modules/tslib/tslib.es6.js", "../../../node_modules/@lumino/widgets/src/boxengine.ts", "../../../node_modules/@lumino/widgets/src/title.ts", "../../../node_modules/@lumino/widgets/src/widget.ts", "../../../node_modules/@lumino/widgets/src/layout.ts", "../../../node_modules/@lumino/widgets/src/panellayout.ts", "../../../node_modules/@lumino/widgets/src/utils.ts", "../../../node_modules/@lumino/widgets/src/splitlayout.ts", "../../../node_modules/@lumino/widgets/src/accordionlayout.ts", "../../../node_modules/@lumino/widgets/src/panel.ts", "../../../node_modules/@lumino/widgets/src/splitpanel.ts", "../../../node_modules/@lumino/widgets/src/accordionpanel.ts", "../../../node_modules/@lumino/widgets/src/boxlayout.ts", "../../../node_modules/@lumino/widgets/src/boxpanel.ts", "../../../node_modules/@lumino/widgets/src/commandpalette.ts", "../../../node_modules/@lumino/widgets/src/menu.ts", "../../../node_modules/@lumino/widgets/src/contextmenu.ts", "../../../node_modules/@lumino/widgets/src/tabbar.ts", "../../../node_modules/@lumino/widgets/src/docklayout.ts", "../../../node_modules/@lumino/widgets/src/dockpanel.ts", "../../../node_modules/@lumino/widgets/src/focustracker.ts", "../../../node_modules/@lumino/widgets/src/gridlayout.ts", "../../../node_modules/@lumino/widgets/src/menubar.ts", "../../../node_modules/@lumino/widgets/src/scrollbar.ts", "../../../node_modules/@lumino/widgets/src/singletonlayout.ts", "../../../node_modules/@lumino/widgets/src/stackedlayout.ts", "../../../node_modules/@lumino/widgets/src/stackedpanel.ts", "../../../node_modules/@lumino/widgets/src/tabpanel.ts", "../../../node_modules/@jupyter-widgets/base/lib/widget_layout.js", "../../../node_modules/@jupyter-widgets/base/lib/widget_style.js", "../../../node_modules/@jupyter-widgets/base/lib/services-shim.js", "../../../node_modules/@jupyter-widgets/base/lib/viewlist.js", "../../../node_modules/@jupyter-widgets/base/lib/registry.js", "../src/lib/utils/deserialize-matrix.js", "../src/lib/jupyter-transport-model.js", "../src/lib/jupyter-transport-view.js", "../../core/dist/scripting/lumagl.js", "../../core/dist/scripting/loadersgl.js"],
  "sourcesContent": ["/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * Ported from Webkit\n * http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/UnitBezier.h\n */\n\nmodule.exports = UnitBezier;\n\nfunction UnitBezier(p1x, p1y, p2x, p2y) {\n    // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n    this.cx = 3.0 * p1x;\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\n    this.ax = 1.0 - this.cx - this.bx;\n\n    this.cy = 3.0 * p1y;\n    this.by = 3.0 * (p2y - p1y) - this.cy;\n    this.ay = 1.0 - this.cy - this.by;\n\n    this.p1x = p1x;\n    this.p1y = p2y;\n    this.p2x = p2x;\n    this.p2y = p2y;\n}\n\nUnitBezier.prototype.sampleCurveX = function(t) {\n    // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\n};\n\nUnitBezier.prototype.sampleCurveY = function(t) {\n    return ((this.ay * t + this.by) * t + this.cy) * t;\n};\n\nUnitBezier.prototype.sampleCurveDerivativeX = function(t) {\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\n};\n\nUnitBezier.prototype.solveCurveX = function(x, epsilon) {\n    if (typeof epsilon === 'undefined') epsilon = 1e-6;\n\n    var t0, t1, t2, x2, i;\n\n    // First try a few iterations of Newton's method -- normally very fast.\n    for (t2 = x, i = 0; i < 8; i++) {\n\n        x2 = this.sampleCurveX(t2) - x;\n        if (Math.abs(x2) < epsilon) return t2;\n\n        var d2 = this.sampleCurveDerivativeX(t2);\n        if (Math.abs(d2) < 1e-6) break;\n\n        t2 = t2 - x2 / d2;\n    }\n\n    // Fall back to the bisection method for reliability.\n    t0 = 0.0;\n    t1 = 1.0;\n    t2 = x;\n\n    if (t2 < t0) return t0;\n    if (t2 > t1) return t1;\n\n    while (t0 < t1) {\n\n        x2 = this.sampleCurveX(t2);\n        if (Math.abs(x2 - x) < epsilon) return t2;\n\n        if (x > x2) {\n            t0 = t2;\n        } else {\n            t1 = t2;\n        }\n\n        t2 = (t1 - t0) * 0.5 + t0;\n    }\n\n    // Failure.\n    return t2;\n};\n\nUnitBezier.prototype.solve = function(x, epsilon) {\n    return this.sampleCurveY(this.solveCurveX(x, epsilon));\n};\n", "'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n", "// @flow\n/* eslint-env browser */\nimport type {Window} from '../../types/window';\n\n// shim window for the case of requiring the browser bundle in Node\nexport default typeof self !== 'undefined' ? (self: Window) : (({}: any): Window);\n", "// @flow\n\nimport UnitBezier from '@mapbox/unitbezier';\n\nimport Point from '@mapbox/point-geometry';\nimport window from './window';\n\nimport type {Callback} from '../types/callback';\n\n// Number.MAX_SAFE_INTEGER not available in IE\nexport const MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n/**\n * @module util\n * @private\n */\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexport function easeCubicInOut(t: number): number {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    const t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n}\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexport function bezier(p1x: number, p1y: number, p2x: number, p2y: number): (t: number) => number {\n    const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n    return function(t: number) {\n        return bezier.solve(t);\n    };\n}\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexport const ease = bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexport function clamp(n: number, min: number, max: number): number {\n    return Math.min(max, Math.max(min, n));\n}\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexport function wrap(n: number, min: number, max: number): number {\n    const d = max - min;\n    const w = ((n - min) % d + d) % d + min;\n    return (w === min) ? max : w;\n}\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexport function asyncAll<Item, Result>(\n    array: Array<Item>,\n    fn: (item: Item, fnCallback: Callback<Result>) => void,\n    callback: Callback<Array<Result>>\n) {\n    if (!array.length) { return callback(null, []); }\n    let remaining = array.length;\n    const results = new Array(array.length);\n    let error = null;\n    array.forEach((item, i) => {\n        fn(item, (err, result) => {\n            if (err) error = err;\n            results[i] = ((result: any): Result); // https://github.com/facebook/flow/issues/2123\n            if (--remaining === 0) callback(error, results);\n        });\n    });\n}\n\n/*\n * Polyfill for Object.values. Not fully spec compliant, but we don't\n * need it to be.\n *\n * @private\n */\nexport function values<T>(obj: {[key: string]: T}): Array<T> {\n    const result = [];\n    for (const k in obj) {\n        result.push(obj[k]);\n    }\n    return result;\n}\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexport function keysDifference<S, T>(obj: {[key: string]: S}, other: {[key: string]: T}): Array<string> {\n    const difference = [];\n    for (const i in obj) {\n        if (!(i in other)) {\n            difference.push(i);\n        }\n    }\n    return difference;\n}\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param sources sources from which properties are pulled\n * @private\n */\nexport function extend(dest: Object, ...sources: Array<?Object>): Object {\n    for (const src of sources) {\n        for (const k in src) {\n            dest[k] = src[k];\n        }\n    }\n    return dest;\n}\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexport function pick(src: Object, properties: Array<string>): Object {\n    const result = {};\n    for (let i = 0; i < properties.length; i++) {\n        const k = properties[i];\n        if (k in src) {\n            result[k] = src[k];\n        }\n    }\n    return result;\n}\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexport function uniqueId(): number {\n    return id++;\n}\n\n/**\n * Return a random UUID (v4). Taken from: https://gist.github.com/jed/982883\n * @private\n */\nexport function uuid(): string {\n    function b(a) {\n        return a ? (a ^ Math.random() * 16 >> a / 4).toString(16) :\n        //$FlowFixMe: Flow doesn't like the implied array literal conversion here\n            ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n    }\n    return b();\n}\n\n/**\n * Return whether a given value is a power of two\n * @private\n */\nexport function isPowerOfTwo(value: number): boolean {\n    return (Math.log(value) / Math.LN2) % 1 === 0;\n}\n\n/**\n * Return the next power of two, or the input value if already a power of two\n * @private\n */\nexport function nextPowerOfTwo(value: number): number {\n    if (value <= 1) return 1;\n    return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n}\n\n/**\n * Validate a string to match UUID(v4) of the\n * form: xxxxxxxx-xxxx-4xxx-[89ab]xxx-xxxxxxxxxxxx\n * @param str string to validate.\n * @private\n */\nexport function validateUuid(str: ?string): boolean {\n    return str ? /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(str) : false;\n}\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexport function bindAll(fns: Array<string>, context: Object): void {\n    fns.forEach((fn) => {\n        if (!context[fn]) { return; }\n        context[fn] = context[fn].bind(context);\n    });\n}\n\n/**\n * Determine if a string ends with a particular substring\n *\n * @private\n */\nexport function endsWith(string: string, suffix: string): boolean {\n    return string.indexOf(suffix, string.length - suffix.length) !== -1;\n}\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexport function mapObject(input: Object, iterator: Function, context?: Object): Object {\n    const output = {};\n    for (const key in input) {\n        output[key] = iterator.call(context || this, input[key], key, input);\n    }\n    return output;\n}\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexport function filterObject(input: Object, iterator: Function, context?: Object): Object {\n    const output = {};\n    for (const key in input) {\n        if (iterator.call(context || this, input[key], key, input)) {\n            output[key] = input[key];\n        }\n    }\n    return output;\n}\n\nimport deepEqual from '../style-spec/util/deep_equal';\nexport {deepEqual};\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexport function clone<T>(input: T): T {\n    if (Array.isArray(input)) {\n        return input.map(clone);\n    } else if (typeof input === 'object' && input) {\n        return ((mapObject(input, clone): any): T);\n    } else {\n        return input;\n    }\n}\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexport function arraysIntersect<T>(a: Array<T>, b: Array<T>): boolean {\n    for (let l = 0; l < a.length; l++) {\n        if (b.indexOf(a[l]) >= 0) return true;\n    }\n    return false;\n}\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory: {[key: string]: boolean} = {};\n\nexport function warnOnce(message: string): void {\n    if (!warnOnceHistory[message]) {\n        // console isn't defined in some WebWorkers, see #2558\n        if (typeof console !== \"undefined\") console.warn(message);\n        warnOnceHistory[message] = true;\n    }\n}\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @private\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexport function isCounterClockwise(a: Point, b: Point, c: Point): boolean {\n    return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n}\n\n/**\n * Returns the signed area for the polygon ring.  Postive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @private\n * @param ring Exterior or interior ring\n */\nexport function calculateSignedArea(ring: Array<Point>): number {\n    let sum = 0;\n    for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @private\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexport function isClosedPolygon(points: Array<Point>): boolean {\n    // If it is 2 points that are the same then it is a point\n    // If it is 3 points with start and end the same then it is a line\n    if (points.length < 4)\n        return false;\n\n    const p1 = points[0];\n    const p2 = points[points.length - 1];\n\n    if (Math.abs(p1.x - p2.x) > 0 ||\n        Math.abs(p1.y - p2.y) > 0) {\n        return false;\n    }\n\n    // polygon simplification can produce polygons with zero area and more than 3 points\n    return Math.abs(calculateSignedArea(points)) > 0.01;\n}\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @private\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexport function sphericalToCartesian([r, azimuthal, polar]: [number, number, number]): {x: number, y: number, z: number} {\n    // We abstract \"north\"/\"up\" (compass-wise) to be 0° when really this is 90° (π/2):\n    // correct for that here\n    azimuthal += 90;\n\n    // Convert azimuthal and polar angles to radians\n    azimuthal *= Math.PI / 180;\n    polar *= Math.PI / 180;\n\n    return {\n        x: r * Math.cos(azimuthal) * Math.sin(polar),\n        y: r * Math.sin(azimuthal) * Math.sin(polar),\n        z: r * Math.cos(polar)\n    };\n}\n\n/* global self, WorkerGlobalScope */\n/**\n *  Retuns true if the when run in the web-worker context.\n *\n * @private\n * @returns {boolean}\n */\nexport function isWorker(): boolean {\n    return typeof WorkerGlobalScope !== 'undefined' && typeof self !== 'undefined' &&\n           self instanceof WorkerGlobalScope;\n}\n\n/**\n * Parses data from 'Cache-Control' headers.\n *\n * @private\n * @param cacheControl Value of 'Cache-Control' header\n * @return object containing parsed header info.\n */\n\nexport function parseCacheControl(cacheControl: string): Object {\n    // Taken from [Wreck](https://github.com/hapijs/wreck)\n    const re = /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g;\n\n    const header = {};\n    cacheControl.replace(re, ($0, $1, $2, $3) => {\n        const value = $2 || $3;\n        header[$1] = value ? value.toLowerCase() : true;\n        return '';\n    });\n\n    if (header['max-age']) {\n        const maxAge = parseInt(header['max-age'], 10);\n        if (isNaN(maxAge)) delete header['max-age'];\n        else header['max-age'] = maxAge;\n    }\n\n    return header;\n}\n\nlet _isSafari = null;\n\n/**\n * Returns true when run in WebKit derived browsers.\n * This is used as a workaround for a memory leak in Safari caused by using Transferable objects to\n * transfer data between WebWorkers and the main thread.\n * https://github.com/mapbox/mapbox-gl-js/issues/8771\n *\n * This should be removed once the underlying Safari issue is fixed.\n *\n * @private\n * @param scope {WindowOrWorkerGlobalScope} Since this function is used both on the main thread and WebWorker context,\n *      let the calling scope pass in the global scope object.\n * @returns {boolean}\n */\nexport function isSafari(scope: any): boolean {\n    if (_isSafari == null) {\n        const userAgent = scope.navigator ? scope.navigator.userAgent : null;\n        _isSafari = !!scope.safari ||\n        !!(userAgent && (/\\b(iPad|iPhone|iPod)\\b/.test(userAgent) || (!!userAgent.match('Safari') && !userAgent.match('Chrome'))));\n    }\n    return _isSafari;\n}\n\nexport function storageAvailable(type: string): boolean {\n    try {\n        const storage = window[type];\n        storage.setItem('_mapbox_test_', 1);\n        storage.removeItem('_mapbox_test_');\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// The following methods are from https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\n//Unicode compliant base64 encoder for strings\nexport function b64EncodeUnicode(str: string) {\n    return window.btoa(\n        encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,\n            (match, p1) => {\n                return String.fromCharCode(Number('0x' + p1)); //eslint-disable-line\n            }\n        )\n    );\n}\n\n// Unicode compliant decoder for base64-encoded strings\nexport function b64DecodeUnicode(str: string) {\n    return decodeURIComponent(window.atob(str).split('').map((c) => {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2); //eslint-disable-line\n    }).join(''));\n}\n", "// @flow strict\n\nimport window from './window';\nimport type {Cancelable} from '../types/cancelable';\n\nconst now = window.performance && window.performance.now ?\n    window.performance.now.bind(window.performance) :\n    Date.now.bind(Date);\n\nconst raf = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame;\n\nconst cancel = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame;\n\nlet linkEl;\n\nlet reducedMotionQuery: MediaQueryList;\n\n/**\n * @private\n */\nconst exported = {\n    /**\n     * Provides a function that outputs milliseconds: either performance.now()\n     * or a fallback to Date.now()\n     */\n    now,\n\n    frame(fn: (paintStartTimestamp: number) => void): Cancelable {\n        const frame = raf(fn);\n        return {cancel: () => cancel(frame)};\n    },\n\n    getImageData(img: CanvasImageSource, padding?: number = 0): ImageData {\n        const canvas = window.document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        if (!context) {\n            throw new Error('failed to create canvas 2d context');\n        }\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0, img.width, img.height);\n        return context.getImageData(-padding, -padding, img.width + 2 * padding, img.height + 2 * padding);\n    },\n\n    resolveURL(path: string) {\n        if (!linkEl) linkEl = window.document.createElement('a');\n        linkEl.href = path;\n        return linkEl.href;\n    },\n\n    hardwareConcurrency: window.navigator && window.navigator.hardwareConcurrency || 4,\n\n    get devicePixelRatio() { return window.devicePixelRatio; },\n    get prefersReducedMotion(): boolean {\n        if (!window.matchMedia) return false;\n        //Lazily initialize media query\n        if (reducedMotionQuery == null) {\n            reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n        }\n        return reducedMotionQuery.matches;\n    },\n};\n\nexport default exported;\n", "// @flow strict\n\nimport window from './window';\n\nconst exported = {\n    supported: false,\n    testSupport\n};\n\nexport default exported;\n\nlet glForTesting;\nlet webpCheckComplete = false;\nlet webpImgTest;\nlet webpImgTestOnloadComplete = false;\n\nif (window.document) {\n    webpImgTest = window.document.createElement('img');\n    webpImgTest.onload = function() {\n        if (glForTesting) testWebpTextureUpload(glForTesting);\n        glForTesting = null;\n        webpImgTestOnloadComplete = true;\n    };\n    webpImgTest.onerror = function() {\n        webpCheckComplete = true;\n        glForTesting = null;\n    };\n    webpImgTest.src = 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n}\n\nfunction testSupport(gl: WebGLRenderingContext) {\n    if (webpCheckComplete || !webpImgTest) return;\n\n    // HTMLImageElement.complete is set when an image is done loading it's source\n    // regardless of whether the load was successful or not.\n    // It's possible for an error to set HTMLImageElement.complete to true which would trigger\n    // testWebpTextureUpload and mistakenly set exported.supported to true in browsers which don't support webp\n    // To avoid this, we set a flag in the image's onload handler and only call testWebpTextureUpload\n    // after a successful image load event.\n    if (webpImgTestOnloadComplete) {\n        testWebpTextureUpload(gl);\n    } else {\n        glForTesting = gl;\n\n    }\n}\n\nfunction testWebpTextureUpload(gl: WebGLRenderingContext) {\n    // Edge 18 supports WebP but not uploading a WebP image to a gl texture\n    // Test support for this before allowing WebP images.\n    // https://github.com/mapbox/mapbox-gl-js/issues/7671\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    try {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, webpImgTest);\n\n        // The error does not get triggered in Edge if the context is lost\n        if (gl.isContextLost()) return;\n\n        exported.supported = true;\n    } catch (e) {\n        // Catch \"Unspecified Error.\" in Edge 18.\n    }\n\n    gl.deleteTexture(texture);\n\n    webpCheckComplete = true;\n}\n", "// @flow strict\n\ntype Config = {|\n  API_URL: string,\n  EVENTS_URL: ?string,\n  FEEDBACK_URL: string,\n  REQUIRE_ACCESS_TOKEN: boolean,\n  ACCESS_TOKEN: ?string,\n  MAX_PARALLEL_IMAGE_REQUESTS: number\n|};\n\nconst config: Config = {\n    API_URL: 'https://api.mapbox.com',\n    get EVENTS_URL() {\n        if (!this.API_URL) { return null; }\n        if (this.API_URL.indexOf('https://api.mapbox.cn') === 0) {\n            return 'https://events.mapbox.cn/events/v2';\n        } else if (this.API_URL.indexOf('https://api.mapbox.com') === 0) {\n            return 'https://events.mapbox.com/events/v2';\n        } else {\n            return null;\n        }\n    },\n    FEEDBACK_URL: 'https://apps.mapbox.com/feedback',\n    REQUIRE_ACCESS_TOKEN: true,\n    ACCESS_TOKEN: null,\n    MAX_PARALLEL_IMAGE_REQUESTS: 16\n};\n\nexport default config;\n", "// @flow\n\n/***** START WARNING - IF YOU USE THIS CODE WITH MAPBOX MAPPING APIS, REMOVAL OR\n* MODIFICATION OF THE FOLLOWING CODE VIOLATES THE MAPBOX TERMS OF SERVICE  ******\n* The following code is used to access Mapbox's Mapping APIs. Removal or modification\n* of this code when used with Mapbox's Mapping APIs can result in higher fees and/or\n* termination of your account with Mapbox.\n*\n* Under the Mapbox Terms of Service, you may not use this code to access Mapbox\n* Mapping APIs other than through Mapbox SDKs.\n*\n* The Mapping APIs documentation is available at https://docs.mapbox.com/api/maps/#maps\n* and the Mapbox Terms of Service are available at https://www.mapbox.com/tos/\n******************************************************************************/\n\ntype SkuTokenObject = {|\n    token: string,\n    tokenExpiresAt: number\n|};\n\nconst SKU_ID = '01';\n\nfunction createSkuToken(): SkuTokenObject {\n    // SKU_ID and TOKEN_VERSION are specified by an internal schema and should not change\n    const TOKEN_VERSION = '1';\n    const base62chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    // sessionRandomizer is a randomized 10-digit base-62 number\n    let sessionRandomizer = '';\n    for (let i = 0; i < 10; i++) {\n        sessionRandomizer += base62chars[Math.floor(Math.random() * 62)];\n    }\n    const expiration = 12 * 60 * 60 * 1000; // 12 hours\n    const token = [TOKEN_VERSION, SKU_ID, sessionRandomizer].join('');\n    const tokenExpiresAt = Date.now() + expiration;\n\n    return {token, tokenExpiresAt};\n}\n\nexport {createSkuToken, SKU_ID};\n\n/***** END WARNING - REMOVAL OR MODIFICATION OF THE\nPRECEDING CODE VIOLATES THE MAPBOX TERMS OF SERVICE  ******/\n", "// @flow\n\n/***** START WARNING - IF YOU USE THIS CODE WITH MAPBOX MAPPING APIS, REMOVAL OR\n* MODIFICATION OF THE FOLLOWING CODE VIOLATES THE MAPBOX TERMS OF SERVICE  ******\n* The following code is used to access Mapbox's Mapping APIs. Removal or modification\n* of this code when used with Mapbox's Mapping APIs can result in higher fees and/or\n* termination of your account with Mapbox.\n*\n* Under the Mapbox Terms of Service, you may not use this code to access Mapbox\n* Mapping APIs other than through Mapbox SDKs.\n*\n* The Mapping APIs documentation is available at https://docs.mapbox.com/api/maps/#maps\n* and the Mapbox Terms of Service are available at https://www.mapbox.com/tos/\n******************************************************************************/\n\nimport config from './config';\n\nimport browser from './browser';\nimport window from './window';\nimport webpSupported from './webp_supported';\nimport {createSkuToken, SKU_ID} from './sku_token';\nimport {version as sdkVersion} from '../../package.json';\nimport {uuid, validateUuid, storageAvailable, b64DecodeUnicode, b64EncodeUnicode, warnOnce, extend} from './util';\nimport {postData, ResourceType} from './ajax';\n\nimport type {RequestParameters} from './ajax';\nimport type {Cancelable} from '../types/cancelable';\nimport type {TileJSON} from '../types/tilejson';\n\ntype ResourceTypeEnum = $Keys<typeof ResourceType>;\nexport type RequestTransformFunction = (url: string, resourceType?: ResourceTypeEnum) => RequestParameters;\n\ntype UrlObject = {|\n    protocol: string,\n    authority: string,\n    path: string,\n    params: Array<string>\n|};\n\nexport class RequestManager {\n    _skuToken: string;\n    _skuTokenExpiresAt: number;\n    _transformRequestFn: ?RequestTransformFunction;\n    _customAccessToken: ?string;\n\n    constructor(transformRequestFn?: RequestTransformFunction, customAccessToken?: string) {\n        this._transformRequestFn = transformRequestFn;\n        this._customAccessToken = customAccessToken;\n        this._createSkuToken();\n    }\n\n    _createSkuToken() {\n        const skuToken = createSkuToken();\n        this._skuToken = skuToken.token;\n        this._skuTokenExpiresAt = skuToken.tokenExpiresAt;\n    }\n\n    _isSkuTokenExpired(): boolean {\n        return Date.now() > this._skuTokenExpiresAt;\n    }\n\n    transformRequest(url: string, type: ResourceTypeEnum) {\n        if (this._transformRequestFn) {\n            return this._transformRequestFn(url, type) || {url};\n        }\n\n        return {url};\n    }\n\n    normalizeStyleURL(url: string, accessToken?: string): string {\n        if (!isMapboxURL(url)) return url;\n        const urlObject = parseUrl(url);\n        urlObject.path = `/styles/v1${urlObject.path}`;\n        return this._makeAPIURL(urlObject, this._customAccessToken || accessToken);\n    }\n\n    normalizeGlyphsURL(url: string, accessToken?: string): string {\n        if (!isMapboxURL(url)) return url;\n        const urlObject = parseUrl(url);\n        urlObject.path = `/fonts/v1${urlObject.path}`;\n        return this._makeAPIURL(urlObject, this._customAccessToken || accessToken);\n    }\n\n    normalizeSourceURL(url: string, accessToken?: string): string {\n        if (!isMapboxURL(url)) return url;\n        const urlObject = parseUrl(url);\n        urlObject.path = `/v4/${urlObject.authority}.json`;\n        // TileJSON requests need a secure flag appended to their URLs so\n        // that the server knows to send SSL-ified resource references.\n        urlObject.params.push('secure');\n        return this._makeAPIURL(urlObject, this._customAccessToken || accessToken);\n    }\n\n    normalizeSpriteURL(url: string, format: string, extension: string, accessToken?: string): string {\n        const urlObject = parseUrl(url);\n        if (!isMapboxURL(url)) {\n            urlObject.path += `${format}${extension}`;\n            return formatUrl(urlObject);\n        }\n        urlObject.path = `/styles/v1${urlObject.path}/sprite${format}${extension}`;\n        return this._makeAPIURL(urlObject, this._customAccessToken || accessToken);\n    }\n\n    normalizeTileURL(tileURL: string, tileSize?: ?number): string {\n        if (this._isSkuTokenExpired()) {\n            this._createSkuToken();\n        }\n\n        if (tileURL && !isMapboxURL(tileURL)) return tileURL;\n\n        const urlObject = parseUrl(tileURL);\n        const imageExtensionRe = /(\\.(png|jpg)\\d*)(?=$)/;\n        const tileURLAPIPrefixRe = /^.+\\/v4\\//;\n\n        // The v4 mapbox tile API supports 512x512 image tiles only when @2x\n        // is appended to the tile URL. If `tileSize: 512` is specified for\n        // a Mapbox raster source force the @2x suffix even if a non hidpi device.\n        const suffix = browser.devicePixelRatio >= 2 || tileSize === 512 ? '@2x' : '';\n        const extension = webpSupported.supported ? '.webp' : '$1';\n        urlObject.path = urlObject.path.replace(imageExtensionRe, `${suffix}${extension}`);\n        urlObject.path = urlObject.path.replace(tileURLAPIPrefixRe, '/');\n        urlObject.path = `/v4${urlObject.path}`;\n\n        const accessToken = this._customAccessToken || getAccessToken(urlObject.params) || config.ACCESS_TOKEN;\n        if (config.REQUIRE_ACCESS_TOKEN && accessToken && this._skuToken) {\n            urlObject.params.push(`sku=${this._skuToken}`);\n        }\n\n        return this._makeAPIURL(urlObject, accessToken);\n    }\n\n    canonicalizeTileURL(url: string, removeAccessToken: boolean) {\n        const version = \"/v4/\";\n        // matches any file extension specified by a dot and one or more alphanumeric characters\n        const extensionRe = /\\.[\\w]+$/;\n\n        const urlObject = parseUrl(url);\n        // Make sure that we are dealing with a valid Mapbox tile URL.\n        // Has to begin with /v4/, with a valid filename + extension\n        if (!urlObject.path.match(/(^\\/v4\\/)/) || !urlObject.path.match(extensionRe)) {\n            // Not a proper Mapbox tile URL.\n            return url;\n        }\n        // Reassemble the canonical URL from the parts we've parsed before.\n        let result = \"mapbox://tiles/\";\n        result +=  urlObject.path.replace(version, '');\n\n        // Append the query string, minus the access token parameter.\n        let params = urlObject.params;\n        if (removeAccessToken) {\n            params = params.filter(p => !p.match(/^access_token=/));\n        }\n        if (params.length) result += `?${params.join('&')}`;\n        return result;\n    }\n\n    canonicalizeTileset(tileJSON: TileJSON, sourceURL?: string) {\n        const removeAccessToken = sourceURL ? isMapboxURL(sourceURL) : false;\n        const canonical = [];\n        for (const url of tileJSON.tiles || []) {\n            if (isMapboxHTTPURL(url)) {\n                canonical.push(this.canonicalizeTileURL(url, removeAccessToken));\n            } else {\n                canonical.push(url);\n            }\n        }\n        return canonical;\n    }\n\n    _makeAPIURL(urlObject: UrlObject, accessToken: string | null | void): string {\n        const help = 'See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes';\n        const apiUrlObject = parseUrl(config.API_URL);\n        urlObject.protocol = apiUrlObject.protocol;\n        urlObject.authority = apiUrlObject.authority;\n\n        if (urlObject.protocol === 'http') {\n            const i = urlObject.params.indexOf('secure');\n            if (i >= 0) urlObject.params.splice(i, 1);\n        }\n\n        if (apiUrlObject.path !== '/') {\n            urlObject.path = `${apiUrlObject.path}${urlObject.path}`;\n        }\n\n        if (!config.REQUIRE_ACCESS_TOKEN) return formatUrl(urlObject);\n\n        accessToken = accessToken || config.ACCESS_TOKEN;\n        if (!accessToken)\n            throw new Error(`An API access token is required to use Mapbox GL. ${help}`);\n        if (accessToken[0] === 's')\n            throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${help}`);\n\n        urlObject.params = urlObject.params.filter((d) => d.indexOf('access_token') === -1);\n        urlObject.params.push(`access_token=${accessToken}`);\n        return formatUrl(urlObject);\n    }\n}\n\nfunction isMapboxURL(url: string) {\n    return url.indexOf('mapbox:') === 0;\n}\n\nconst mapboxHTTPURLRe = /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/|\\?|$)/i;\nfunction isMapboxHTTPURL(url: string): boolean {\n    return mapboxHTTPURLRe.test(url);\n}\n\nfunction hasCacheDefeatingSku(url: string) {\n    return url.indexOf('sku=') > 0 && isMapboxHTTPURL(url);\n}\n\nfunction getAccessToken(params: Array<string>): string | null {\n    for (const param of params) {\n        const match = param.match(/^access_token=(.*)$/);\n        if (match) {\n            return match[1];\n        }\n    }\n    return null;\n}\n\nconst urlRe = /^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;\n\nfunction parseUrl(url: string): UrlObject {\n    const parts = url.match(urlRe);\n    if (!parts) {\n        throw new Error('Unable to parse URL object');\n    }\n    return {\n        protocol: parts[1],\n        authority: parts[2],\n        path: parts[3] || '/',\n        params: parts[4] ? parts[4].split('&') : []\n    };\n}\n\nfunction formatUrl(obj: UrlObject): string {\n    const params = obj.params.length ? `?${obj.params.join('&')}` : '';\n    return `${obj.protocol}://${obj.authority}${obj.path}${params}`;\n}\n\nexport {isMapboxURL, isMapboxHTTPURL, hasCacheDefeatingSku};\n\nconst telemEventKey = 'mapbox.eventData';\n\nfunction parseAccessToken(accessToken: ?string) {\n    if (!accessToken) {\n        return null;\n    }\n\n    const parts = accessToken.split('.');\n    if (!parts || parts.length !== 3) {\n        return null;\n    }\n\n    try {\n        const jsonData = JSON.parse(b64DecodeUnicode(parts[1]));\n        return jsonData;\n    } catch (e) {\n        return null;\n    }\n}\n\ntype TelemetryEventType = 'appUserTurnstile' | 'map.load';\n\nclass TelemetryEvent {\n    eventData: any;\n    anonId: ?string;\n    queue: Array<any>;\n    type: TelemetryEventType;\n    pendingRequest: ?Cancelable;\n    _customAccessToken: ?string;\n\n    constructor(type: TelemetryEventType) {\n        this.type = type;\n        this.anonId = null;\n        this.eventData = {};\n        this.queue = [];\n        this.pendingRequest = null;\n    }\n\n    getStorageKey(domain: ?string) {\n        const tokenData = parseAccessToken(config.ACCESS_TOKEN);\n        let u = '';\n        if (tokenData && tokenData['u']) {\n            u = b64EncodeUnicode(tokenData['u']);\n        } else {\n            u = config.ACCESS_TOKEN || '';\n        }\n        return domain ?\n            `${telemEventKey}.${domain}:${u}` :\n            `${telemEventKey}:${u}`;\n    }\n\n    fetchEventData() {\n        const isLocalStorageAvailable = storageAvailable('localStorage');\n        const storageKey = this.getStorageKey();\n        const uuidKey = this.getStorageKey('uuid');\n\n        if (isLocalStorageAvailable) {\n            //Retrieve cached data\n            try {\n                const data = window.localStorage.getItem(storageKey);\n                if (data) {\n                    this.eventData = JSON.parse(data);\n                }\n\n                const uuid = window.localStorage.getItem(uuidKey);\n                if (uuid) this.anonId = uuid;\n            } catch (e) {\n                warnOnce('Unable to read from LocalStorage');\n            }\n        }\n    }\n\n    saveEventData() {\n        const isLocalStorageAvailable = storageAvailable('localStorage');\n        const storageKey =  this.getStorageKey();\n        const uuidKey = this.getStorageKey('uuid');\n        if (isLocalStorageAvailable) {\n            try {\n                window.localStorage.setItem(uuidKey, this.anonId);\n                if (Object.keys(this.eventData).length >= 1) {\n                    window.localStorage.setItem(storageKey, JSON.stringify(this.eventData));\n                }\n            } catch (e) {\n                warnOnce('Unable to write to LocalStorage');\n            }\n        }\n\n    }\n\n    processRequests(_: ?string) {}\n\n    /*\n    * If any event data should be persisted after the POST request, the callback should modify eventData`\n    * to the values that should be saved. For this reason, the callback should be invoked prior to the call\n    * to TelemetryEvent#saveData\n    */\n    postEvent(timestamp: number, additionalPayload: {[_: string]: any}, callback: (err: ?Error) => void, customAccessToken?: ?string) {\n        if (!config.EVENTS_URL) return;\n        const eventsUrlObject: UrlObject = parseUrl(config.EVENTS_URL);\n        eventsUrlObject.params.push(`access_token=${customAccessToken || config.ACCESS_TOKEN || ''}`);\n\n        const payload: Object = {\n            event: this.type,\n            created: new Date(timestamp).toISOString(),\n            sdkIdentifier: 'mapbox-gl-js',\n            sdkVersion,\n            skuId: SKU_ID,\n            userId: this.anonId\n        };\n\n        const finalPayload = additionalPayload ? extend(payload, additionalPayload) : payload;\n        const request: RequestParameters = {\n            url: formatUrl(eventsUrlObject),\n            headers: {\n                'Content-Type': 'text/plain' //Skip the pre-flight OPTIONS request\n            },\n            body: JSON.stringify([finalPayload])\n        };\n\n        this.pendingRequest = postData(request, (error) => {\n            this.pendingRequest = null;\n            callback(error);\n            this.saveEventData();\n            this.processRequests(customAccessToken);\n        });\n    }\n\n    queueRequest(event: number | {id: number, timestamp: number}, customAccessToken?: ?string) {\n        this.queue.push(event);\n        this.processRequests(customAccessToken);\n    }\n}\n\nexport class MapLoadEvent extends TelemetryEvent {\n    +success: {[_: number]: boolean};\n    skuToken: string;\n\n    constructor() {\n        super('map.load');\n        this.success = {};\n        this.skuToken = '';\n    }\n\n    postMapLoadEvent(tileUrls: Array<string>, mapId: number, skuToken: string, customAccessToken: string) {\n        this.skuToken = skuToken;\n\n        const accessTokenIsSet = !!(customAccessToken || config.ACCESS_TOKEN);\n        const usesMapboxTiles = Array.isArray(tileUrls) && tileUrls.some(url => isMapboxURL(url) || isMapboxHTTPURL(url));\n\n        // Enabled only when Mapbox Access Token is set and a source uses mapbox tiles.\n        if (config.EVENTS_URL && accessTokenIsSet && usesMapboxTiles) {\n            this.queueRequest({id: mapId, timestamp: Date.now()}, customAccessToken);\n        }\n    }\n\n    processRequests(customAccessToken?: ?string) {\n        if (this.pendingRequest || this.queue.length === 0) return;\n        const {id, timestamp} = this.queue.shift();\n\n        // Only one load event should fire per map\n        if (id && this.success[id]) return;\n\n        if (!this.anonId) {\n            this.fetchEventData();\n        }\n\n        if (!validateUuid(this.anonId)) {\n            this.anonId = uuid();\n        }\n\n        this.postEvent(timestamp, {skuToken: this.skuToken}, (err) => {\n            if (!err) {\n                if (id) this.success[id] = true;\n            }\n        }, customAccessToken);\n    }\n}\n\nexport class TurnstileEvent extends TelemetryEvent {\n    constructor(customAccessToken?: ?string) {\n        super('appUserTurnstile');\n        this._customAccessToken = customAccessToken;\n    }\n\n    postTurnstileEvent(tileUrls: Array<string>, customAccessToken?: ?string) {\n        //Enabled only when Mapbox Access Token is set and a source uses\n        // mapbox tiles.\n        if (config.EVENTS_URL &&\n            config.ACCESS_TOKEN &&\n            Array.isArray(tileUrls) &&\n            tileUrls.some(url => isMapboxURL(url) || isMapboxHTTPURL(url))) {\n            this.queueRequest(Date.now(), customAccessToken);\n        }\n    }\n\n    processRequests(customAccessToken?: ?string) {\n        if (this.pendingRequest || this.queue.length === 0) {\n            return;\n        }\n\n        if (!this.anonId || !this.eventData.lastSuccess || !this.eventData.tokenU) {\n            //Retrieve cached data\n            this.fetchEventData();\n        }\n\n        const tokenData = parseAccessToken(config.ACCESS_TOKEN);\n        const tokenU = tokenData ? tokenData['u'] : config.ACCESS_TOKEN;\n        //Reset event data cache if the access token owner changed.\n        let dueForEvent = tokenU !== this.eventData.tokenU;\n\n        if (!validateUuid(this.anonId)) {\n            this.anonId = uuid();\n            dueForEvent = true;\n        }\n\n        const nextUpdate = this.queue.shift();\n        // Record turnstile event once per calendar day.\n        if (this.eventData.lastSuccess) {\n            const lastUpdate = new Date(this.eventData.lastSuccess);\n            const nextDate = new Date(nextUpdate);\n            const daysElapsed = (nextUpdate - this.eventData.lastSuccess) / (24 * 60 * 60 * 1000);\n            dueForEvent = dueForEvent || daysElapsed >= 1 || daysElapsed < -1 || lastUpdate.getDate() !== nextDate.getDate();\n        } else {\n            dueForEvent = true;\n        }\n\n        if (!dueForEvent) {\n            return this.processRequests();\n        }\n\n        this.postEvent(nextUpdate, {\"enabled.telemetry\": false}, (err) => {\n            if (!err) {\n                this.eventData.lastSuccess = nextUpdate;\n                this.eventData.tokenU = tokenU;\n            }\n        }, customAccessToken);\n    }\n}\n\nconst turnstileEvent_ = new TurnstileEvent();\nexport const postTurnstileEvent = turnstileEvent_.postTurnstileEvent.bind(turnstileEvent_);\n\nconst mapLoadEvent_ = new MapLoadEvent();\nexport const postMapLoadEvent = mapLoadEvent_.postMapLoadEvent.bind(mapLoadEvent_);\n\n/***** END WARNING - REMOVAL OR MODIFICATION OF THE\nPRECEDING CODE VIOLATES THE MAPBOX TERMS OF SERVICE  ******/\n", "// @flow\n\nimport {warnOnce, parseCacheControl} from './util';\nimport window from './window';\n\nimport type Dispatcher from './dispatcher';\n\nconst CACHE_NAME = 'mapbox-tiles';\nlet cacheLimit = 500; // 50MB / (100KB/tile) ~= 500 tiles\nlet cacheCheckThreshold = 50;\n\nconst MIN_TIME_UNTIL_EXPIRY = 1000 * 60 * 7; // 7 minutes. Skip caching tiles with a short enough max age.\n\nexport type ResponseOptions = {\n    status: number,\n    statusText: string,\n    headers: window.Headers\n};\n\n// We're using a global shared cache object. Normally, requesting ad-hoc Cache objects is fine, but\n// Safari has a memory leak in which it fails to release memory when requesting keys() from a Cache\n// object. See https://bugs.webkit.org/show_bug.cgi?id=203991 for more information.\nlet sharedCache: ?Promise<Cache>;\n\nfunction cacheOpen() {\n    if (window.caches && !sharedCache) {\n        sharedCache = window.caches.open(CACHE_NAME);\n    }\n}\n\n// We're never closing the cache, but our unit tests rely on changing out the global window.caches\n// object, so we have a function specifically for unit tests that allows resetting the shared cache.\nexport function cacheClose() {\n    sharedCache = undefined;\n}\n\nlet responseConstructorSupportsReadableStream;\nfunction prepareBody(response: Response, callback) {\n    if (responseConstructorSupportsReadableStream === undefined) {\n        try {\n            new Response(new ReadableStream()); // eslint-disable-line no-undef\n            responseConstructorSupportsReadableStream = true;\n        } catch (e) {\n            // Edge\n            responseConstructorSupportsReadableStream = false;\n        }\n    }\n\n    if (responseConstructorSupportsReadableStream) {\n        callback(response.body);\n    } else {\n        response.blob().then(callback);\n    }\n}\n\nexport function cachePut(request: Request, response: Response, requestTime: number) {\n    cacheOpen();\n    if (!sharedCache) return;\n\n    const options: ResponseOptions = {\n        status: response.status,\n        statusText: response.statusText,\n        headers: new window.Headers()\n    };\n    response.headers.forEach((v, k) => options.headers.set(k, v));\n\n    const cacheControl = parseCacheControl(response.headers.get('Cache-Control') || '');\n    if (cacheControl['no-store']) {\n        return;\n    }\n    if (cacheControl['max-age']) {\n        options.headers.set('Expires', new Date(requestTime + cacheControl['max-age'] * 1000).toUTCString());\n    }\n\n    const timeUntilExpiry = new Date(options.headers.get('Expires')).getTime() - requestTime;\n    if (timeUntilExpiry < MIN_TIME_UNTIL_EXPIRY) return;\n\n    prepareBody(response, body => {\n        const clonedResponse = new window.Response(body, options);\n\n        cacheOpen();\n        if (!sharedCache) return;\n        sharedCache\n            .then(cache => cache.put(stripQueryParameters(request.url), clonedResponse))\n            .catch(e => warnOnce(e.message));\n    });\n}\n\nfunction stripQueryParameters(url: string) {\n    const start = url.indexOf('?');\n    return start < 0 ? url : url.slice(0, start);\n}\n\nexport function cacheGet(request: Request, callback: (error: ?any, response: ?Response, fresh: ?boolean) => void) {\n    cacheOpen();\n    if (!sharedCache) return callback(null);\n\n    const strippedURL = stripQueryParameters(request.url);\n\n    sharedCache\n        .then(cache => {\n            // manually strip URL instead of `ignoreSearch: true` because of a known\n            // performance issue in Chrome https://github.com/mapbox/mapbox-gl-js/issues/8431\n            cache.match(strippedURL)\n                .then(response => {\n                    const fresh = isFresh(response);\n\n                    // Reinsert into cache so that order of keys in the cache is the order of access.\n                    // This line makes the cache a LRU instead of a FIFO cache.\n                    cache.delete(strippedURL);\n                    if (fresh) {\n                        cache.put(strippedURL, response.clone());\n                    }\n\n                    callback(null, response, fresh);\n                })\n                .catch(callback);\n        })\n        .catch(callback);\n\n}\n\nfunction isFresh(response) {\n    if (!response) return false;\n    const expires = new Date(response.headers.get('Expires') || 0);\n    const cacheControl = parseCacheControl(response.headers.get('Cache-Control') || '');\n    return expires > Date.now() && !cacheControl['no-cache'];\n}\n\n// `Infinity` triggers a cache check after the first tile is loaded\n// so that a check is run at least once on each page load.\nlet globalEntryCounter = Infinity;\n\n// The cache check gets run on a worker. The reason for this is that\n// profiling sometimes shows this as taking up significant time on the\n// thread it gets called from. And sometimes it doesn't. It *may* be\n// fine to run this on the main thread but out of caution this is being\n// dispatched on a worker. This can be investigated further in the future.\nexport function cacheEntryPossiblyAdded(dispatcher: Dispatcher) {\n    globalEntryCounter++;\n    if (globalEntryCounter > cacheCheckThreshold) {\n        dispatcher.getActor().send('enforceCacheSizeLimit', cacheLimit);\n        globalEntryCounter = 0;\n    }\n}\n\n// runs on worker, see above comment\nexport function enforceCacheSizeLimit(limit: number) {\n    cacheOpen();\n    if (!sharedCache) return;\n\n    sharedCache\n        .then(cache => {\n            cache.keys().then(keys => {\n                for (let i = 0; i < keys.length - limit; i++) {\n                    cache.delete(keys[i]);\n                }\n            });\n        });\n}\n\nexport function clearTileCache(callback?: (err: ?Error) => void) {\n    const promise = window.caches.delete(CACHE_NAME);\n    if (callback) {\n        promise.catch(callback).then(() => callback());\n    }\n}\n\nexport function setCacheLimits(limit: number, checkThreshold: number) {\n    cacheLimit = limit;\n    cacheCheckThreshold = checkThreshold;\n}\n", "// @flow\nimport window from './window';\n\nlet supportsOffscreenCanvas: ?boolean;\n\nexport default function offscreenCanvasSupported(): boolean {\n    if (supportsOffscreenCanvas == null) {\n        supportsOffscreenCanvas = window.OffscreenCanvas &&\n            new window.OffscreenCanvas(1, 1).getContext('2d') &&\n            typeof window.createImageBitmap === 'function';\n    }\n\n    return supportsOffscreenCanvas;\n}\n", "// @flow\n\nimport window from './window';\nimport {extend, warnOnce, isWorker} from './util';\nimport {isMapboxHTTPURL, hasCacheDefeatingSku} from './mapbox';\nimport config from './config';\nimport assert from 'assert';\nimport {cacheGet, cachePut} from './tile_request_cache';\nimport webpSupported from './webp_supported';\nimport offscreenCanvasSupported from './offscreen_canvas_supported';\n\nimport type {Callback} from '../types/callback';\nimport type {Cancelable} from '../types/cancelable';\n\n/**\n * The type of a resource.\n * @private\n * @readonly\n * @enum {string}\n */\nconst ResourceType = {\n    Unknown: 'Unknown',\n    Style: 'Style',\n    Source: 'Source',\n    Tile: 'Tile',\n    Glyphs: 'Glyphs',\n    SpriteImage: 'SpriteImage',\n    SpriteJSON: 'SpriteJSON',\n    Image: 'Image'\n};\nexport {ResourceType};\n\nif (typeof Object.freeze == 'function') {\n    Object.freeze(ResourceType);\n}\n\n/**\n * A `RequestParameters` object to be returned from Map.options.transformRequest callbacks.\n * @typedef {Object} RequestParameters\n * @property {string} url The URL to be requested.\n * @property {Object} headers The headers to be sent with the request.\n * @property {string} method Request method `'GET' | 'POST' | 'PUT'`.\n * @property {string} body Request body.\n * @property {string} type Response body type to be returned `'string' | 'json' | 'arrayBuffer'`.\n * @property {string} credentials `'same-origin'|'include'` Use 'include' to send cookies with cross-origin requests.\n * @property {boolean} collectResourceTiming If true, Resource Timing API information will be collected for these transformed requests and returned in a resourceTiming property of relevant data events.\n * @example\n * // use transformRequest to modify requests that begin with `http://myHost`\n * transformRequest: function(url, resourceType) {\n *  if (resourceType === 'Source' && url.indexOf('http://myHost') > -1) {\n *    return {\n *      url: url.replace('http', 'https'),\n *      headers: { 'my-custom-header': true },\n *      credentials: 'include'  // Include cookies for cross-origin requests\n *    }\n *   }\n *  }\n *\n */\nexport type RequestParameters = {\n    url: string,\n    headers?: Object,\n    method?: 'GET' | 'POST' | 'PUT',\n    body?: string,\n    type?: 'string' | 'json' | 'arrayBuffer',\n    credentials?: 'same-origin' | 'include',\n    collectResourceTiming?: boolean\n};\n\nexport type ResponseCallback<T> = (error: ?Error, data: ?T, cacheControl: ?string, expires: ?string) => void;\n\nclass AJAXError extends Error {\n    status: number;\n    url: string;\n    constructor(message: string, status: number, url: string) {\n        if (status === 401 && isMapboxHTTPURL(url)) {\n            message += ': you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes';\n        }\n        super(message);\n        this.status = status;\n        this.url = url;\n\n        // work around for https://github.com/Rich-Harris/buble/issues/40\n        this.name = this.constructor.name;\n        this.message = message;\n    }\n\n    toString() {\n        return `${this.name}: ${this.message} (${this.status}): ${this.url}`;\n    }\n}\n\n// Ensure that we're sending the correct referrer from blob URL worker bundles.\n// For files loaded from the local file system, `location.origin` will be set\n// to the string(!) \"null\" (Firefox), or \"file://\" (Chrome, Safari, Edge, IE),\n// and we will set an empty referrer. Otherwise, we're using the document's URL.\n/* global self */\nexport const getReferrer = isWorker() ?\n    () => self.worker && self.worker.referrer :\n    () => (window.location.protocol === 'blob:' ? window.parent : window).location.href;\n\n// Determines whether a URL is a file:// URL. This is obviously the case if it begins\n// with file://. Relative URLs are also file:// URLs iff the original document was loaded\n// via a file:// URL.\nconst isFileURL = url => /^file:/.test(url) || (/^file:/.test(getReferrer()) && !/^\\w+:/.test(url));\n\nfunction makeFetchRequest(requestParameters: RequestParameters, callback: ResponseCallback<any>): Cancelable {\n    const controller = new window.AbortController();\n    const request = new window.Request(requestParameters.url, {\n        method: requestParameters.method || 'GET',\n        body: requestParameters.body,\n        credentials: requestParameters.credentials,\n        headers: requestParameters.headers,\n        referrer: getReferrer(),\n        signal: controller.signal\n    });\n    let complete = false;\n    let aborted = false;\n\n    const cacheIgnoringSearch = hasCacheDefeatingSku(request.url);\n\n    if (requestParameters.type === 'json') {\n        request.headers.set('Accept', 'application/json');\n    }\n\n    const validateOrFetch = (err, cachedResponse, responseIsFresh) => {\n        if (aborted) return;\n\n        if (err) {\n            // Do fetch in case of cache error.\n            // HTTP pages in Edge trigger a security error that can be ignored.\n            if (err.message !== 'SecurityError') {\n                warnOnce(err);\n            }\n        }\n\n        if (cachedResponse && responseIsFresh) {\n            return finishRequest(cachedResponse);\n        }\n\n        if (cachedResponse) {\n            // We can't do revalidation with 'If-None-Match' because then the\n            // request doesn't have simple cors headers.\n        }\n\n        const requestTime = Date.now();\n\n        window.fetch(request).then(response => {\n            if (response.ok) {\n                const cacheableResponse = cacheIgnoringSearch ? response.clone() : null;\n                return finishRequest(response, cacheableResponse, requestTime);\n\n            } else {\n                return callback(new AJAXError(response.statusText, response.status, requestParameters.url));\n            }\n        }).catch(error => {\n            if (error.code === 20) {\n                // silence expected AbortError\n                return;\n            }\n            callback(new Error(error.message));\n        });\n    };\n\n    const finishRequest = (response, cacheableResponse, requestTime) => {\n        (\n            requestParameters.type === 'arrayBuffer' ? response.arrayBuffer() :\n            requestParameters.type === 'json' ? response.json() :\n            response.text()\n        ).then(result => {\n            if (aborted) return;\n            if (cacheableResponse && requestTime) {\n                // The response needs to be inserted into the cache after it has completely loaded.\n                // Until it is fully loaded there is a chance it will be aborted. Aborting while\n                // reading the body can cause the cache insertion to error. We could catch this error\n                // in most browsers but in Firefox it seems to sometimes crash the tab. Adding\n                // it to the cache here avoids that error.\n                cachePut(request, cacheableResponse, requestTime);\n            }\n            complete = true;\n            callback(null, result, response.headers.get('Cache-Control'), response.headers.get('Expires'));\n        }).catch(err => {\n            if (!aborted) callback(new Error(err.message));\n        });\n    };\n\n    if (cacheIgnoringSearch) {\n        cacheGet(request, validateOrFetch);\n    } else {\n        validateOrFetch(null, null);\n    }\n\n    return {cancel: () => {\n        aborted = true;\n        if (!complete) controller.abort();\n    }};\n}\n\nfunction makeXMLHttpRequest(requestParameters: RequestParameters, callback: ResponseCallback<any>): Cancelable {\n    const xhr: XMLHttpRequest = new window.XMLHttpRequest();\n\n    xhr.open(requestParameters.method || 'GET', requestParameters.url, true);\n    if (requestParameters.type === 'arrayBuffer') {\n        xhr.responseType = 'arraybuffer';\n    }\n    for (const k in requestParameters.headers) {\n        xhr.setRequestHeader(k, requestParameters.headers[k]);\n    }\n    if (requestParameters.type === 'json') {\n        xhr.responseType = 'text';\n        xhr.setRequestHeader('Accept', 'application/json');\n    }\n    xhr.withCredentials = requestParameters.credentials === 'include';\n    xhr.onerror = () => {\n        callback(new Error(xhr.statusText));\n    };\n    xhr.onload = () => {\n        if (((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) && xhr.response !== null) {\n            let data: mixed = xhr.response;\n            if (requestParameters.type === 'json') {\n                // We're manually parsing JSON here to get better error messages.\n                try {\n                    data = JSON.parse(xhr.response);\n                } catch (err) {\n                    return callback(err);\n                }\n            }\n            callback(null, data, xhr.getResponseHeader('Cache-Control'), xhr.getResponseHeader('Expires'));\n        } else {\n            callback(new AJAXError(xhr.statusText, xhr.status, requestParameters.url));\n        }\n    };\n    xhr.send(requestParameters.body);\n    return {cancel: () => xhr.abort()};\n}\n\nexport const makeRequest = function(requestParameters: RequestParameters, callback: ResponseCallback<any>): Cancelable {\n    // We're trying to use the Fetch API if possible. However, in some situations we can't use it:\n    // - IE11 doesn't support it at all. In this case, we dispatch the request to the main thread so\n    //   that we can get an accruate referrer header.\n    // - Safari exposes window.AbortController, but it doesn't work actually abort any requests in\n    //   some versions (see https://bugs.webkit.org/show_bug.cgi?id=174980#c2)\n    // - Requests for resources with the file:// URI scheme don't work with the Fetch API either. In\n    //   this case we unconditionally use XHR on the current thread since referrers don't matter.\n    if (!isFileURL(requestParameters.url)) {\n        if (window.fetch && window.Request && window.AbortController && window.Request.prototype.hasOwnProperty('signal')) {\n            return makeFetchRequest(requestParameters, callback);\n        }\n        if (isWorker() && self.worker && self.worker.actor) {\n            const queueOnMainThread = true;\n            return self.worker.actor.send('getResource', requestParameters, callback, undefined, queueOnMainThread);\n        }\n    }\n    return makeXMLHttpRequest(requestParameters, callback);\n};\n\nexport const getJSON = function(requestParameters: RequestParameters, callback: ResponseCallback<Object>): Cancelable {\n    return makeRequest(extend(requestParameters, {type: 'json'}), callback);\n};\n\nexport const getArrayBuffer = function(requestParameters: RequestParameters, callback: ResponseCallback<ArrayBuffer>): Cancelable {\n    return makeRequest(extend(requestParameters, {type: 'arrayBuffer'}), callback);\n};\n\nexport const postData = function(requestParameters: RequestParameters, callback: ResponseCallback<string>): Cancelable {\n    return makeRequest(extend(requestParameters, {method: 'POST'}), callback);\n};\n\nfunction sameOrigin(url) {\n    const a: HTMLAnchorElement = window.document.createElement('a');\n    a.href = url;\n    return a.protocol === window.document.location.protocol && a.host === window.document.location.host;\n}\n\nconst transparentPngUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=';\n\nfunction arrayBufferToImage(data: ArrayBuffer, callback: (err: ?Error, image: ?HTMLImageElement) => void, cacheControl: ?string, expires: ?string) {\n    const img: HTMLImageElement = new window.Image();\n    const URL = window.URL;\n    img.onload = () => {\n        callback(null, img);\n        URL.revokeObjectURL(img.src);\n        // prevent image dataURI memory leak in Safari;\n        // but don't free the image immediately because it might be uploaded in the next frame\n        // https://github.com/mapbox/mapbox-gl-js/issues/10226\n        img.onload = null;\n        window.requestAnimationFrame(() => { img.src = transparentPngUrl; });\n    };\n    img.onerror = () => callback(new Error('Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.'));\n    const blob: Blob = new window.Blob([new Uint8Array(data)], {type: 'image/png'});\n    (img: any).cacheControl = cacheControl;\n    (img: any).expires = expires;\n    img.src = data.byteLength ? URL.createObjectURL(blob) : transparentPngUrl;\n}\n\nfunction arrayBufferToImageBitmap(data: ArrayBuffer, callback: (err: ?Error, image: ?ImageBitmap) => void) {\n    const blob: Blob = new window.Blob([new Uint8Array(data)], {type: 'image/png'});\n    window.createImageBitmap(blob).then((imgBitmap) => {\n        callback(null, imgBitmap);\n    }).catch((e) => {\n        callback(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`));\n    });\n}\n\nlet imageQueue, numImageRequests;\nexport const resetImageRequestQueue = () => {\n    imageQueue = [];\n    numImageRequests = 0;\n};\nresetImageRequestQueue();\n\nexport const getImage = function(requestParameters: RequestParameters, callback: Callback<HTMLImageElement | ImageBitmap>): Cancelable {\n    if (webpSupported.supported) {\n        if (!requestParameters.headers) {\n            requestParameters.headers = {};\n        }\n        requestParameters.headers.accept = 'image/webp,*/*';\n    }\n\n    // limit concurrent image loads to help with raster sources performance on big screens\n    if (numImageRequests >= config.MAX_PARALLEL_IMAGE_REQUESTS) {\n        const queued = {\n            requestParameters,\n            callback,\n            cancelled: false,\n            cancel() { this.cancelled = true; }\n        };\n        imageQueue.push(queued);\n        return queued;\n    }\n    numImageRequests++;\n\n    let advanced = false;\n    const advanceImageRequestQueue = () => {\n        if (advanced) return;\n        advanced = true;\n        numImageRequests--;\n        assert(numImageRequests >= 0);\n        while (imageQueue.length && numImageRequests < config.MAX_PARALLEL_IMAGE_REQUESTS) { // eslint-disable-line\n            const request = imageQueue.shift();\n            const {requestParameters, callback, cancelled} = request;\n            if (!cancelled) {\n                request.cancel = getImage(requestParameters, callback).cancel;\n            }\n        }\n    };\n\n    // request the image with XHR to work around caching issues\n    // see https://github.com/mapbox/mapbox-gl-js/issues/1470\n    const request = getArrayBuffer(requestParameters, (err: ?Error, data: ?ArrayBuffer, cacheControl: ?string, expires: ?string) => {\n\n        advanceImageRequestQueue();\n\n        if (err) {\n            callback(err);\n        } else if (data) {\n            if (offscreenCanvasSupported()) {\n                arrayBufferToImageBitmap(data, callback);\n            } else {\n                arrayBufferToImage(data, callback, cacheControl, expires);\n            }\n        }\n    });\n\n    return {\n        cancel: () => {\n            request.cancel();\n            advanceImageRequestQueue();\n        }\n    };\n};\n\nexport const getVideo = function(urls: Array<string>, callback: Callback<HTMLVideoElement>): Cancelable {\n    const video: HTMLVideoElement = window.document.createElement('video');\n    video.muted = true;\n    video.onloadstart = function() {\n        callback(null, video);\n    };\n    for (let i = 0; i < urls.length; i++) {\n        const s: HTMLSourceElement = window.document.createElement('source');\n        if (!sameOrigin(urls[i])) {\n            video.crossOrigin = 'Anonymous';\n        }\n        s.src = urls[i];\n        video.appendChild(s);\n    }\n    return {cancel: () => {}};\n};\n", "// @flow\n\nimport {extend} from './util';\n\ntype Listener = (Object) => any;\ntype Listeners = {[_: string]: Array<Listener> };\n\nfunction _addEventListener(type: string, listener: Listener, listenerList: Listeners) {\n    const listenerExists = listenerList[type] && listenerList[type].indexOf(listener) !== -1;\n    if (!listenerExists) {\n        listenerList[type] = listenerList[type] || [];\n        listenerList[type].push(listener);\n    }\n}\n\nfunction _removeEventListener(type: string, listener: Listener, listenerList: Listeners) {\n    if (listenerList && listenerList[type]) {\n        const index = listenerList[type].indexOf(listener);\n        if (index !== -1) {\n            listenerList[type].splice(index, 1);\n        }\n    }\n}\n\nexport class Event {\n    +type: string;\n\n    constructor(type: string, data: Object = {}) {\n        extend(this, data);\n        this.type = type;\n    }\n}\n\ninterface ErrorLike {\n    message: string;\n}\n\nexport class ErrorEvent extends Event {\n    error: ErrorLike;\n\n    constructor(error: ErrorLike, data: Object = {}) {\n        super('error', extend({error}, data));\n    }\n}\n\n/**\n * Methods mixed in to other classes for event capabilities.\n *\n * @mixin Evented\n */\nexport class Evented {\n    _listeners: Listeners;\n    _oneTimeListeners: Listeners;\n    _eventedParent: ?Evented;\n    _eventedParentData: ?(Object | () => Object);\n\n    /**\n     * Adds a listener to a specified event type.\n     *\n     * @param {string} type The event type to add a listen for.\n     * @param {Function} listener The function to be called when the event is fired.\n     *   The listener function is called with the data object passed to `fire`,\n     *   extended with `target` and `type` properties.\n     * @returns {Object} `this`\n     */\n    on(type: *, listener: Listener): this {\n        this._listeners = this._listeners || {};\n        _addEventListener(type, listener, this._listeners);\n\n        return this;\n    }\n\n    /**\n     * Removes a previously registered event listener.\n     *\n     * @param {string} type The event type to remove listeners for.\n     * @param {Function} listener The listener function to remove.\n     * @returns {Object} `this`\n     */\n    off(type: *, listener: Listener) {\n        _removeEventListener(type, listener, this._listeners);\n        _removeEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    /**\n     * Adds a listener that will be called only once to a specified event type.\n     *\n     * The listener will be called first time the event fires after the listener is registered.\n     *\n     * @param {string} type The event type to listen for.\n     * @param {Function} listener The function to be called when the event is fired the first time.\n     * @returns {Object} `this`\n     */\n    once(type: *, listener: Listener) {\n        this._oneTimeListeners = this._oneTimeListeners || {};\n        _addEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    fire(event: Event, properties?: Object) {\n        // Compatibility with (type: string, properties: Object) signature from previous versions.\n        // See https://github.com/mapbox/mapbox-gl-js/issues/6522,\n        //     https://github.com/mapbox/mapbox-gl-draw/issues/766\n        if (typeof event === 'string') {\n            event = new Event(event, properties || {});\n        }\n\n        const type = event.type;\n\n        if (this.listens(type)) {\n            (event: any).target = this;\n\n            // make sure adding or removing listeners inside other listeners won't cause an infinite loop\n            const listeners = this._listeners && this._listeners[type] ? this._listeners[type].slice() : [];\n            for (const listener of listeners) {\n                listener.call(this, event);\n            }\n\n            const oneTimeListeners = this._oneTimeListeners && this._oneTimeListeners[type] ? this._oneTimeListeners[type].slice() : [];\n            for (const listener of oneTimeListeners) {\n                _removeEventListener(type, listener, this._oneTimeListeners);\n                listener.call(this, event);\n            }\n\n            const parent = this._eventedParent;\n            if (parent) {\n                extend(\n                    event,\n                    typeof this._eventedParentData === 'function' ? this._eventedParentData() : this._eventedParentData\n                );\n                parent.fire(event);\n            }\n\n        // To ensure that no error events are dropped, print them to the\n        // console if they have no listeners.\n        } else if (event instanceof ErrorEvent) {\n            console.error(event.error);\n        }\n\n        return this;\n    }\n\n    /**\n     * Returns a true if this instance of Evented or any forwardeed instances of Evented have a listener for the specified type.\n     *\n     * @param {string} type The event type\n     * @returns {boolean} `true` if there is at least one registered listener for specified event type, `false` otherwise\n     * @private\n     */\n    listens(type: string) {\n        return (\n            (this._listeners && this._listeners[type] && this._listeners[type].length > 0) ||\n            (this._oneTimeListeners && this._oneTimeListeners[type] && this._oneTimeListeners[type].length > 0) ||\n            (this._eventedParent && this._eventedParent.listens(type))\n        );\n    }\n\n    /**\n     * Bubble all events fired by this instance of Evented to this parent instance of Evented.\n     *\n     * @private\n     * @returns {Object} `this`\n     * @private\n     */\n    setEventedParent(parent: ?Evented, data?: Object | () => Object) {\n        this._eventedParent = parent;\n        this._eventedParentData = data;\n\n        return this;\n    }\n}\n", "// @flow\n\n// Note: Do not inherit from Error. It breaks when transpiling to ES5.\n\nexport default class ValidationError {\n    message: string;\n    identifier: ?string;\n    line: ?number;\n\n    constructor(key: ?string, value: ?{ __line__: number }, message: string, identifier: ?string) {\n        this.message = (key ? `${key}: ` : '') + message;\n        if (identifier) this.identifier = identifier;\n\n        if (value !== null && value !== undefined && value.__line__) {\n            this.line = value.__line__;\n        }\n    }\n}\n", "\nimport ValidationError from '../error/validation_error';\n\nexport default function validateConstants(options) {\n    const key = options.key;\n    const constants = options.value;\n\n    if (constants) {\n        return [new ValidationError(key, constants, 'constants have been deprecated as of v8')];\n    } else {\n        return [];\n    }\n}\n", "// @flow\n\nexport default function (output: any, ...inputs: Array<any>) {\n    for (const input of inputs) {\n        for (const k in input) {\n            output[k] = input[k];\n        }\n    }\n    return output;\n}\n", "// @flow\n\n// Turn jsonlint-lines-primitives objects into primitive objects\nexport function unbundle(value: mixed) {\n    if (value instanceof Number || value instanceof String || value instanceof Boolean) {\n        return value.valueOf();\n    } else {\n        return value;\n    }\n}\n\nexport function deepUnbundle(value: mixed): mixed {\n    if (Array.isArray(value)) {\n        return value.map(deepUnbundle);\n    } else if (value instanceof Object && !(value instanceof Number || value instanceof String || value instanceof Boolean)) {\n        const unbundledValue: { [key: string]: mixed } = {};\n        for (const key in value) {\n            unbundledValue[key] = deepUnbundle(value[key]);\n        }\n        return unbundledValue;\n    }\n\n    return unbundle(value);\n}\n", "// @flow\n\nclass ParsingError extends Error {\n    key: string;\n    message: string;\n    constructor(key: string, message: string) {\n        super(message);\n        this.message = message;\n        this.key = key;\n    }\n}\n\nexport default ParsingError;\n", "// @flow\n\nimport type {Expression} from './expression';\n\n/**\n * Tracks `let` bindings during expression parsing.\n * @private\n */\nclass Scope {\n    parent: ?Scope;\n    bindings: {[_: string]: Expression};\n    constructor(parent?: Scope, bindings: Array<[string, Expression]> = []) {\n        this.parent = parent;\n        this.bindings = {};\n        for (const [name, expression] of bindings) {\n            this.bindings[name] = expression;\n        }\n    }\n\n    concat(bindings: Array<[string, Expression]>) {\n        return new Scope(this, bindings);\n    }\n\n    get(name: string): Expression {\n        if (this.bindings[name]) { return this.bindings[name]; }\n        if (this.parent) { return this.parent.get(name); }\n        throw new Error(`${name} not found in scope.`);\n    }\n\n    has(name: string): boolean {\n        if (this.bindings[name]) return true;\n        return this.parent ? this.parent.has(name) : false;\n    }\n}\n\nexport default Scope;\n", "// @flow\n\nexport type NullTypeT = { kind: 'null' };\nexport type NumberTypeT = { kind: 'number' };\nexport type StringTypeT = { kind: 'string' };\nexport type BooleanTypeT = { kind: 'boolean' };\nexport type ColorTypeT = { kind: 'color' };\nexport type ObjectTypeT = { kind: 'object' };\nexport type ValueTypeT = { kind: 'value' };\nexport type ErrorTypeT = { kind: 'error' };\nexport type CollatorTypeT = { kind: 'collator' };\nexport type FormattedTypeT = { kind: 'formatted' };\nexport type ResolvedImageTypeT = { kind: 'resolvedImage' };\n\nexport type EvaluationKind = 'constant' | 'source' | 'camera' | 'composite';\n\nexport type Type =\n    NullTypeT |\n    NumberTypeT |\n    StringTypeT |\n    BooleanTypeT |\n    ColorTypeT |\n    ObjectTypeT |\n    ValueTypeT |\n    ArrayType | // eslint-disable-line no-use-before-define\n    ErrorTypeT |\n    CollatorTypeT |\n    FormattedTypeT |\n    ResolvedImageTypeT\n\nexport type ArrayType = {\n    kind: 'array',\n    itemType: Type,\n    N: ?number\n}\n\nexport type NativeType = 'number' | 'string' | 'boolean' | 'null' | 'array' | 'object'\n\nexport const NullType = {kind: 'null'};\nexport const NumberType = {kind: 'number'};\nexport const StringType = {kind: 'string'};\nexport const BooleanType = {kind: 'boolean'};\nexport const ColorType = {kind: 'color'};\nexport const ObjectType = {kind: 'object'};\nexport const ValueType = {kind: 'value'};\nexport const ErrorType = {kind: 'error'};\nexport const CollatorType = {kind: 'collator'};\nexport const FormattedType = {kind: 'formatted'};\nexport const ResolvedImageType = {kind: 'resolvedImage'};\n\nexport function array(itemType: Type, N: ?number): ArrayType {\n    return {\n        kind: 'array',\n        itemType,\n        N\n    };\n}\n\nexport function toString(type: Type): string {\n    if (type.kind === 'array') {\n        const itemType = toString(type.itemType);\n        return typeof type.N === 'number' ?\n            `array<${itemType}, ${type.N}>` :\n            type.itemType.kind === 'value' ? 'array' : `array<${itemType}>`;\n    } else {\n        return type.kind;\n    }\n}\n\nconst valueMemberTypes = [\n    NullType,\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    FormattedType,\n    ObjectType,\n    array(ValueType),\n    ResolvedImageType\n];\n\n/**\n * Returns null if `t` is a subtype of `expected`; otherwise returns an\n * error message.\n * @private\n */\nexport function checkSubtype(expected: Type, t: Type): ?string {\n    if (t.kind === 'error') {\n        // Error is a subtype of every type\n        return null;\n    } else if (expected.kind === 'array') {\n        if (t.kind === 'array' &&\n            ((t.N === 0 && t.itemType.kind === 'value') || !checkSubtype(expected.itemType, t.itemType)) &&\n            (typeof expected.N !== 'number' || expected.N === t.N)) {\n            return null;\n        }\n    } else if (expected.kind === t.kind) {\n        return null;\n    } else if (expected.kind === 'value') {\n        for (const memberType of valueMemberTypes) {\n            if (!checkSubtype(memberType, t)) {\n                return null;\n            }\n        }\n    }\n\n    return `Expected ${toString(expected)} but found ${toString(t)} instead.`;\n}\n\nexport function isValidType(provided: Type, allowedTypes: Array<Type>): boolean {\n    return allowedTypes.some(t => t.kind === provided.kind);\n}\n\nexport function isValidNativeType(provided: any, allowedTypes: Array<NativeType>): boolean {\n    return allowedTypes.some(t => {\n        if (t === 'null') {\n            return provided === null;\n        } else if (t === 'array') {\n            return Array.isArray(provided);\n        } else if (t === 'object') {\n            return provided && !Array.isArray(provided) && typeof provided === 'object';\n        } else {\n            return t === typeof provided;\n        }\n    });\n}\n", "// (c) Dean McNamee <dean@gmail.com>, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n  \"transparent\": [0,0,0,0], \"aliceblue\": [240,248,255,1],\n  \"antiquewhite\": [250,235,215,1], \"aqua\": [0,255,255,1],\n  \"aquamarine\": [127,255,212,1], \"azure\": [240,255,255,1],\n  \"beige\": [245,245,220,1], \"bisque\": [255,228,196,1],\n  \"black\": [0,0,0,1], \"blanchedalmond\": [255,235,205,1],\n  \"blue\": [0,0,255,1], \"blueviolet\": [138,43,226,1],\n  \"brown\": [165,42,42,1], \"burlywood\": [222,184,135,1],\n  \"cadetblue\": [95,158,160,1], \"chartreuse\": [127,255,0,1],\n  \"chocolate\": [210,105,30,1], \"coral\": [255,127,80,1],\n  \"cornflowerblue\": [100,149,237,1], \"cornsilk\": [255,248,220,1],\n  \"crimson\": [220,20,60,1], \"cyan\": [0,255,255,1],\n  \"darkblue\": [0,0,139,1], \"darkcyan\": [0,139,139,1],\n  \"darkgoldenrod\": [184,134,11,1], \"darkgray\": [169,169,169,1],\n  \"darkgreen\": [0,100,0,1], \"darkgrey\": [169,169,169,1],\n  \"darkkhaki\": [189,183,107,1], \"darkmagenta\": [139,0,139,1],\n  \"darkolivegreen\": [85,107,47,1], \"darkorange\": [255,140,0,1],\n  \"darkorchid\": [153,50,204,1], \"darkred\": [139,0,0,1],\n  \"darksalmon\": [233,150,122,1], \"darkseagreen\": [143,188,143,1],\n  \"darkslateblue\": [72,61,139,1], \"darkslategray\": [47,79,79,1],\n  \"darkslategrey\": [47,79,79,1], \"darkturquoise\": [0,206,209,1],\n  \"darkviolet\": [148,0,211,1], \"deeppink\": [255,20,147,1],\n  \"deepskyblue\": [0,191,255,1], \"dimgray\": [105,105,105,1],\n  \"dimgrey\": [105,105,105,1], \"dodgerblue\": [30,144,255,1],\n  \"firebrick\": [178,34,34,1], \"floralwhite\": [255,250,240,1],\n  \"forestgreen\": [34,139,34,1], \"fuchsia\": [255,0,255,1],\n  \"gainsboro\": [220,220,220,1], \"ghostwhite\": [248,248,255,1],\n  \"gold\": [255,215,0,1], \"goldenrod\": [218,165,32,1],\n  \"gray\": [128,128,128,1], \"green\": [0,128,0,1],\n  \"greenyellow\": [173,255,47,1], \"grey\": [128,128,128,1],\n  \"honeydew\": [240,255,240,1], \"hotpink\": [255,105,180,1],\n  \"indianred\": [205,92,92,1], \"indigo\": [75,0,130,1],\n  \"ivory\": [255,255,240,1], \"khaki\": [240,230,140,1],\n  \"lavender\": [230,230,250,1], \"lavenderblush\": [255,240,245,1],\n  \"lawngreen\": [124,252,0,1], \"lemonchiffon\": [255,250,205,1],\n  \"lightblue\": [173,216,230,1], \"lightcoral\": [240,128,128,1],\n  \"lightcyan\": [224,255,255,1], \"lightgoldenrodyellow\": [250,250,210,1],\n  \"lightgray\": [211,211,211,1], \"lightgreen\": [144,238,144,1],\n  \"lightgrey\": [211,211,211,1], \"lightpink\": [255,182,193,1],\n  \"lightsalmon\": [255,160,122,1], \"lightseagreen\": [32,178,170,1],\n  \"lightskyblue\": [135,206,250,1], \"lightslategray\": [119,136,153,1],\n  \"lightslategrey\": [119,136,153,1], \"lightsteelblue\": [176,196,222,1],\n  \"lightyellow\": [255,255,224,1], \"lime\": [0,255,0,1],\n  \"limegreen\": [50,205,50,1], \"linen\": [250,240,230,1],\n  \"magenta\": [255,0,255,1], \"maroon\": [128,0,0,1],\n  \"mediumaquamarine\": [102,205,170,1], \"mediumblue\": [0,0,205,1],\n  \"mediumorchid\": [186,85,211,1], \"mediumpurple\": [147,112,219,1],\n  \"mediumseagreen\": [60,179,113,1], \"mediumslateblue\": [123,104,238,1],\n  \"mediumspringgreen\": [0,250,154,1], \"mediumturquoise\": [72,209,204,1],\n  \"mediumvioletred\": [199,21,133,1], \"midnightblue\": [25,25,112,1],\n  \"mintcream\": [245,255,250,1], \"mistyrose\": [255,228,225,1],\n  \"moccasin\": [255,228,181,1], \"navajowhite\": [255,222,173,1],\n  \"navy\": [0,0,128,1], \"oldlace\": [253,245,230,1],\n  \"olive\": [128,128,0,1], \"olivedrab\": [107,142,35,1],\n  \"orange\": [255,165,0,1], \"orangered\": [255,69,0,1],\n  \"orchid\": [218,112,214,1], \"palegoldenrod\": [238,232,170,1],\n  \"palegreen\": [152,251,152,1], \"paleturquoise\": [175,238,238,1],\n  \"palevioletred\": [219,112,147,1], \"papayawhip\": [255,239,213,1],\n  \"peachpuff\": [255,218,185,1], \"peru\": [205,133,63,1],\n  \"pink\": [255,192,203,1], \"plum\": [221,160,221,1],\n  \"powderblue\": [176,224,230,1], \"purple\": [128,0,128,1],\n  \"rebeccapurple\": [102,51,153,1],\n  \"red\": [255,0,0,1], \"rosybrown\": [188,143,143,1],\n  \"royalblue\": [65,105,225,1], \"saddlebrown\": [139,69,19,1],\n  \"salmon\": [250,128,114,1], \"sandybrown\": [244,164,96,1],\n  \"seagreen\": [46,139,87,1], \"seashell\": [255,245,238,1],\n  \"sienna\": [160,82,45,1], \"silver\": [192,192,192,1],\n  \"skyblue\": [135,206,235,1], \"slateblue\": [106,90,205,1],\n  \"slategray\": [112,128,144,1], \"slategrey\": [112,128,144,1],\n  \"snow\": [255,250,250,1], \"springgreen\": [0,255,127,1],\n  \"steelblue\": [70,130,180,1], \"tan\": [210,180,140,1],\n  \"teal\": [0,128,128,1], \"thistle\": [216,191,216,1],\n  \"tomato\": [255,99,71,1], \"turquoise\": [64,224,208,1],\n  \"violet\": [238,130,238,1], \"wheat\": [245,222,179,1],\n  \"white\": [255,255,255,1], \"whitesmoke\": [245,245,245,1],\n  \"yellow\": [255,255,0,1], \"yellowgreen\": [154,205,50,1]}\n\nfunction clamp_css_byte(i) {  // Clamp to integer 0 .. 255.\n  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parse_css_int(str) {  // int or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_byte(parseFloat(str) / 100 * 255);\n  return clamp_css_byte(parseInt(str));\n}\n\nfunction parse_css_float(str) {  // float or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_float(parseFloat(str) / 100);\n  return clamp_css_float(parseFloat(str));\n}\n\nfunction css_hue_to_rgb(m1, m2, h) {\n  if (h < 0) h += 1;\n  else if (h > 1) h -= 1;\n\n  if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n  if (h * 2 < 1) return m2;\n  if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n  return m1;\n}\n\nfunction parseCSSColor(css_str) {\n  // Remove all whitespace, not compliant, but should just be more accepting.\n  var str = css_str.replace(/ /g, '').toLowerCase();\n\n  // Color keywords (and transparent) lookup.\n  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.\n\n  // #abc and #abc123 syntax.\n  if (str[0] === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xfff)) return null;  // Covers NaN.\n      return [((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n              (iv & 0xf0) | ((iv & 0xf0) >> 4),\n              (iv & 0xf) | ((iv & 0xf) << 4),\n              1];\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xffffff)) return null;  // Covers NaN.\n      return [(iv & 0xff0000) >> 16,\n              (iv & 0xff00) >> 8,\n              iv & 0xff,\n              1];\n    }\n\n    return null;\n  }\n\n  var op = str.indexOf('('), ep = str.indexOf(')');\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op+1, ep-(op+1)).split(',');\n    var alpha = 1;  // To allow case fallthrough.\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'rgb':\n        if (params.length !== 3) return null;\n        return [parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha];\n      case 'hsla':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'hsl':\n        if (params.length !== 3) return null;\n        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n        // NOTE(deanm): According to the CSS spec s/l should only be\n        // percentages, but we don't bother and let float or percentage.\n        var s = parse_css_float(params[1]);\n        var l = parse_css_float(params[2]);\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        var m1 = l * 2 - m2;\n        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),\n                alpha];\n      default:\n        return null;\n    }\n  }\n\n  return null;\n}\n\ntry { exports.parseCSSColor = parseCSSColor } catch(e) { }\n", "// @flow\n\nimport {parseCSSColor} from 'csscolorparser';\n\n/**\n * An RGBA color value. Create instances from color strings using the static\n * method `Color.parse`. The constructor accepts RGB channel values in the range\n * `[0, 1]`, premultiplied by A.\n *\n * @param {number} r The red channel.\n * @param {number} g The green channel.\n * @param {number} b The blue channel.\n * @param {number} a The alpha channel.\n * @private\n */\nclass Color {\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n\n    constructor(r: number, g: number, b: number, a: number = 1) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    static black: Color;\n    static white: Color;\n    static transparent: Color;\n    static red: Color;\n\n    /**\n     * Parses valid CSS color strings and returns a `Color` instance.\n     * @returns A `Color` instance, or `undefined` if the input is not a valid color string.\n     */\n    static parse(input?: string | Color | null): Color | void {\n        if (!input) {\n            return undefined;\n        }\n\n        if (input instanceof Color) {\n            return input;\n        }\n\n        if (typeof input !== 'string') {\n            return undefined;\n        }\n\n        const rgba = parseCSSColor(input);\n        if (!rgba) {\n            return undefined;\n        }\n\n        return new Color(\n            rgba[0] / 255 * rgba[3],\n            rgba[1] / 255 * rgba[3],\n            rgba[2] / 255 * rgba[3],\n            rgba[3]\n        );\n    }\n\n    /**\n     * Returns an RGBA string representing the color value.\n     *\n     * @returns An RGBA string.\n     * @example\n     * var purple = new Color.parse('purple');\n     * purple.toString; // = \"rgba(128,0,128,1)\"\n     * var translucentGreen = new Color.parse('rgba(26, 207, 26, .73)');\n     * translucentGreen.toString(); // = \"rgba(26,207,26,0.73)\"\n     */\n    toString(): string {\n        const [r, g, b, a] = this.toArray();\n        return `rgba(${Math.round(r)},${Math.round(g)},${Math.round(b)},${a})`;\n    }\n\n    toArray(): [number, number, number, number] {\n        const {r, g, b, a} = this;\n        return a === 0 ? [0, 0, 0, 0] : [\n            r * 255 / a,\n            g * 255 / a,\n            b * 255 / a,\n            a\n        ];\n    }\n}\n\nColor.black = new Color(0, 0, 0, 1);\nColor.white = new Color(1, 1, 1, 1);\nColor.transparent = new Color(0, 0, 0, 0);\nColor.red = new Color(1, 0, 0, 1);\n\nexport default Color;\n", "// @flow\n\n// Flow type declarations for Intl cribbed from\n// https://github.com/facebook/flow/issues/1270\n\ndeclare var Intl: {\n    Collator: Class<Intl$Collator>\n};\n\ndeclare class Intl$Collator {\n    constructor (\n        locales?: string | string[],\n        options?: CollatorOptions\n    ): Intl$Collator;\n\n    static (\n        locales?: string | string[],\n        options?: CollatorOptions\n    ): Intl$Collator;\n\n    compare (a: string, b: string): number;\n\n    resolvedOptions(): any;\n}\n\ntype CollatorOptions = {\n    localeMatcher?: 'lookup' | 'best fit',\n    usage?: 'sort' | 'search',\n    sensitivity?: 'base' | 'accent' | 'case' | 'variant',\n    ignorePunctuation?: boolean,\n    numeric?: boolean,\n    caseFirst?: 'upper' | 'lower' | 'false'\n}\n\nexport default class Collator {\n    locale: string | null;\n    sensitivity: 'base' | 'accent' | 'case' | 'variant';\n    collator: Intl$Collator;\n\n    constructor(caseSensitive: boolean, diacriticSensitive: boolean, locale: string | null) {\n        if (caseSensitive)\n            this.sensitivity = diacriticSensitive ? 'variant' : 'case';\n        else\n            this.sensitivity = diacriticSensitive ? 'accent' : 'base';\n\n        this.locale = locale;\n        this.collator = new Intl.Collator(this.locale ? this.locale : [],\n            {sensitivity: this.sensitivity, usage: 'search'});\n    }\n\n    compare(lhs: string, rhs: string): number {\n        return this.collator.compare(lhs, rhs);\n    }\n\n    resolvedLocale(): string {\n        // We create a Collator without \"usage: search\" because we don't want\n        // the search options encoded in our result (e.g. \"en-u-co-search\")\n        return new Intl.Collator(this.locale ? this.locale : [])\n            .resolvedOptions().locale;\n    }\n}\n", "// @flow\nimport type Color from '../../util/color';\nimport type ResolvedImage from '../types/resolved_image';\n\nexport class FormattedSection {\n    text: string;\n    image: ResolvedImage | null;\n    scale: number | null;\n    fontStack: string | null;\n    textColor: Color | null;\n\n    constructor(text: string, image: ResolvedImage | null, scale: number | null, fontStack: string | null, textColor: Color | null) {\n        this.text = text;\n        this.image = image;\n        this.scale = scale;\n        this.fontStack = fontStack;\n        this.textColor = textColor;\n    }\n}\n\nexport default class Formatted {\n    sections: Array<FormattedSection>;\n\n    constructor(sections: Array<FormattedSection>) {\n        this.sections = sections;\n    }\n\n    static fromString(unformatted: string): Formatted {\n        return new Formatted([new FormattedSection(unformatted, null, null, null, null)]);\n    }\n\n    isEmpty(): boolean {\n        if (this.sections.length === 0) return true;\n        return !this.sections.some(section => section.text.length !== 0 ||\n                                             (section.image && section.image.name.length !== 0));\n    }\n\n    static factory(text: Formatted | string): Formatted {\n        if (text instanceof Formatted) {\n            return text;\n        } else {\n            return Formatted.fromString(text);\n        }\n    }\n\n    toString(): string {\n        if (this.sections.length === 0) return '';\n        return this.sections.map(section => section.text).join('');\n    }\n\n    serialize(): Array<mixed> {\n        const serialized: Array<mixed> = [\"format\"];\n        for (const section of this.sections) {\n            if (section.image) {\n                serialized.push([\"image\", section.image.name]);\n                continue;\n            }\n            serialized.push(section.text);\n            const options: { [key: string]: mixed } = {};\n            if (section.fontStack) {\n                options[\"text-font\"] = [\"literal\", section.fontStack.split(',')];\n            }\n            if (section.scale) {\n                options[\"font-scale\"] = section.scale;\n            }\n            if (section.textColor) {\n                options[\"text-color\"] = ([\"rgba\"]: Array<mixed>).concat(section.textColor.toArray());\n            }\n            serialized.push(options);\n        }\n        return serialized;\n    }\n}\n", "// @flow\n\nexport type ResolvedImageOptions = {\n    name: string,\n    available: boolean\n};\n\nexport default class ResolvedImage {\n    name: string;\n    available: boolean;\n\n    constructor(options: ResolvedImageOptions) {\n        this.name = options.name;\n        this.available = options.available;\n    }\n\n    toString(): string {\n        return this.name;\n    }\n\n    static fromString(name: string): ResolvedImage | null {\n        if (!name) return null; // treat empty values as no image\n        return new ResolvedImage({name, available: false});\n    }\n\n    serialize(): Array<string> {\n        return [\"image\", this.name];\n    }\n}\n", "// @flow\n\nimport assert from 'assert';\n\nimport Color from '../util/color';\nimport Collator from './types/collator';\nimport Formatted from './types/formatted';\nimport ResolvedImage from './types/resolved_image';\nimport {NullType, NumberType, StringType, BooleanType, ColorType, ObjectType, ValueType, CollatorType, FormattedType, ResolvedImageType, array} from './types';\n\nimport type {Type} from './types';\n\nexport function validateRGBA(r: mixed, g: mixed, b: mixed, a?: mixed): string | null {\n    if (!(\n        typeof r === 'number' && r >= 0 && r <= 255 &&\n        typeof g === 'number' && g >= 0 && g <= 255 &&\n        typeof b === 'number' && b >= 0 && b <= 255\n    )) {\n        const value = typeof a === 'number' ? [r, g, b, a] : [r, g, b];\n        return `Invalid rgba value [${value.join(', ')}]: 'r', 'g', and 'b' must be between 0 and 255.`;\n    }\n\n    if (!(\n        typeof a === 'undefined' || (typeof a === 'number' && a >= 0 && a <= 1)\n    )) {\n        return `Invalid rgba value [${[r, g, b, a].join(', ')}]: 'a' must be between 0 and 1.`;\n    }\n\n    return null;\n}\n\nexport type Value = null | string | boolean | number | Color | Collator | Formatted | ResolvedImage | $ReadOnlyArray<Value> | { +[string]: Value }\n\nexport function isValue(mixed: mixed): boolean {\n    if (mixed === null) {\n        return true;\n    } else if (typeof mixed === 'string') {\n        return true;\n    } else if (typeof mixed === 'boolean') {\n        return true;\n    } else if (typeof mixed === 'number') {\n        return true;\n    } else if (mixed instanceof Color) {\n        return true;\n    } else if (mixed instanceof Collator) {\n        return true;\n    } else if (mixed instanceof Formatted) {\n        return true;\n    } else if (mixed instanceof ResolvedImage) {\n        return true;\n    } else if (Array.isArray(mixed)) {\n        for (const item of mixed) {\n            if (!isValue(item)) {\n                return false;\n            }\n        }\n        return true;\n    } else if (typeof mixed === 'object') {\n        for (const key in mixed) {\n            if (!isValue(mixed[key])) {\n                return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\nexport function typeOf(value: Value): Type {\n    if (value === null) {\n        return NullType;\n    } else if (typeof value === 'string') {\n        return StringType;\n    } else if (typeof value === 'boolean') {\n        return BooleanType;\n    } else if (typeof value === 'number') {\n        return NumberType;\n    } else if (value instanceof Color) {\n        return ColorType;\n    } else if (value instanceof Collator) {\n        return CollatorType;\n    } else if (value instanceof Formatted) {\n        return FormattedType;\n    } else if (value instanceof ResolvedImage) {\n        return ResolvedImageType;\n    } else if (Array.isArray(value)) {\n        const length = value.length;\n        let itemType: Type | typeof undefined;\n\n        for (const item of value) {\n            const t = typeOf(item);\n            if (!itemType) {\n                itemType = t;\n            } else if (itemType === t) {\n                continue;\n            } else {\n                itemType = ValueType;\n                break;\n            }\n        }\n\n        return array(itemType || ValueType, length);\n    } else {\n        assert(typeof value === 'object');\n        return ObjectType;\n    }\n}\n\nexport function toString(value: Value) {\n    const type = typeof value;\n    if (value === null) {\n        return '';\n    } else if (type === 'string' || type === 'number' || type === 'boolean') {\n        return String(value);\n    } else if (value instanceof Color || value instanceof Formatted || value instanceof ResolvedImage) {\n        return value.toString();\n    } else {\n        return JSON.stringify(value);\n    }\n}\n\nexport {Color, Collator};\n", "// @flow\n\nimport assert from 'assert';\nimport {isValue, typeOf, Color} from '../values';\nimport Formatted from '../types/formatted';\n\nimport type {Type} from '../types';\nimport type {Value}  from '../values';\nimport type {Expression} from '../expression';\nimport type ParsingContext from '../parsing_context';\n\nclass Literal implements Expression {\n    type: Type;\n    value: Value;\n\n    constructor(type: Type, value: Value) {\n        this.type = type;\n        this.value = value;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext) {\n        if (args.length !== 2)\n            return context.error(`'literal' expression requires exactly one argument, but found ${args.length - 1} instead.`);\n\n        if (!isValue(args[1]))\n            return context.error(`invalid value`);\n\n        const value = (args[1]: any);\n        let type = typeOf(value);\n\n        // special case: infer the item type if possible for zero-length arrays\n        const expected = context.expectedType;\n        if (\n            type.kind === 'array' &&\n            type.N === 0 &&\n            expected &&\n            expected.kind === 'array' &&\n            (typeof expected.N !== 'number' || expected.N === 0)\n        ) {\n            type = expected;\n        }\n\n        return new Literal(type, value);\n    }\n\n    evaluate() {\n        return this.value;\n    }\n\n    eachChild() {}\n\n    outputDefined() {\n        return true;\n    }\n\n    serialize(): Array<mixed> {\n        if (this.type.kind === 'array' || this.type.kind === 'object') {\n            return [\"literal\", this.value];\n        } else if (this.value instanceof Color) {\n            // Constant-folding can generate Literal expressions that you\n            // couldn't actually generate with a \"literal\" expression,\n            // so we have to implement an equivalent serialization here\n            return [\"rgba\"].concat(this.value.toArray());\n        } else if (this.value instanceof Formatted) {\n            // Same as Color\n            return this.value.serialize();\n        } else {\n            assert(this.value === null ||\n                typeof this.value === 'string' ||\n                typeof this.value === 'number' ||\n                typeof this.value === 'boolean');\n            return (this.value: any);\n        }\n    }\n}\n\nexport default Literal;\n", "// @flow\n\nclass RuntimeError {\n    name: string;\n    message: string;\n\n    constructor(message: string) {\n        this.name = 'ExpressionEvaluationError';\n        this.message = message;\n    }\n\n    toJSON() {\n        return this.message;\n    }\n}\n\nexport default RuntimeError;\n", "// @flow\n\nimport assert from 'assert';\n\nimport {\n    ObjectType,\n    ValueType,\n    StringType,\n    NumberType,\n    BooleanType,\n    checkSubtype,\n    toString,\n    array\n} from '../types';\nimport RuntimeError from '../runtime_error';\nimport {typeOf} from '../values';\n\nimport type {Expression} from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type {Type} from '../types';\n\nconst types = {\n    string: StringType,\n    number: NumberType,\n    boolean: BooleanType,\n    object: ObjectType\n};\n\nclass Assertion implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n\n        let i = 1;\n        let type;\n\n        const name: string = (args[0]: any);\n        if (name === 'array') {\n            let itemType;\n            if (args.length > 2) {\n                const type = args[1];\n                if (typeof type !== 'string' || !(type in types) || type === 'object')\n                    return context.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n                itemType = types[type];\n                i++;\n            } else {\n                itemType = ValueType;\n            }\n\n            let N;\n            if (args.length > 3) {\n                if (args[2] !== null &&\n                    (typeof args[2] !== 'number' ||\n                        args[2] < 0 ||\n                        args[2] !== Math.floor(args[2]))\n                ) {\n                    return context.error('The length argument to \"array\" must be a positive integer literal', 2);\n                }\n                N = args[2];\n                i++;\n            }\n\n            type = array(itemType, N);\n        } else {\n            assert(types[name], name);\n            type = types[name];\n        }\n\n        const parsed = [];\n        for (; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input) return null;\n            parsed.push(input);\n        }\n\n        return new Assertion(type, parsed);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        for (let i = 0; i < this.args.length; i++) {\n            const value = this.args[i].evaluate(ctx);\n            const error = checkSubtype(this.type, typeOf(value));\n            if (!error) {\n                return value;\n            } else if (i === this.args.length - 1) {\n                throw new RuntimeError(`Expected value to be of type ${toString(this.type)}, but found ${toString(typeOf(value))} instead.`);\n            }\n        }\n\n        assert(false);\n        return null;\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    outputDefined(): boolean {\n        return this.args.every(arg => arg.outputDefined());\n    }\n\n    serialize(): Array<mixed> {\n        const type = this.type;\n        const serialized = [type.kind];\n        if (type.kind === 'array') {\n            const itemType = type.itemType;\n            if (itemType.kind === 'string' ||\n                itemType.kind === 'number' ||\n                itemType.kind === 'boolean') {\n                serialized.push(itemType.kind);\n                const N = type.N;\n                if (typeof N === 'number' || this.args.length > 1) {\n                    serialized.push(N);\n                }\n            }\n        }\n        return serialized.concat(this.args.map(arg => arg.serialize()));\n    }\n}\n\nexport default Assertion;\n", "// @flow\n\nimport {NumberType, ValueType, FormattedType, array, StringType, ColorType, ResolvedImageType} from '../types';\nimport Formatted, {FormattedSection} from '../types/formatted';\nimport {toString, typeOf} from '../values';\n\nimport type {Expression} from '../expression';\nimport type EvaluationContext from '../evaluation_context';\nimport type ParsingContext from '../parsing_context';\nimport type {Type} from '../types';\n\ntype FormattedSectionExpression = {\n    // Content of a section may be Image expression or other\n    // type of expression that is coercable to 'string'.\n    content: Expression,\n    scale: Expression | null;\n    font: Expression | null;\n    textColor: Expression | null;\n}\n\nexport default class FormatExpression implements Expression {\n    type: Type;\n    sections: Array<FormattedSectionExpression>;\n\n    constructor(sections: Array<FormattedSectionExpression>) {\n        this.type = FormattedType;\n        this.sections = sections;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2) {\n            return context.error(`Expected at least one argument.`);\n        }\n\n        const firstArg = args[1];\n        if (!Array.isArray(firstArg) && typeof firstArg === 'object')  {\n            return context.error(`First argument must be an image or text section.`);\n        }\n\n        const sections: Array<FormattedSectionExpression> = [];\n        let nextTokenMayBeObject = false;\n        for (let i = 1; i <= args.length - 1; ++i) {\n            const arg = (args[i]: any);\n\n            if (nextTokenMayBeObject && typeof arg === \"object\" && !Array.isArray(arg)) {\n                nextTokenMayBeObject = false;\n\n                let scale = null;\n                if (arg['font-scale']) {\n                    scale = context.parse(arg['font-scale'], 1, NumberType);\n                    if (!scale) return null;\n                }\n\n                let font = null;\n                if (arg['text-font']) {\n                    font = context.parse(arg['text-font'], 1, array(StringType));\n                    if (!font) return null;\n                }\n\n                let textColor = null;\n                if (arg['text-color']) {\n                    textColor = context.parse(arg['text-color'], 1, ColorType);\n                    if (!textColor) return null;\n                }\n\n                const lastExpression = sections[sections.length - 1];\n                lastExpression.scale = scale;\n                lastExpression.font = font;\n                lastExpression.textColor = textColor;\n            } else {\n                const content = context.parse(args[i], 1, ValueType);\n                if (!content) return null;\n\n                const kind = content.type.kind;\n                if (kind !== 'string' && kind !== 'value' && kind !== 'null' && kind !== 'resolvedImage')\n                    return context.error(`Formatted text type must be 'string', 'value', 'image' or 'null'.`);\n\n                nextTokenMayBeObject = true;\n                sections.push({content, scale: null, font: null, textColor: null});\n            }\n        }\n\n        return new FormatExpression(sections);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const evaluateSection = section => {\n            const evaluatedContent = section.content.evaluate(ctx);\n            if (typeOf(evaluatedContent) === ResolvedImageType) {\n                return new FormattedSection('', evaluatedContent, null, null, null);\n            }\n\n            return new FormattedSection(\n                    toString(evaluatedContent),\n                    null,\n                    section.scale ? section.scale.evaluate(ctx) : null,\n                    section.font ? section.font.evaluate(ctx).join(',') : null,\n                    section.textColor ? section.textColor.evaluate(ctx) : null\n            );\n        };\n\n        return new Formatted(this.sections.map(evaluateSection));\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        for (const section of this.sections) {\n            fn(section.content);\n            if (section.scale) {\n                fn(section.scale);\n            }\n            if (section.font) {\n                fn(section.font);\n            }\n            if (section.textColor) {\n                fn(section.textColor);\n            }\n        }\n    }\n\n    outputDefined() {\n        // Technically the combinatoric set of all children\n        // Usually, this.text will be undefined anyway\n        return false;\n    }\n\n    serialize() {\n        const serialized = [\"format\"];\n        for (const section of this.sections) {\n            serialized.push(section.content.serialize());\n            const options = {};\n            if (section.scale) {\n                options['font-scale'] = section.scale.serialize();\n            }\n            if (section.font) {\n                options['text-font'] = section.font.serialize();\n            }\n            if (section.textColor) {\n                options['text-color'] = section.textColor.serialize();\n            }\n            serialized.push(options);\n        }\n        return serialized;\n    }\n}\n", "// @flow\n\nimport {ResolvedImageType, StringType} from '../types';\nimport ResolvedImage from '../types/resolved_image';\n\nimport type {Expression} from '../expression';\nimport type EvaluationContext from '../evaluation_context';\nimport type ParsingContext from '../parsing_context';\nimport type {Type} from '../types';\n\nexport default class ImageExpression implements Expression {\n    type: Type;\n    input: Expression;\n\n    constructor(input: Expression) {\n        this.type = ResolvedImageType;\n        this.input = input;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext): ?Expression {\n        if (args.length !== 2) {\n            return context.error(`Expected two arguments.`);\n        }\n\n        const name = context.parse(args[1], 1, StringType);\n        if (!name) return context.error(`No image name provided.`);\n\n        return new ImageExpression(name);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const evaluatedImageName = this.input.evaluate(ctx);\n\n        const value = ResolvedImage.fromString(evaluatedImageName);\n        if (value && ctx.availableImages) value.available = ctx.availableImages.indexOf(evaluatedImageName) > -1;\n\n        return value;\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        fn(this.input);\n    }\n\n    outputDefined() {\n        // The output of image is determined by the list of available images in the evaluation context\n        return false;\n    }\n\n    serialize() {\n        return [\"image\", this.input.serialize()];\n    }\n}\n", "// @flow\n\nimport assert from 'assert';\n\nimport {BooleanType, ColorType, NumberType, StringType, ValueType} from '../types';\nimport {Color, toString as valueToString, validateRGBA} from '../values';\nimport RuntimeError from '../runtime_error';\nimport Formatted from '../types/formatted';\nimport FormatExpression from '../definitions/format';\nimport ImageExpression from '../definitions/image';\nimport ResolvedImage from '../types/resolved_image';\n\nimport type {Expression} from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type {Type} from '../types';\n\nconst types = {\n    'to-boolean': BooleanType,\n    'to-color': ColorType,\n    'to-number': NumberType,\n    'to-string': StringType\n};\n\n/**\n * Special form for error-coalescing coercion expressions \"to-number\",\n * \"to-color\".  Since these coercions can fail at runtime, they accept multiple\n * arguments, only evaluating one at a time until one succeeds.\n *\n * @private\n */\nclass Coercion implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n\n        const name: string = (args[0]: any);\n        assert(types[name], name);\n\n        if ((name === 'to-boolean' || name === 'to-string') && args.length !== 2)\n            return context.error(`Expected one argument.`);\n\n        const type = types[name];\n\n        const parsed = [];\n        for (let i = 1; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input) return null;\n            parsed.push(input);\n        }\n\n        return new Coercion(type, parsed);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        if (this.type.kind === 'boolean') {\n            return Boolean(this.args[0].evaluate(ctx));\n        } else if (this.type.kind === 'color') {\n            let input;\n            let error;\n            for (const arg of this.args) {\n                input = arg.evaluate(ctx);\n                error = null;\n                if (input instanceof Color) {\n                    return input;\n                } else if (typeof input === 'string') {\n                    const c = ctx.parseColor(input);\n                    if (c) return c;\n                } else if (Array.isArray(input)) {\n                    if (input.length < 3 || input.length > 4) {\n                        error = `Invalid rbga value ${JSON.stringify(input)}: expected an array containing either three or four numeric values.`;\n                    } else {\n                        error = validateRGBA(input[0], input[1], input[2], input[3]);\n                    }\n                    if (!error) {\n                        return new Color((input[0]: any) / 255, (input[1]: any) / 255, (input[2]: any) / 255, (input[3]: any));\n                    }\n                }\n            }\n            throw new RuntimeError(error || `Could not parse color from value '${typeof input === 'string' ? input : String(JSON.stringify(input))}'`);\n        } else if (this.type.kind === 'number') {\n            let value = null;\n            for (const arg of this.args) {\n                value = arg.evaluate(ctx);\n                if (value === null) return 0;\n                const num = Number(value);\n                if (isNaN(num)) continue;\n                return num;\n            }\n            throw new RuntimeError(`Could not convert ${JSON.stringify(value)} to number.`);\n        } else if (this.type.kind === 'formatted') {\n            // There is no explicit 'to-formatted' but this coercion can be implicitly\n            // created by properties that expect the 'formatted' type.\n            return Formatted.fromString(valueToString(this.args[0].evaluate(ctx)));\n        } else if (this.type.kind === 'resolvedImage') {\n            return ResolvedImage.fromString(valueToString(this.args[0].evaluate(ctx)));\n        } else {\n            return valueToString(this.args[0].evaluate(ctx));\n        }\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    outputDefined(): boolean {\n        return this.args.every(arg => arg.outputDefined());\n    }\n\n    serialize() {\n        if (this.type.kind === 'formatted') {\n            return new FormatExpression([{content: this.args[0], scale: null, font: null, textColor: null}]).serialize();\n        }\n\n        if (this.type.kind === 'resolvedImage') {\n            return new ImageExpression(this.args[0]).serialize();\n        }\n\n        const serialized = [`to-${this.type.kind}`];\n        this.eachChild(child => { serialized.push(child.serialize()); });\n        return serialized;\n    }\n}\n\nexport default Coercion;\n", "// @flow\n\nimport {Color} from './values';\nimport type {FormattedSection} from './types/formatted';\nimport type {GlobalProperties, Feature, FeatureState} from './index';\nimport type {CanonicalTileID} from '../../source/tile_id';\n\nconst geometryTypes = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nclass EvaluationContext {\n    globals: GlobalProperties;\n    feature: ?Feature;\n    featureState: ?FeatureState;\n    formattedSection: ?FormattedSection;\n    availableImages: ?Array<string>;\n    canonical: ?CanonicalTileID;\n\n    _parseColorCache: {[_: string]: ?Color};\n\n    constructor() {\n        this.globals = (null: any);\n        this.feature = null;\n        this.featureState = null;\n        this.formattedSection = null;\n        this._parseColorCache = {};\n        this.availableImages = null;\n        this.canonical = null;\n    }\n\n    id() {\n        return this.feature && 'id' in this.feature ? this.feature.id : null;\n    }\n\n    geometryType() {\n        return this.feature ? typeof this.feature.type === 'number' ? geometryTypes[this.feature.type] : this.feature.type : null;\n    }\n\n    geometry() {\n        return this.feature && 'geometry' in this.feature ? this.feature.geometry : null;\n    }\n\n    canonicalID() {\n        return this.canonical;\n    }\n\n    properties() {\n        return this.feature && this.feature.properties || {};\n    }\n\n    parseColor(input: string): ?Color {\n        let cached = this._parseColorCache[input];\n        if (!cached) {\n            cached = this._parseColorCache[input] = Color.parse(input);\n        }\n        return cached;\n    }\n}\n\nexport default EvaluationContext;\n", "// @flow\n\nimport {toString} from './types';\n\nimport ParsingContext from './parsing_context';\nimport EvaluationContext from './evaluation_context';\nimport assert from 'assert';\n\nimport type {Expression, ExpressionRegistry} from './expression';\nimport type {Type} from './types';\nimport type {Value} from './values';\n\nexport type Varargs = {| type: Type |};\ntype Signature = Array<Type> | Varargs;\ntype Evaluate = (EvaluationContext, Array<Expression>) => Value;\ntype Definition = [Type, Signature, Evaluate] |\n    {|type: Type, overloads: Array<[Signature, Evaluate]>|};\n\nclass CompoundExpression implements Expression {\n    name: string;\n    type: Type;\n    _evaluate: Evaluate;\n    args: Array<Expression>;\n\n    static definitions: {[_: string]: Definition };\n\n    constructor(name: string, type: Type, evaluate: Evaluate, args: Array<Expression>) {\n        this.name = name;\n        this.type = type;\n        this._evaluate = evaluate;\n        this.args = args;\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return this._evaluate(ctx, this.args);\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    outputDefined() {\n        return false;\n    }\n\n    serialize(): Array<mixed> {\n        return [this.name].concat(this.args.map(arg => arg.serialize()));\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext): ?Expression {\n        const op: string = (args[0]: any);\n        const definition = CompoundExpression.definitions[op];\n        if (!definition) {\n            return context.error(`Unknown expression \"${op}\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        }\n\n        // Now check argument types against each signature\n        const type = Array.isArray(definition) ?\n            definition[0] : definition.type;\n\n        const availableOverloads = Array.isArray(definition) ?\n            [[definition[1], definition[2]]] :\n            definition.overloads;\n\n        const overloads = availableOverloads.filter(([signature]) => (\n            !Array.isArray(signature) || // varags\n            signature.length === args.length - 1 // correct param count\n        ));\n\n        let signatureContext: ParsingContext = (null: any);\n\n        for (const [params, evaluate] of overloads) {\n            // Use a fresh context for each attempted signature so that, if\n            // we eventually succeed, we haven't polluted `context.errors`.\n            signatureContext = new ParsingContext(context.registry, context.path, null, context.scope);\n\n            // First parse all the args, potentially coercing to the\n            // types expected by this overload.\n            const parsedArgs: Array<Expression> = [];\n            let argParseFailed = false;\n            for (let i = 1; i < args.length; i++) {\n                const arg = args[i];\n                const expectedType = Array.isArray(params) ?\n                    params[i - 1] :\n                    params.type;\n\n                const parsed = signatureContext.parse(arg, 1 + parsedArgs.length, expectedType);\n                if (!parsed) {\n                    argParseFailed = true;\n                    break;\n                }\n                parsedArgs.push(parsed);\n            }\n            if (argParseFailed) {\n                // Couldn't coerce args of this overload to expected type, move\n                // on to next one.\n                continue;\n            }\n\n            if (Array.isArray(params)) {\n                if (params.length !== parsedArgs.length) {\n                    signatureContext.error(`Expected ${params.length} arguments, but found ${parsedArgs.length} instead.`);\n                    continue;\n                }\n            }\n\n            for (let i = 0; i < parsedArgs.length; i++) {\n                const expected = Array.isArray(params) ? params[i] : params.type;\n                const arg = parsedArgs[i];\n                signatureContext.concat(i + 1).checkSubtype(expected, arg.type);\n            }\n\n            if (signatureContext.errors.length === 0) {\n                return new CompoundExpression(op, type, evaluate, parsedArgs);\n            }\n        }\n\n        assert(!signatureContext || signatureContext.errors.length > 0);\n\n        if (overloads.length === 1) {\n            context.errors.push(...signatureContext.errors);\n        } else {\n            const expected = overloads.length ? overloads : availableOverloads;\n            const signatures = expected\n                .map(([params]) => stringifySignature(params))\n                .join(' | ');\n\n            const actualTypes = [];\n            // For error message, re-parse arguments without trying to\n            // apply any coercions\n            for (let i = 1; i < args.length; i++) {\n                const parsed = context.parse(args[i], 1 + actualTypes.length);\n                if (!parsed) return null;\n                actualTypes.push(toString(parsed.type));\n            }\n            context.error(`Expected arguments of type ${signatures}, but found (${actualTypes.join(', ')}) instead.`);\n        }\n\n        return null;\n    }\n\n    static register(\n        registry: ExpressionRegistry,\n        definitions: {[_: string]: Definition }\n    ) {\n        assert(!CompoundExpression.definitions);\n        CompoundExpression.definitions = definitions;\n        for (const name in definitions) {\n            registry[name] = CompoundExpression;\n        }\n    }\n}\n\nfunction stringifySignature(signature: Signature): string {\n    if (Array.isArray(signature)) {\n        return `(${signature.map(toString).join(', ')})`;\n    } else {\n        return `(${toString(signature.type)}...)`;\n    }\n}\n\nexport default CompoundExpression;\n", "// @flow\n\nimport {StringType, BooleanType, CollatorType} from '../types';\nimport Collator from '../types/collator';\n\nimport type {Expression} from '../expression';\nimport type EvaluationContext from '../evaluation_context';\nimport type ParsingContext from '../parsing_context';\nimport type {Type} from '../types';\n\nexport default class CollatorExpression implements Expression {\n    type: Type;\n    caseSensitive: Expression;\n    diacriticSensitive: Expression;\n    locale: Expression | null;\n\n    constructor(caseSensitive: Expression, diacriticSensitive: Expression, locale: Expression | null) {\n        this.type = CollatorType;\n        this.locale = locale;\n        this.caseSensitive = caseSensitive;\n        this.diacriticSensitive = diacriticSensitive;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext): ?Expression {\n        if (args.length !== 2)\n            return context.error(`Expected one argument.`);\n\n        const options = (args[1]: any);\n        if (typeof options !== \"object\" || Array.isArray(options))\n            return context.error(`Collator options argument must be an object.`);\n\n        const caseSensitive = context.parse(\n            options['case-sensitive'] === undefined ? false : options['case-sensitive'], 1, BooleanType);\n        if (!caseSensitive) return null;\n\n        const diacriticSensitive = context.parse(\n            options['diacritic-sensitive'] === undefined ? false : options['diacritic-sensitive'], 1, BooleanType);\n        if (!diacriticSensitive) return null;\n\n        let locale = null;\n        if (options['locale']) {\n            locale = context.parse(options['locale'], 1, StringType);\n            if (!locale) return null;\n        }\n\n        return new CollatorExpression(caseSensitive, diacriticSensitive, locale);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return new Collator(this.caseSensitive.evaluate(ctx), this.diacriticSensitive.evaluate(ctx), this.locale ? this.locale.evaluate(ctx) : null);\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        fn(this.caseSensitive);\n        fn(this.diacriticSensitive);\n        if (this.locale) {\n            fn(this.locale);\n        }\n    }\n\n    outputDefined() {\n        // Technically the set of possible outputs is the combinatoric set of Collators produced\n        // by all possible outputs of locale/caseSensitive/diacriticSensitive\n        // But for the primary use of Collators in comparison operators, we ignore the Collator's\n        // possible outputs anyway, so we can get away with leaving this false for now.\n        return false;\n    }\n\n    serialize() {\n        const options = {};\n        options['case-sensitive'] = this.caseSensitive.serialize();\n        options['diacritic-sensitive'] = this.diacriticSensitive.serialize();\n        if (this.locale) {\n            options['locale'] = this.locale.serialize();\n        }\n        return [\"collator\", options];\n    }\n}\n", "// @flow\n\nimport {isValue} from '../values';\nimport type {Type} from '../types';\nimport {BooleanType} from '../types';\nimport type {Expression} from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type {GeoJSON, GeoJSONPolygon, GeoJSONMultiPolygon} from '@mapbox/geojson-types';\nimport Point from '@mapbox/point-geometry';\nimport type {CanonicalTileID} from '../../../source/tile_id';\n\ntype GeoJSONPolygons =| GeoJSONPolygon | GeoJSONMultiPolygon;\n\n// minX, minY, maxX, maxY\ntype BBox = [number, number, number, number];\nconst EXTENT = 8192;\n\nfunction updateBBox(bbox: BBox, coord: Point) {\n    bbox[0] = Math.min(bbox[0], coord[0]);\n    bbox[1] = Math.min(bbox[1], coord[1]);\n    bbox[2] = Math.max(bbox[2], coord[0]);\n    bbox[3] = Math.max(bbox[3], coord[1]);\n}\n\nfunction mercatorXfromLng(lng: number) {\n    return (180 + lng) / 360;\n}\n\nfunction mercatorYfromLat(lat: number) {\n    return (180 - (180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360)))) / 360;\n}\n\nfunction boxWithinBox(bbox1: BBox, bbox2: BBox) {\n    if (bbox1[0] <= bbox2[0]) return false;\n    if (bbox1[2] >= bbox2[2]) return false;\n    if (bbox1[1] <= bbox2[1]) return false;\n    if (bbox1[3] >= bbox2[3]) return false;\n    return true;\n}\n\nfunction getTileCoordinates(p, canonical: CanonicalTileID) {\n    const x = mercatorXfromLng(p[0]);\n    const y = mercatorYfromLat(p[1]);\n    const tilesAtZoom = Math.pow(2, canonical.z);\n    return [Math.round(x * tilesAtZoom * EXTENT), Math.round(y * tilesAtZoom * EXTENT)];\n}\n\nfunction onBoundary(p, p1, p2) {\n    const x1 = p[0] - p1[0];\n    const y1 = p[1] - p1[1];\n    const x2 = p[0] - p2[0];\n    const y2 = p[1] - p2[1];\n    return (x1 * y2 - x2 * y1 === 0) && (x1 * x2 <= 0) && (y1 * y2 <= 0);\n}\n\nfunction rayIntersect(p, p1, p2) {\n    return ((p1[1] > p[1]) !== (p2[1] > p[1])) && (p[0] < (p2[0] - p1[0]) * (p[1] - p1[1]) / (p2[1] - p1[1]) + p1[0]);\n}\n\n// ray casting algorithm for detecting if point is in polygon\nfunction pointWithinPolygon(point, rings) {\n    let inside = false;\n    for (let i = 0, len = rings.length; i < len; i++) {\n        const ring = rings[i];\n        for (let j = 0, len2 = ring.length; j < len2 - 1; j++) {\n            if (onBoundary(point, ring[j], ring[j + 1])) return false;\n            if (rayIntersect(point, ring[j], ring[j + 1])) inside = !inside;\n        }\n    }\n    return inside;\n}\n\nfunction pointWithinPolygons(point, polygons) {\n    for (let i = 0; i < polygons.length; i++) {\n        if (pointWithinPolygon(point, polygons[i])) return true;\n    }\n    return false;\n}\n\nfunction perp(v1, v2) {\n    return (v1[0] * v2[1] - v1[1] * v2[0]);\n}\n\n// check if p1 and p2 are in different sides of line segment q1->q2\nfunction  twoSided(p1, p2, q1, q2) {\n    // q1->p1 (x1, y1), q1->p2 (x2, y2), q1->q2 (x3, y3)\n    const x1 = p1[0] - q1[0];\n    const y1 = p1[1] - q1[1];\n    const x2 = p2[0] - q1[0];\n    const y2 = p2[1] - q1[1];\n    const x3 = q2[0] - q1[0];\n    const y3 = q2[1] - q1[1];\n    const det1 = (x1 * y3 - x3 * y1);\n    const det2 =  (x2 * y3 - x3 * y2);\n    if ((det1 > 0 && det2 < 0) || (det1 < 0 && det2 > 0)) return true;\n    return false;\n}\n// a, b are end points for line segment1, c and d are end points for line segment2\nfunction lineIntersectLine(a, b, c, d) {\n    // check if two segments are parallel or not\n    // precondition is end point a, b is inside polygon, if line a->b is\n    // parallel to polygon edge c->d, then a->b won't intersect with c->d\n    const vectorP = [b[0] - a[0], b[1] - a[1]];\n    const vectorQ = [d[0] - c[0], d[1] - c[1]];\n    if (perp(vectorQ, vectorP) === 0) return false;\n\n    // If lines are intersecting with each other, the relative location should be:\n    // a and b lie in different sides of segment c->d\n    // c and d lie in different sides of segment a->b\n    if (twoSided(a, b, c, d) && twoSided(c, d, a, b)) return true;\n    return false;\n}\n\nfunction lineIntersectPolygon(p1, p2, polygon) {\n    for (const ring of polygon) {\n        // loop through every edge of the ring\n        for (let j = 0; j < ring.length - 1; ++j) {\n            if (lineIntersectLine(p1, p2, ring[j], ring[j + 1])) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nfunction lineStringWithinPolygon(line, polygon) {\n    // First, check if geometry points of line segments are all inside polygon\n    for (let i = 0; i < line.length; ++i) {\n        if (!pointWithinPolygon(line[i], polygon)) {\n            return false;\n        }\n    }\n\n    // Second, check if there is line segment intersecting polygon edge\n    for (let i = 0; i < line.length - 1; ++i) {\n        if (lineIntersectPolygon(line[i], line[i + 1], polygon)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction lineStringWithinPolygons(line, polygons) {\n    for (let i = 0; i < polygons.length; i++) {\n        if (lineStringWithinPolygon(line, polygons[i])) return true;\n    }\n    return false;\n}\n\nfunction getTilePolygon(coordinates, bbox, canonical) {\n    const polygon = [];\n    for (let i = 0; i < coordinates.length; i++) {\n        const ring = [];\n        for (let j = 0; j < coordinates[i].length; j++) {\n            const coord = getTileCoordinates(coordinates[i][j], canonical);\n            updateBBox(bbox, coord);\n            ring.push(coord);\n        }\n        polygon.push(ring);\n    }\n    return polygon;\n}\n\nfunction getTilePolygons(coordinates, bbox, canonical) {\n    const polygons = [];\n    for (let i = 0; i < coordinates.length; i++) {\n        const polygon = getTilePolygon(coordinates[i], bbox, canonical);\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n\nfunction updatePoint(p, bbox, polyBBox, worldSize) {\n    if (p[0] < polyBBox[0] || p[0] > polyBBox[2]) {\n        const halfWorldSize = worldSize * 0.5;\n        let shift = (p[0] - polyBBox[0] > halfWorldSize) ? -worldSize : (polyBBox[0] - p[0] > halfWorldSize) ? worldSize : 0;\n        if (shift === 0) {\n            shift = (p[0] - polyBBox[2] > halfWorldSize) ? -worldSize : (polyBBox[2] - p[0] > halfWorldSize) ? worldSize : 0;\n        }\n        p[0] += shift;\n    }\n    updateBBox(bbox, p);\n}\n\nfunction resetBBox(bbox) {\n    bbox[0] = bbox[1] = Infinity;\n    bbox[2] = bbox[3] = -Infinity;\n}\n\nfunction getTilePoints(geometry, pointBBox, polyBBox, canonical) {\n    const worldSize = Math.pow(2, canonical.z) * EXTENT;\n    const shifts = [canonical.x * EXTENT, canonical.y * EXTENT];\n    const tilePoints = [];\n    for (const points of geometry) {\n        for (const point of points) {\n            const p = [point.x + shifts[0], point.y + shifts[1]];\n            updatePoint(p, pointBBox, polyBBox, worldSize);\n            tilePoints.push(p);\n        }\n    }\n    return tilePoints;\n}\n\nfunction getTileLines(geometry, lineBBox, polyBBox, canonical) {\n    const worldSize = Math.pow(2, canonical.z) * EXTENT;\n    const shifts = [canonical.x * EXTENT, canonical.y * EXTENT];\n    const tileLines = [];\n    for (const line of geometry) {\n        const tileLine = [];\n        for (const point of line) {\n            const p = [point.x + shifts[0], point.y + shifts[1]];\n            updateBBox(lineBBox, p);\n            tileLine.push(p);\n        }\n        tileLines.push(tileLine);\n    }\n    if (lineBBox[2] - lineBBox[0] <= worldSize / 2) {\n        resetBBox(lineBBox);\n        for (const line of tileLines) {\n            for (const p of line) {\n                updatePoint(p, lineBBox, polyBBox, worldSize);\n            }\n        }\n    }\n    return tileLines;\n}\n\nfunction pointsWithinPolygons(ctx: EvaluationContext, polygonGeometry: GeoJSONPolygons) {\n    const pointBBox = [Infinity, Infinity, -Infinity, -Infinity];\n    const polyBBox = [Infinity, Infinity, -Infinity, -Infinity];\n\n    const canonical = ctx.canonicalID();\n\n    if (polygonGeometry.type === 'Polygon') {\n        const tilePolygon = getTilePolygon(polygonGeometry.coordinates, polyBBox, canonical);\n        const tilePoints = getTilePoints(ctx.geometry(), pointBBox, polyBBox, canonical);\n        if (!boxWithinBox(pointBBox, polyBBox)) return false;\n\n        for (const point of tilePoints) {\n            if (!pointWithinPolygon(point, tilePolygon)) return false;\n        }\n    }\n    if (polygonGeometry.type === 'MultiPolygon') {\n        const tilePolygons = getTilePolygons(polygonGeometry.coordinates, polyBBox, canonical);\n        const tilePoints = getTilePoints(ctx.geometry(), pointBBox, polyBBox, canonical);\n        if (!boxWithinBox(pointBBox, polyBBox)) return false;\n\n        for (const point of tilePoints) {\n            if (!pointWithinPolygons(point, tilePolygons)) return false;\n        }\n    }\n\n    return true;\n}\n\nfunction linesWithinPolygons(ctx: EvaluationContext, polygonGeometry: GeoJSONPolygons) {\n    const lineBBox = [Infinity, Infinity, -Infinity, -Infinity];\n    const polyBBox = [Infinity, Infinity, -Infinity, -Infinity];\n\n    const canonical = ctx.canonicalID();\n\n    if (polygonGeometry.type === 'Polygon') {\n        const tilePolygon = getTilePolygon(polygonGeometry.coordinates, polyBBox, canonical);\n        const tileLines = getTileLines(ctx.geometry(), lineBBox, polyBBox, canonical);\n        if (!boxWithinBox(lineBBox, polyBBox)) return false;\n\n        for (const line of tileLines) {\n            if (!lineStringWithinPolygon(line, tilePolygon)) return false;\n        }\n    }\n    if (polygonGeometry.type === 'MultiPolygon') {\n        const tilePolygons = getTilePolygons(polygonGeometry.coordinates, polyBBox, canonical);\n        const tileLines = getTileLines(ctx.geometry(), lineBBox, polyBBox, canonical);\n        if (!boxWithinBox(lineBBox, polyBBox)) return false;\n\n        for (const line of tileLines) {\n            if (!lineStringWithinPolygons(line, tilePolygons)) return false;\n        }\n    }\n    return true;\n}\n\nclass Within implements Expression {\n    type: Type;\n    geojson: GeoJSON\n    geometries: GeoJSONPolygons;\n\n    constructor(geojson: GeoJSON, geometries: GeoJSONPolygons) {\n        this.type = BooleanType;\n        this.geojson = geojson;\n        this.geometries = geometries;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext) {\n        if (args.length !== 2)\n            return context.error(`'within' expression requires exactly one argument, but found ${args.length - 1} instead.`);\n        if (isValue(args[1])) {\n            const geojson = (args[1]: Object);\n            if (geojson.type === 'FeatureCollection') {\n                for (let i = 0; i < geojson.features.length; ++i) {\n                    const type = geojson.features[i].geometry.type;\n                    if (type === 'Polygon' || type === 'MultiPolygon') {\n                        return new Within(geojson, geojson.features[i].geometry);\n                    }\n                }\n            } else if (geojson.type === 'Feature') {\n                const type = geojson.geometry.type;\n                if (type === 'Polygon' || type === 'MultiPolygon') {\n                    return new Within(geojson, geojson.geometry);\n                }\n            } else if (geojson.type  === 'Polygon' || geojson.type === 'MultiPolygon') {\n                return new Within(geojson, geojson);\n            }\n        }\n        return context.error(`'within' expression requires valid geojson object that contains polygon geometry type.`);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        if (ctx.geometry() != null && ctx.canonicalID() != null) {\n            if (ctx.geometryType() === 'Point') {\n                return pointsWithinPolygons(ctx, this.geometries);\n            } else if (ctx.geometryType() === 'LineString') {\n                return linesWithinPolygons(ctx, this.geometries);\n            }\n        }\n        return false;\n    }\n\n    eachChild() {}\n\n    outputDefined(): boolean {\n        return true;\n    }\n\n    serialize(): Array<mixed> {\n        return [\"within\", this.geojson];\n    }\n\n}\n\nexport default Within;\n", "// @flow\n\nimport CompoundExpression from './compound_expression';\nimport Within from './definitions/within';\nimport type {Expression} from './expression.js';\n\nfunction isFeatureConstant(e: Expression) {\n    if (e instanceof CompoundExpression) {\n        if (e.name === 'get' && e.args.length === 1) {\n            return false;\n        } else if (e.name === 'feature-state') {\n            return false;\n        } else if (e.name === 'has' && e.args.length === 1) {\n            return false;\n        } else if (\n            e.name === 'properties' ||\n            e.name === 'geometry-type' ||\n            e.name === 'id'\n        ) {\n            return false;\n        } else if (/^filter-/.test(e.name)) {\n            return false;\n        }\n    }\n\n    if (e instanceof Within) {\n        return false;\n    }\n\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isFeatureConstant(arg)) { result = false; }\n    });\n    return result;\n}\n\nfunction isStateConstant(e: Expression) {\n    if (e instanceof CompoundExpression) {\n        if (e.name === 'feature-state') {\n            return false;\n        }\n    }\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isStateConstant(arg)) { result = false; }\n    });\n    return result;\n}\n\nfunction isGlobalPropertyConstant(e: Expression, properties: Array<string>) {\n    if (e instanceof CompoundExpression && properties.indexOf(e.name) >= 0) { return false; }\n    let result = true;\n    e.eachChild((arg) => {\n        if (result && !isGlobalPropertyConstant(arg, properties)) { result = false; }\n    });\n    return result;\n}\n\nexport {isFeatureConstant, isGlobalPropertyConstant, isStateConstant};\n", "// @flow\n\nimport type {Type} from '../types';\nimport type {Expression} from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext  from '../evaluation_context';\n\nclass Var implements Expression {\n    type: Type;\n    name: string;\n    boundExpression: Expression;\n\n    constructor(name: string, boundExpression: Expression) {\n        this.type = boundExpression.type;\n        this.name = name;\n        this.boundExpression = boundExpression;\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext) {\n        if (args.length !== 2 || typeof args[1] !== 'string')\n            return context.error(`'var' expression requires exactly one string literal argument.`);\n\n        const name = args[1];\n        if (!context.scope.has(name)) {\n            return context.error(`Unknown variable \"${name}\". Make sure \"${name}\" has been bound in an enclosing \"let\" expression before using it.`, 1);\n        }\n\n        return new Var(name, context.scope.get(name));\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return this.boundExpression.evaluate(ctx);\n    }\n\n    eachChild() {}\n\n    outputDefined() {\n        return false;\n    }\n\n    serialize() {\n        return [\"var\", this.name];\n    }\n}\n\nexport default Var;\n", "// @flow\n\nimport Scope from './scope';\nimport {checkSubtype} from './types';\nimport ParsingError from './parsing_error';\nimport Literal from './definitions/literal';\nimport Assertion from './definitions/assertion';\nimport Coercion from './definitions/coercion';\nimport EvaluationContext from './evaluation_context';\nimport CompoundExpression from './compound_expression';\nimport CollatorExpression from './definitions/collator';\nimport Within from './definitions/within';\nimport {isGlobalPropertyConstant, isFeatureConstant} from './is_constant';\nimport Var from './definitions/var';\n\nimport type {Expression, ExpressionRegistry} from './expression';\nimport type {Type} from './types';\n\n/**\n * State associated parsing at a given point in an expression tree.\n * @private\n */\nclass ParsingContext {\n    registry: ExpressionRegistry;\n    path: Array<number>;\n    key: string;\n    scope: Scope;\n    errors: Array<ParsingError>;\n\n    // The expected type of this expression. Provided only to allow Expression\n    // implementations to infer argument types: Expression#parse() need not\n    // check that the output type of the parsed expression matches\n    // `expectedType`.\n    expectedType: ?Type;\n\n    constructor(\n        registry: ExpressionRegistry,\n        path: Array<number> = [],\n        expectedType: ?Type,\n        scope: Scope = new Scope(),\n        errors: Array<ParsingError> = []\n    ) {\n        this.registry = registry;\n        this.path = path;\n        this.key = path.map(part => `[${part}]`).join('');\n        this.scope = scope;\n        this.errors = errors;\n        this.expectedType = expectedType;\n    }\n\n    /**\n     * @param expr the JSON expression to parse\n     * @param index the optional argument index if this expression is an argument of a parent expression that's being parsed\n     * @param options\n     * @param options.omitTypeAnnotations set true to omit inferred type annotations.  Caller beware: with this option set, the parsed expression's type will NOT satisfy `expectedType` if it would normally be wrapped in an inferred annotation.\n     * @private\n     */\n    parse(\n        expr: mixed,\n        index?: number,\n        expectedType?: ?Type,\n        bindings?: Array<[string, Expression]>,\n        options: {typeAnnotation?: 'assert' | 'coerce' | 'omit'} = {}\n    ): ?Expression {\n        if (index) {\n            return this.concat(index, expectedType, bindings)._parse(expr, options);\n        }\n        return this._parse(expr, options);\n    }\n\n    _parse(expr: mixed, options: {typeAnnotation?: 'assert' | 'coerce' | 'omit'}): ?Expression {\n        if (expr === null || typeof expr === 'string' || typeof expr === 'boolean' || typeof expr === 'number') {\n            expr = ['literal', expr];\n        }\n\n        function annotate(parsed, type, typeAnnotation: 'assert' | 'coerce' | 'omit') {\n            if (typeAnnotation === 'assert') {\n                return new Assertion(type, [parsed]);\n            } else if (typeAnnotation === 'coerce') {\n                return new Coercion(type, [parsed]);\n            } else {\n                return parsed;\n            }\n        }\n\n        if (Array.isArray(expr)) {\n            if (expr.length === 0) {\n                return this.error(`Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].`);\n            }\n\n            const op = expr[0];\n            if (typeof op !== 'string') {\n                this.error(`Expression name must be a string, but found ${typeof op} instead. If you wanted a literal array, use [\"literal\", [...]].`, 0);\n                return null;\n            }\n\n            const Expr = this.registry[op];\n            if (Expr) {\n                let parsed = Expr.parse(expr, this);\n                if (!parsed) return null;\n\n                if (this.expectedType) {\n                    const expected = this.expectedType;\n                    const actual = parsed.type;\n\n                    // When we expect a number, string, boolean, or array but have a value, wrap it in an assertion.\n                    // When we expect a color or formatted string, but have a string or value, wrap it in a coercion.\n                    // Otherwise, we do static type-checking.\n                    //\n                    // These behaviors are overridable for:\n                    //   * The \"coalesce\" operator, which needs to omit type annotations.\n                    //   * String-valued properties (e.g. `text-field`), where coercion is more convenient than assertion.\n                    //\n                    if ((expected.kind === 'string' || expected.kind === 'number' || expected.kind === 'boolean' || expected.kind === 'object' || expected.kind === 'array') && actual.kind === 'value') {\n                        parsed = annotate(parsed, expected, options.typeAnnotation || 'assert');\n                    } else if ((expected.kind === 'color' || expected.kind === 'formatted' || expected.kind === 'resolvedImage') && (actual.kind === 'value' || actual.kind === 'string')) {\n                        parsed = annotate(parsed, expected, options.typeAnnotation || 'coerce');\n                    } else if (this.checkSubtype(expected, actual)) {\n                        return null;\n                    }\n                }\n\n                // If an expression's arguments are all literals, we can evaluate\n                // it immediately and replace it with a literal value in the\n                // parsed/compiled result. Expressions that expect an image should\n                // not be resolved here so we can later get the available images.\n                if (!(parsed instanceof Literal) && (parsed.type.kind !== 'resolvedImage') && isConstant(parsed)) {\n                    const ec = new EvaluationContext();\n                    try {\n                        parsed = new Literal(parsed.type, parsed.evaluate(ec));\n                    } catch (e) {\n                        this.error(e.message);\n                        return null;\n                    }\n                }\n\n                return parsed;\n            }\n\n            return this.error(`Unknown expression \"${op}\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        } else if (typeof expr === 'undefined') {\n            return this.error(`'undefined' value invalid. Use null instead.`);\n        } else if (typeof expr === 'object') {\n            return this.error(`Bare objects invalid. Use [\"literal\", {...}] instead.`);\n        } else {\n            return this.error(`Expected an array, but found ${typeof expr} instead.`);\n        }\n    }\n\n    /**\n     * Returns a copy of this context suitable for parsing the subexpression at\n     * index `index`, optionally appending to 'let' binding map.\n     *\n     * Note that `errors` property, intended for collecting errors while\n     * parsing, is copied by reference rather than cloned.\n     * @private\n     */\n    concat(index: number, expectedType?: ?Type, bindings?: Array<[string, Expression]>) {\n        const path = typeof index === 'number' ? this.path.concat(index) : this.path;\n        const scope = bindings ? this.scope.concat(bindings) : this.scope;\n        return new ParsingContext(\n            this.registry,\n            path,\n            expectedType || null,\n            scope,\n            this.errors\n        );\n    }\n\n    /**\n     * Push a parsing (or type checking) error into the `this.errors`\n     * @param error The message\n     * @param keys Optionally specify the source of the error at a child\n     * of the current expression at `this.key`.\n     * @private\n     */\n    error(error: string, ...keys: Array<number>) {\n        const key = `${this.key}${keys.map(k => `[${k}]`).join('')}`;\n        this.errors.push(new ParsingError(key, error));\n    }\n\n    /**\n     * Returns null if `t` is a subtype of `expected`; otherwise returns an\n     * error message and also pushes it to `this.errors`.\n     */\n    checkSubtype(expected: Type, t: Type): ?string {\n        const error = checkSubtype(expected, t);\n        if (error) this.error(error);\n        return error;\n    }\n}\n\nexport default ParsingContext;\n\nfunction isConstant(expression: Expression) {\n    if (expression instanceof Var) {\n        return isConstant(expression.boundExpression);\n    } else if (expression instanceof CompoundExpression && expression.name === 'error') {\n        return false;\n    } else if (expression instanceof CollatorExpression) {\n        // Although the results of a Collator expression with fixed arguments\n        // generally shouldn't change between executions, we can't serialize them\n        // as constant expressions because results change based on environment.\n        return false;\n    } else if (expression instanceof Within) {\n        return false;\n    }\n\n    const isTypeAnnotation = expression instanceof Coercion ||\n        expression instanceof Assertion;\n\n    let childrenConstant = true;\n    expression.eachChild(child => {\n        // We can _almost_ assume that if `expressions` children are constant,\n        // they would already have been evaluated to Literal values when they\n        // were parsed.  Type annotations are the exception, because they might\n        // have been inferred and added after a child was parsed.\n\n        // So we recurse into isConstant() for the children of type annotations,\n        // but otherwise simply check whether they are Literals.\n        if (isTypeAnnotation) {\n            childrenConstant = childrenConstant && isConstant(child);\n        } else {\n            childrenConstant = childrenConstant && child instanceof Literal;\n        }\n    });\n    if (!childrenConstant) {\n        return false;\n    }\n\n    return isFeatureConstant(expression) &&\n        isGlobalPropertyConstant(expression, ['zoom', 'heatmap-density', 'line-progress', 'accumulated', 'is-supported-script']);\n}\n", "// @flow\n\nimport RuntimeError from './runtime_error';\n\nimport type {Expression} from './expression';\n\nexport type Stops = Array<[number, Expression]>;\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n * @private\n */\nexport function findStopLessThanOrEqualTo(stops: Array<number>, input: number) {\n    const lastIndex = stops.length - 1;\n    let lowerIndex = 0;\n    let upperIndex = lastIndex;\n    let currentIndex = 0;\n    let currentValue, nextValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex];\n        nextValue = stops[currentIndex + 1];\n\n        if (currentValue <= input) {\n            if (currentIndex === lastIndex || input < nextValue) { // Search complete\n                return currentIndex;\n            }\n\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        } else {\n            throw new RuntimeError('Input is not a number.');\n        }\n    }\n\n    return 0;\n}\n", "// @flow\n\nimport {NumberType} from '../types';\n\nimport {findStopLessThanOrEqualTo} from '../stops';\n\nimport type {Stops} from '../stops';\nimport type {Expression} from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type {Type} from '../types';\n\nclass Step implements Expression {\n    type: Type;\n\n    input: Expression;\n    labels: Array<number>;\n    outputs: Array<Expression>;\n\n    constructor(type: Type, input: Expression, stops: Stops) {\n        this.type = type;\n        this.input = input;\n\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n\n    static parse(args: $ReadOnlyArray<mixed>, context: ParsingContext) {\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        }\n\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n\n        const input = context.parse(args[1], 1, NumberType);\n        if (!input) return null;\n\n        const stops: Stops = [];\n\n        let outputType: Type = (null: any);\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        for (let i = 1; i < args.length; i += 2) {\n            const label = i === 1 ? -Infinity : args[i];\n            const value = args[i + 1];\n\n            const labelKey = i;\n            const valueKey = i + 1;\n\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            stops.push([label, parsed]);\n        }\n\n        return new Step(outputType, input, stops);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const value = ((this.input.evaluate(ctx): any): number);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n\n        const index = findStopLessThanOrEqualTo(labels, value);\n        return outputs[index].evaluate(ctx);\n    }\n\n    eachChild(fn: (_: Expression) => void) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n\n    outputDefined(): boolean {\n        return this.outputs.every(out => out.outputDefined());\n    }\n\n    serialize() {\n        const serialized = [\"step\", this.input.serialize()];\n        for (let i = 0; i < this.labels.length; i++) {\n            if (i > 0) {\n                serialized.push(this.labels[i]);\n            }\n            serialized.push(this.outputs[i].serialize());\n        }\n        return serialized;\n    }\n}\n\nexport default Step;\n", "// @flow\n\nimport Color from './color';\n\nexport function number(a: number, b: number, t: number) {\n    return (a * (1 - t)) + (b * t);\n}\n\nexport function color(from: Color, to: Color, t: number) {\n    return new Color(\n        number(from.r, to.r, t),\n        number(from.g, to.g, t),\n        number(from.b, to.b, t),\n        number(from.a, to.a, t)\n    );\n}\n\nexport function array(from: Array<number>, to: Array<number>, t: number): Array<number> {\n    return from.map((d, i) => {\n        return number(d, to[i], t);\n    });\n}\n", "// @flow\n\nimport Color from './color';\n\nimport {number as interpolateNumber} from './interpolate';\n\ntype LABColor = {\n    l: number,\n    a: number,\n    b: number,\n    alpha: number\n};\n\ntype HCLColor = {\n    h: number,\n    c: number,\n    l: number,\n    alpha: number\n};\n\n// Constants\nconst Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1,\n    deg2rad = Math.PI / 180,\n    rad2deg = 180 / Math.PI;\n\n// Utilities\nfunction xyz2lab(t: number) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t: number) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x: number) {\n 