(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else {
  var a = factory();
  for (var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
}})(globalThis, function () {
"use strict";var __exports__=(()=>{var sre=Object.create;var Nv=Object.defineProperty;var are=Object.getOwnPropertyDescriptor;var lre=Object.getOwnPropertyNames;var cre=Object.getPrototypeOf,ure=Object.prototype.hasOwnProperty;var fre=(t,e,r)=>e in t?Nv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var P6=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var It=(t,e)=>()=>(t&&(e=t(t=0)),e);var Qt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),As=(t,e)=>{for(var r in e)Nv(t,r,{get:e[r],enumerable:!0})},R6=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of lre(e))!ure.call(t,n)&&n!==r&&Nv(t,n,{get:()=>e[n],enumerable:!(i=are(e,n))||i.enumerable});return t};var ga=(t,e,r)=>(r=t!=null?sre(cre(t)):{},R6(e||!t||!t.__esModule?Nv(r,"default",{value:t,enumerable:!0}):r,t)),B6=t=>R6(Nv({},"__esModule",{value:!0}),t);var Yr=(t,e,r)=>(fre(t,typeof e!="symbol"?e+"":e,r),r);var c5=Qt((Y3,K3)=>{(function(t,e){typeof Y3=="object"&&typeof K3<"u"?K3.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.mapboxgl=e())})(Y3,function(){"use strict";var t,e,r;function i(n,o){if(!t)t=o;else if(!e)e=o;else{var s="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",l={};t(l),r=o(l),typeof window<"u"&&(r.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}}return i(["exports"],function(n){"use strict";function o(a,c){return a(c={exports:{}},c.exports),c.exports}var s=l;function l(a,c,f,x){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(x-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=x,this.p2x=f,this.p2y=x}l.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},l.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},l.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},l.prototype.solveCurveX=function(a,c){var f,x,S,I,D;for(c===void 0&&(c=1e-6),S=a,D=0;D<8;D++){if(I=this.sampleCurveX(S)-a,Math.abs(I)<c)return S;var H=this.sampleCurveDerivativeX(S);if(Math.abs(H)<1e-6)break;S-=I/H}if((S=a)<(f=0))return f;if(S>(x=1))return x;for(;f<x;){if(I=this.sampleCurveX(S),Math.abs(I-a)<c)return S;a>I?f=S:x=S,S=.5*(x-f)+f}return S},l.prototype.solve=function(a,c){return this.sampleCurveY(this.solveCurveX(a,c))};var u=h;function h(a,c){this.x=a,this.y=c}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,c){return this.clone()._rotateAround(a,c)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var c=a.x-this.x,f=a.y-this.y;return c*c+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,c){return Math.atan2(this.x*c-this.y*a,this.x*a+this.y*c)},_matMult:function(a){var c=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var c=Math.cos(a),f=Math.sin(a),x=f*this.x+c*this.y;return this.x=c*this.x-f*this.y,this.y=x,this},_rotateAround:function(a,c){var f=Math.cos(a),x=Math.sin(a),S=c.y+x*(this.x-c.x)+f*(this.y-c.y);return this.x=c.x+f*(this.x-c.x)-x*(this.y-c.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(a){return a instanceof h?a:Array.isArray(a)?new h(a[0],a[1]):a};var v=typeof self<"u"?self:{},T=Math.pow(2,53)-1;function E(a,c,f,x){var S=new s(a,c,f,x);return function(I){return S.solve(I)}}var M=E(.25,.1,.25,1);function O(a,c,f){return Math.min(f,Math.max(c,a))}function F(a,c,f){var x=f-c,S=((a-c)%x+x)%x+c;return S===c?f:S}function z(a){for(var c=[],f=arguments.length-1;f-- >0;)c[f]=arguments[f+1];for(var x=0,S=c;x<S.length;x+=1){var I=S[x];for(var D in I)a[D]=I[D]}return a}var W=1;function J(){return W++}function K(){return function a(c){return c?(c^16*Math.random()>>c/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function ne(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function ge(a,c){a.forEach(function(f){c[f]&&(c[f]=c[f].bind(c))})}function j(a,c){return a.indexOf(c,a.length-c.length)!==-1}function me(a,c,f){var x={};for(var S in a)x[S]=c.call(f||this,a[S],S,a);return x}function fe(a,c,f){var x={};for(var S in a)c.call(f||this,a[S],S,a)&&(x[S]=a[S]);return x}function $(a){return Array.isArray(a)?a.map($):typeof a=="object"&&a?me(a,$):a}var Z={};function we(a){Z[a]||(typeof console<"u"&&console.warn(a),Z[a]=!0)}function Oe(a,c,f){return(f.y-a.y)*(c.x-a.x)>(c.y-a.y)*(f.x-a.x)}function he(a){for(var c=0,f=0,x=a.length,S=x-1,I=void 0,D=void 0;f<x;S=f++)c+=((D=a[S]).x-(I=a[f]).x)*(I.y+D.y);return c}function Le(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ft(a){var c={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(x,S,I,D){var H=I||D;return c[S]=!H||H.toLowerCase(),""}),c["max-age"]){var f=parseInt(c["max-age"],10);isNaN(f)?delete c["max-age"]:c["max-age"]=f}return c}var Vt=null;function Yt(a){if(Vt==null){var c=a.navigator?a.navigator.userAgent:null;Vt=!!a.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return Vt}function mr(a){try{var c=v[a];return c.setItem("_mapbox_test_",1),c.removeItem("_mapbox_test_"),!0}catch{return!1}}var Er,Jr,or,ai,Jt=v.performance&&v.performance.now?v.performance.now.bind(v.performance):Date.now.bind(Date),qt=v.requestAnimationFrame||v.mozRequestAnimationFrame||v.webkitRequestAnimationFrame||v.msRequestAnimationFrame,wi=v.cancelAnimationFrame||v.mozCancelAnimationFrame||v.webkitCancelAnimationFrame||v.msCancelAnimationFrame,ae={now:Jt,frame:function(a){var c=qt(a);return{cancel:function(){return wi(c)}}},getImageData:function(a,c){c===void 0&&(c=0);var f=v.document.createElement("canvas"),x=f.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return f.width=a.width,f.height=a.height,x.drawImage(a,0,0,a.width,a.height),x.getImageData(-c,-c,a.width+2*c,a.height+2*c)},resolveURL:function(a){return Er||(Er=v.document.createElement("a")),Er.href=a,Er.href},hardwareConcurrency:v.navigator&&v.navigator.hardwareConcurrency||4,get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(Jr==null&&(Jr=v.matchMedia("(prefers-reduced-motion: reduce)")),Jr.matches)}},be={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},je={supported:!1,testSupport:function(a){!lt&&ai&&(Ft?wt(a):or=a)}},lt=!1,Ft=!1;function wt(a){var c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,ai),a.isContextLost())return;je.supported=!0}catch{}a.deleteTexture(c),lt=!0}v.document&&((ai=v.document.createElement("img")).onload=function(){or&&wt(or),or=null,Ft=!0},ai.onerror=function(){lt=!0,or=null},ai.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var $r="01",xi=function(a,c){this._transformRequestFn=a,this._customAccessToken=c,this._createSkuToken()};function Ki(a){return a.indexOf("mapbox:")===0}xi.prototype._createSkuToken=function(){var a=function(){for(var c="",f=0;f<10;f++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",$r,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt},xi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},xi.prototype.transformRequest=function(a,c){return this._transformRequestFn&&this._transformRequestFn(a,c)||{url:a}},xi.prototype.normalizeStyleURL=function(a,c){if(!Ki(a))return a;var f=Un(a);return f.path="/styles/v1"+f.path,this._makeAPIURL(f,this._customAccessToken||c)},xi.prototype.normalizeGlyphsURL=function(a,c){if(!Ki(a))return a;var f=Un(a);return f.path="/fonts/v1"+f.path,this._makeAPIURL(f,this._customAccessToken||c)},xi.prototype.normalizeSourceURL=function(a,c){if(!Ki(a))return a;var f=Un(a);return f.path="/v4/"+f.authority+".json",f.params.push("secure"),this._makeAPIURL(f,this._customAccessToken||c)},xi.prototype.normalizeSpriteURL=function(a,c,f,x){var S=Un(a);return Ki(a)?(S.path="/styles/v1"+S.path+"/sprite"+c+f,this._makeAPIURL(S,this._customAccessToken||x)):(S.path+=""+c+f,No(S))},xi.prototype.normalizeTileURL=function(a,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Ki(a))return a;var f=Un(a);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ae.devicePixelRatio>=2||c===512?"@2x":"")+(je.supported?".webp":"$1")),f.path=f.path.replace(/^.+\/v4\//,"/"),f.path="/v4"+f.path;var x=this._customAccessToken||function(S){for(var I=0,D=S;I<D.length;I+=1){var H=D[I].match(/^access_token=(.*)$/);if(H)return H[1]}return null}(f.params)||be.ACCESS_TOKEN;return be.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&f.params.push("sku="+this._skuToken),this._makeAPIURL(f,x)},xi.prototype.canonicalizeTileURL=function(a,c){var f=Un(a);if(!f.path.match(/(^\/v4\/)/)||!f.path.match(/\.[\w]+$/))return a;var x="mapbox://tiles/";x+=f.path.replace("/v4/","");var S=f.params;return c&&(S=S.filter(function(I){return!I.match(/^access_token=/)})),S.length&&(x+="?"+S.join("&")),x},xi.prototype.canonicalizeTileset=function(a,c){for(var f=!!c&&Ki(c),x=[],S=0,I=a.tiles||[];S<I.length;S+=1){var D=I[S];Zi(D)?x.push(this.canonicalizeTileURL(D,f)):x.push(D)}return x},xi.prototype._makeAPIURL=function(a,c){var f="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=Un(be.API_URL);if(a.protocol=x.protocol,a.authority=x.authority,a.protocol==="http"){var S=a.params.indexOf("secure");S>=0&&a.params.splice(S,1)}if(x.path!=="/"&&(a.path=""+x.path+a.path),!be.REQUIRE_ACCESS_TOKEN)return No(a);if(!(c=c||be.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+f);if(c[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+f);return a.params=a.params.filter(function(I){return I.indexOf("access_token")===-1}),a.params.push("access_token="+c),No(a)};var kn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Zi(a){return kn.test(a)}var Hi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Un(a){var c=a.match(Hi);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function No(a){var c=a.params.length?"?"+a.params.join("&"):"";return a.protocol+"://"+a.authority+a.path+c}function Ji(a){if(!a)return null;var c=a.split(".");if(!c||c.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(c[1]).split("").map(function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Bi=function(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Bi.prototype.getStorageKey=function(a){var c,f=Ji(be.ACCESS_TOKEN);return c=f&&f.u?v.btoa(encodeURIComponent(f.u).replace(/%([0-9A-F]{2})/g,function(x,S){return String.fromCharCode(Number("0x"+S))})):be.ACCESS_TOKEN||"",a?"mapbox.eventData."+a+":"+c:"mapbox.eventData:"+c},Bi.prototype.fetchEventData=function(){var a=mr("localStorage"),c=this.getStorageKey(),f=this.getStorageKey("uuid");if(a)try{var x=v.localStorage.getItem(c);x&&(this.eventData=JSON.parse(x));var S=v.localStorage.getItem(f);S&&(this.anonId=S)}catch{we("Unable to read from LocalStorage")}},Bi.prototype.saveEventData=function(){var a=mr("localStorage"),c=this.getStorageKey(),f=this.getStorageKey("uuid");if(a)try{v.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(c,JSON.stringify(this.eventData))}catch{we("Unable to write to LocalStorage")}},Bi.prototype.processRequests=function(a){},Bi.prototype.postEvent=function(a,c,f,x){var S=this;if(be.EVENTS_URL){var I=Un(be.EVENTS_URL);I.params.push("access_token="+(x||be.ACCESS_TOKEN||""));var D={event:this.type,created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:$r,userId:this.anonId},H=c?z(D,c):D,Y={url:No(I),headers:{"Content-Type":"text/plain"},body:JSON.stringify([H])};this.pendingRequest=ao(Y,function(ee){S.pendingRequest=null,f(ee),S.saveEventData(),S.processRequests(x)})}},Bi.prototype.queueRequest=function(a,c){this.queue.push(a),this.processRequests(c)};var yn,po,kr=function(a){function c(){a.call(this,"map.load"),this.success={},this.skuToken=""}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.postMapLoadEvent=function(f,x,S,I){this.skuToken=S;var D=!(!I&&!be.ACCESS_TOKEN),H=Array.isArray(f)&&f.some(function(Y){return Ki(Y)||Zi(Y)});be.EVENTS_URL&&D&&H&&this.queueRequest({id:x,timestamp:Date.now()},I)},c.prototype.processRequests=function(f){var x=this;if(!this.pendingRequest&&this.queue.length!==0){var S=this.queue.shift(),I=S.id,D=S.timestamp;I&&this.success[I]||(this.anonId||this.fetchEventData(),ne(this.anonId)||(this.anonId=K()),this.postEvent(D,{skuToken:this.skuToken},function(H){H||I&&(x.success[I]=!0)},f))}},c}(Bi),dr=new(function(a){function c(f){a.call(this,"appUserTurnstile"),this._customAccessToken=f}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.postTurnstileEvent=function(f,x){be.EVENTS_URL&&be.ACCESS_TOKEN&&Array.isArray(f)&&f.some(function(S){return Ki(S)||Zi(S)})&&this.queueRequest(Date.now(),x)},c.prototype.processRequests=function(f){var x=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var S=Ji(be.ACCESS_TOKEN),I=S?S.u:be.ACCESS_TOKEN,D=I!==this.eventData.tokenU;ne(this.anonId)||(this.anonId=K(),D=!0);var H=this.queue.shift();if(this.eventData.lastSuccess){var Y=new Date(this.eventData.lastSuccess),ee=new Date(H),ie=(H-this.eventData.lastSuccess)/864e5;D=D||ie>=1||ie<-1||Y.getDate()!==ee.getDate()}else D=!0;if(!D)return this.processRequests();this.postEvent(H,{"enabled.telemetry":!1},function(se){se||(x.eventData.lastSuccess=H,x.eventData.tokenU=I)},f)}},c}(Bi)),Ur=dr.postTurnstileEvent.bind(dr),ci=new kr,to=ci.postMapLoadEvent.bind(ci),Dn=500,To=50;function Eo(){v.caches&&!yn&&(yn=v.caches.open("mapbox-tiles"))}function Xo(a){var c=a.indexOf("?");return c<0?a:a.slice(0,c)}var So,Us=1/0;function Fc(){return So==null&&(So=v.OffscreenCanvas&&new v.OffscreenCanvas(1,1).getContext("2d")&&typeof v.createImageBitmap=="function"),So}var ql={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ql);var sl=function(a){function c(f,x,S){x===401&&Zi(S)&&(f+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),a.call(this,f),this.status=x,this.url=S,this.name=this.constructor.name,this.message=f}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},c}(Error),Cl=Le()?function(){return self.worker&&self.worker.referrer}:function(){return(v.location.protocol==="blob:"?v.parent:v).location.href},al,Ms,ca=function(a,c){if(!(/^file:/.test(f=a.url)||/^file:/.test(Cl())&&!/^\w+:/.test(f))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(x,S){var I,D=new v.AbortController,H=new v.Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,referrer:Cl(),signal:D.signal}),Y=!1,ee=!1,ie=(I=H.url).indexOf("sku=")>0&&Zi(I);x.type==="json"&&H.headers.set("Accept","application/json");var se=function(Te,ke,Ve){if(!ee){if(Te&&Te.message!=="SecurityError"&&we(Te),ke&&Ve)return Ae(ke);var et=Date.now();v.fetch(H).then(function(Xe){if(Xe.ok){var at=ie?Xe.clone():null;return Ae(Xe,at,et)}return S(new sl(Xe.statusText,Xe.status,x.url))}).catch(function(Xe){Xe.code!==20&&S(new Error(Xe.message))})}},Ae=function(Te,ke,Ve){(x.type==="arrayBuffer"?Te.arrayBuffer():x.type==="json"?Te.json():Te.text()).then(function(et){ee||(ke&&Ve&&function(Xe,at,_t){if(Eo(),yn){var bt={status:at.status,statusText:at.statusText,headers:new v.Headers};at.headers.forEach(function(Ut,$t){return bt.headers.set($t,Ut)});var Mt=ft(at.headers.get("Cache-Control")||"");Mt["no-store"]||(Mt["max-age"]&&bt.headers.set("Expires",new Date(_t+1e3*Mt["max-age"]).toUTCString()),new Date(bt.headers.get("Expires")).getTime()-_t<42e4||function(Ut,$t){if(po===void 0)try{new Response(new ReadableStream),po=!0}catch{po=!1}po?$t(Ut.body):Ut.blob().then($t)}(at,function(Ut){var $t=new v.Response(Ut,bt);Eo(),yn&&yn.then(function(Ar){return Ar.put(Xo(Xe.url),$t)}).catch(function(Ar){return we(Ar.message)})}))}}(H,ke,Ve),Y=!0,S(null,et,Te.headers.get("Cache-Control"),Te.headers.get("Expires")))}).catch(function(et){ee||S(new Error(et.message))})};return ie?function(Te,ke){if(Eo(),!yn)return ke(null);var Ve=Xo(Te.url);yn.then(function(et){et.match(Ve).then(function(Xe){var at=function(_t){if(!_t)return!1;var bt=new Date(_t.headers.get("Expires")||0),Mt=ft(_t.headers.get("Cache-Control")||"");return bt>Date.now()&&!Mt["no-cache"]}(Xe);et.delete(Ve),at&&et.put(Ve,Xe.clone()),ke(null,Xe,at)}).catch(ke)}).catch(ke)}(H,se):se(null,null),{cancel:function(){ee=!0,Y||D.abort()}}}(a,c);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,c,void 0,!0)}var f;return function(x,S){var I=new v.XMLHttpRequest;for(var D in I.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(I.responseType="arraybuffer"),x.headers)I.setRequestHeader(D,x.headers[D]);return x.type==="json"&&(I.responseType="text",I.setRequestHeader("Accept","application/json")),I.withCredentials=x.credentials==="include",I.onerror=function(){S(new Error(I.statusText))},I.onload=function(){if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){var H=I.response;if(x.type==="json")try{H=JSON.parse(I.response)}catch(Y){return S(Y)}S(null,H,I.getResponseHeader("Cache-Control"),I.getResponseHeader("Expires"))}else S(new sl(I.statusText,I.status,x.url))},I.send(x.body),{cancel:function(){return I.abort()}}}(a,c)},Ml=function(a,c){return ca(z(a,{type:"arrayBuffer"}),c)},ao=function(a,c){return ca(z(a,{method:"POST"}),c)},oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";al=[],Ms=0;var de=function(a,c){if(je.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Ms>=be.MAX_PARALLEL_IMAGE_REQUESTS){var f={requestParameters:a,callback:c,cancelled:!1,cancel:function(){this.cancelled=!0}};return al.push(f),f}Ms++;var x=!1,S=function(){if(!x)for(x=!0,Ms--;al.length&&Ms<be.MAX_PARALLEL_IMAGE_REQUESTS;){var D=al.shift();D.cancelled||(D.cancel=de(D.requestParameters,D.callback).cancel)}},I=Ml(a,function(D,H,Y,ee){S(),D?c(D):H&&(Fc()?function(ie,se){var Ae=new v.Blob([new Uint8Array(ie)],{type:"image/png"});v.createImageBitmap(Ae).then(function(Te){se(null,Te)}).catch(function(Te){se(new Error("Could not load image because of "+Te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(H,c):function(ie,se,Ae,Te){var ke=new v.Image,Ve=v.URL;ke.onload=function(){se(null,ke),Ve.revokeObjectURL(ke.src),ke.onload=null,v.requestAnimationFrame(function(){ke.src=oe})},ke.onerror=function(){return se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var et=new v.Blob([new Uint8Array(ie)],{type:"image/png"});ke.cacheControl=Ae,ke.expires=Te,ke.src=ie.byteLength?Ve.createObjectURL(et):oe}(H,c,Y,ee))});return{cancel:function(){I.cancel(),S()}}};function ve(a,c,f){f[a]&&f[a].indexOf(c)!==-1||(f[a]=f[a]||[],f[a].push(c))}function Pe(a,c,f){if(f&&f[a]){var x=f[a].indexOf(c);x!==-1&&f[a].splice(x,1)}}var ye=function(a,c){c===void 0&&(c={}),z(this,c),this.type=a},tt=function(a){function c(f,x){x===void 0&&(x={}),a.call(this,"error",z({error:f},x))}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c}(ye),rt=function(){};rt.prototype.on=function(a,c){return this._listeners=this._listeners||{},ve(a,c,this._listeners),this},rt.prototype.off=function(a,c){return Pe(a,c,this._listeners),Pe(a,c,this._oneTimeListeners),this},rt.prototype.once=function(a,c){return this._oneTimeListeners=this._oneTimeListeners||{},ve(a,c,this._oneTimeListeners),this},rt.prototype.fire=function(a,c){typeof a=="string"&&(a=new ye(a,c||{}));var f=a.type;if(this.listens(f)){a.target=this;for(var x=0,S=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];x<S.length;x+=1)S[x].call(this,a);for(var I=0,D=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];I<D.length;I+=1){var H=D[I];Pe(f,H,this._oneTimeListeners),H.call(this,a)}var Y=this._eventedParent;Y&&(z(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Y.fire(a))}else a instanceof tt&&console.error(a.error);return this},rt.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)},rt.prototype.setEventedParent=function(a,c){return this._eventedParent=a,this._eventedParentData=c,this};var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ge=function(a,c,f,x){this.message=(a?a+": ":"")+f,x&&(this.identifier=x),c!=null&&c.__line__&&(this.line=c.__line__)};function ht(a){var c=a.value;return c?[new Ge(a.key,c,"constants have been deprecated as of v8")]:[]}function Ht(a){for(var c=[],f=arguments.length-1;f-- >0;)c[f]=arguments[f+1];for(var x=0,S=c;x<S.length;x+=1){var I=S[x];for(var D in I)a[D]=I[D]}return a}function Zt(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Pt(a){if(Array.isArray(a))return a.map(Pt);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){var c={};for(var f in a)c[f]=Pt(a[f]);return c}return Zt(a)}var Xt=function(a){function c(f,x){a.call(this,x),this.message=x,this.key=f}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c}(Error),Dr=function(a,c){c===void 0&&(c=[]),this.parent=a,this.bindings={};for(var f=0,x=c;f<x.length;f+=1){var S=x[f];this.bindings[S[0]]=S[1]}};Dr.prototype.concat=function(a){return new Dr(this,a)},Dr.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")},Dr.prototype.has=function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var Mr={kind:"null"},Ot={kind:"number"},br={kind:"string"},sr={kind:"boolean"},lr={kind:"color"},bi={kind:"object"},pr={kind:"value"},Ii={kind:"collator"},vn={kind:"formatted"},Di={kind:"resolvedImage"};function Qi(a,c){return{kind:"array",itemType:a,N:c}}function Li(a){if(a.kind==="array"){var c=Li(a.itemType);return typeof a.N=="number"?"array<"+c+", "+a.N+">":a.itemType.kind==="value"?"array":"array<"+c+">"}return a.kind}var Xn=[Mr,Ot,br,sr,lr,vn,bi,Qi(pr),Di];function $i(a,c){if(c.kind==="error")return null;if(a.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!$i(a.itemType,c.itemType))&&(typeof a.N!="number"||a.N===c.N))return null}else{if(a.kind===c.kind)return null;if(a.kind==="value"){for(var f=0,x=Xn;f<x.length;f+=1)if(!$i(x[f],c))return null}}return"Expected "+Li(a)+" but found "+Li(c)+" instead."}function Ln(a,c){return c.some(function(f){return f.kind===a.kind})}function en(a,c){return c.some(function(f){return f==="null"?a===null:f==="array"?Array.isArray(a):f==="object"?a&&!Array.isArray(a)&&typeof a=="object":f===typeof a})}var Si=o(function(a,c){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function x(H){return(H=Math.round(H))<0?0:H>255?255:H}function S(H){return x(H[H.length-1]==="%"?parseFloat(H)/100*255:parseInt(H))}function I(H){return(Y=H[H.length-1]==="%"?parseFloat(H)/100:parseFloat(H))<0?0:Y>1?1:Y;var Y}function D(H,Y,ee){return ee<0?ee+=1:ee>1&&(ee-=1),6*ee<1?H+(Y-H)*ee*6:2*ee<1?Y:3*ee<2?H+(Y-H)*(2/3-ee)*6:H}try{c.parseCSSColor=function(H){var Y,ee=H.replace(/ /g,"").toLowerCase();if(ee in f)return f[ee].slice();if(ee[0]==="#")return ee.length===4?(Y=parseInt(ee.substr(1),16))>=0&&Y<=4095?[(3840&Y)>>4|(3840&Y)>>8,240&Y|(240&Y)>>4,15&Y|(15&Y)<<4,1]:null:ee.length===7&&(Y=parseInt(ee.substr(1),16))>=0&&Y<=16777215?[(16711680&Y)>>16,(65280&Y)>>8,255&Y,1]:null;var ie=ee.indexOf("("),se=ee.indexOf(")");if(ie!==-1&&se+1===ee.length){var Ae=ee.substr(0,ie),Te=ee.substr(ie+1,se-(ie+1)).split(","),ke=1;switch(Ae){case"rgba":if(Te.length!==4)return null;ke=I(Te.pop());case"rgb":return Te.length!==3?null:[S(Te[0]),S(Te[1]),S(Te[2]),ke];case"hsla":if(Te.length!==4)return null;ke=I(Te.pop());case"hsl":if(Te.length!==3)return null;var Ve=(parseFloat(Te[0])%360+360)%360/360,et=I(Te[1]),Xe=I(Te[2]),at=Xe<=.5?Xe*(et+1):Xe+et-Xe*et,_t=2*Xe-at;return[x(255*D(_t,at,Ve+1/3)),x(255*D(_t,at,Ve)),x(255*D(_t,at,Ve-1/3)),ke];default:return null}}return null}}catch{}}).parseCSSColor,Oi=function(a,c,f,x){x===void 0&&(x=1),this.r=a,this.g=c,this.b=f,this.a=x};Oi.parse=function(a){if(a){if(a instanceof Oi)return a;if(typeof a=="string"){var c=Si(a);if(c)return new Oi(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3])}}},Oi.prototype.toString=function(){var a=this.toArray(),c=a[1],f=a[2],x=a[3];return"rgba("+Math.round(a[0])+","+Math.round(c)+","+Math.round(f)+","+x+")"},Oi.prototype.toArray=function(){var a=this.a;return a===0?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},Oi.black=new Oi(0,0,0,1),Oi.white=new Oi(1,1,1,1),Oi.transparent=new Oi(0,0,0,0),Oi.red=new Oi(1,0,0,1);var yo=function(a,c,f){this.sensitivity=a?c?"variant":"case":c?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};yo.prototype.compare=function(a,c){return this.collator.compare(a,c)},yo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var fc=function(a,c,f,x,S){this.text=a,this.image=c,this.scale=f,this.fontStack=x,this.textColor=S},ko=function(a){this.sections=a};ko.fromString=function(a){return new ko([new fc(a,null,null,null,null)])},ko.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(a){return a.text.length!==0||a.image&&a.image.name.length!==0})},ko.factory=function(a){return a instanceof ko?a:ko.fromString(a)},ko.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(a){return a.text}).join("")},ko.prototype.serialize=function(){for(var a=["format"],c=0,f=this.sections;c<f.length;c+=1){var x=f[c];if(x.image)a.push(["image",x.image.name]);else{a.push(x.text);var S={};x.fontStack&&(S["text-font"]=["literal",x.fontStack.split(",")]),x.scale&&(S["font-scale"]=x.scale),x.textColor&&(S["text-color"]=["rgba"].concat(x.textColor.toArray())),a.push(S)}}return a};var Yo=function(a){this.name=a.name,this.available=a.available};function zs(a,c,f,x){return typeof a=="number"&&a>=0&&a<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof f=="number"&&f>=0&&f<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:"Invalid rgba value ["+[a,c,f,x].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof x=="number"?[a,c,f,x]:[a,c,f]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Uo(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Oi||a instanceof yo||a instanceof ko||a instanceof Yo)return!0;if(Array.isArray(a)){for(var c=0,f=a;c<f.length;c+=1)if(!Uo(f[c]))return!1;return!0}if(typeof a=="object"){for(var x in a)if(!Uo(a[x]))return!1;return!0}return!1}function zn(a){if(a===null)return Mr;if(typeof a=="string")return br;if(typeof a=="boolean")return sr;if(typeof a=="number")return Ot;if(a instanceof Oi)return lr;if(a instanceof yo)return Ii;if(a instanceof ko)return vn;if(a instanceof Yo)return Di;if(Array.isArray(a)){for(var c,f=a.length,x=0,S=a;x<S.length;x+=1){var I=zn(S[x]);if(c){if(c===I)continue;c=pr;break}c=I}return Qi(c||pr,f)}return bi}function ll(a){var c=typeof a;return a===null?"":c==="string"||c==="number"||c==="boolean"?String(a):a instanceof Oi||a instanceof ko||a instanceof Yo?a.toString():JSON.stringify(a)}Yo.prototype.toString=function(){return this.name},Yo.fromString=function(a){return a?new Yo({name:a,available:!1}):null},Yo.prototype.serialize=function(){return["image",this.name]};var cs=function(a,c){this.type=a,this.value=c};cs.parse=function(a,c){if(a.length!==2)return c.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!Uo(a[1]))return c.error("invalid value");var f=a[1],x=zn(f),S=c.expectedType;return x.kind!=="array"||x.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(x=S),new cs(x,f)},cs.prototype.evaluate=function(){return this.value},cs.prototype.eachChild=function(){},cs.prototype.outputDefined=function(){return!0},cs.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Oi?["rgba"].concat(this.value.toArray()):this.value instanceof ko?this.value.serialize():this.value};var zo=function(a){this.name="ExpressionEvaluationError",this.message=a};zo.prototype.toJSON=function(){return this.message};var ys={string:br,number:Ot,boolean:sr,object:bi},pn=function(a,c){this.type=a,this.args=c};pn.parse=function(a,c){if(a.length<2)return c.error("Expected at least one argument.");var f,x=1,S=a[0];if(S==="array"){var I,D;if(a.length>2){var H=a[1];if(typeof H!="string"||!(H in ys)||H==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);I=ys[H],x++}else I=pr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return c.error('The length argument to "array" must be a positive integer literal',2);D=a[2],x++}f=Qi(I,D)}else f=ys[S];for(var Y=[];x<a.length;x++){var ee=c.parse(a[x],x,pr);if(!ee)return null;Y.push(ee)}return new pn(f,Y)},pn.prototype.evaluate=function(a){for(var c=0;c<this.args.length;c++){var f=this.args[c].evaluate(a);if(!$i(this.type,zn(f)))return f;if(c===this.args.length-1)throw new zo("Expected value to be of type "+Li(this.type)+", but found "+Li(zn(f))+" instead.")}return null},pn.prototype.eachChild=function(a){this.args.forEach(a)},pn.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},pn.prototype.serialize=function(){var a=this.type,c=[a.kind];if(a.kind==="array"){var f=a.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){c.push(f.kind);var x=a.N;(typeof x=="number"||this.args.length>1)&&c.push(x)}}return c.concat(this.args.map(function(S){return S.serialize()}))};var $s=function(a){this.type=vn,this.sections=a};$s.parse=function(a,c){if(a.length<2)return c.error("Expected at least one argument.");var f=a[1];if(!Array.isArray(f)&&typeof f=="object")return c.error("First argument must be an image or text section.");for(var x=[],S=!1,I=1;I<=a.length-1;++I){var D=a[I];if(S&&typeof D=="object"&&!Array.isArray(D)){S=!1;var H=null;if(D["font-scale"]&&!(H=c.parse(D["font-scale"],1,Ot)))return null;var Y=null;if(D["text-font"]&&!(Y=c.parse(D["text-font"],1,Qi(br))))return null;var ee=null;if(D["text-color"]&&!(ee=c.parse(D["text-color"],1,lr)))return null;var ie=x[x.length-1];ie.scale=H,ie.font=Y,ie.textColor=ee}else{var se=c.parse(a[I],1,pr);if(!se)return null;var Ae=se.type.kind;if(Ae!=="string"&&Ae!=="value"&&Ae!=="null"&&Ae!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,x.push({content:se,scale:null,font:null,textColor:null})}}return new $s(x)},$s.prototype.evaluate=function(a){return new ko(this.sections.map(function(c){var f=c.content.evaluate(a);return zn(f)===Di?new fc("",f,null,null,null):new fc(ll(f),null,c.scale?c.scale.evaluate(a):null,c.font?c.font.evaluate(a).join(","):null,c.textColor?c.textColor.evaluate(a):null)}))},$s.prototype.eachChild=function(a){for(var c=0,f=this.sections;c<f.length;c+=1){var x=f[c];a(x.content),x.scale&&a(x.scale),x.font&&a(x.font),x.textColor&&a(x.textColor)}},$s.prototype.outputDefined=function(){return!1},$s.prototype.serialize=function(){for(var a=["format"],c=0,f=this.sections;c<f.length;c+=1){var x=f[c];a.push(x.content.serialize());var S={};x.scale&&(S["font-scale"]=x.scale.serialize()),x.font&&(S["text-font"]=x.font.serialize()),x.textColor&&(S["text-color"]=x.textColor.serialize()),a.push(S)}return a};var Vs=function(a){this.type=Di,this.input=a};Vs.parse=function(a,c){if(a.length!==2)return c.error("Expected two arguments.");var f=c.parse(a[1],1,br);return f?new Vs(f):c.error("No image name provided.")},Vs.prototype.evaluate=function(a){var c=this.input.evaluate(a),f=Yo.fromString(c);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(c)>-1),f},Vs.prototype.eachChild=function(a){a(this.input)},Vs.prototype.outputDefined=function(){return!1},Vs.prototype.serialize=function(){return["image",this.input.serialize()]};var Qu={"to-boolean":sr,"to-color":lr,"to-number":Ot,"to-string":br},ua=function(a,c){this.type=a,this.args=c};ua.parse=function(a,c){if(a.length<2)return c.error("Expected at least one argument.");var f=a[0];if((f==="to-boolean"||f==="to-string")&&a.length!==2)return c.error("Expected one argument.");for(var x=Qu[f],S=[],I=1;I<a.length;I++){var D=c.parse(a[I],I,pr);if(!D)return null;S.push(D)}return new ua(x,S)},ua.prototype.evaluate=function(a){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(a));if(this.type.kind==="color"){for(var c,f,x=0,S=this.args;x<S.length;x+=1){if(f=null,(c=S[x].evaluate(a))instanceof Oi)return c;if(typeof c=="string"){var I=a.parseColor(c);if(I)return I}else if(Array.isArray(c)&&!(f=c.length<3||c.length>4?"Invalid rbga value "+JSON.stringify(c)+": expected an array containing either three or four numeric values.":zs(c[0],c[1],c[2],c[3])))return new Oi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new zo(f||"Could not parse color from value '"+(typeof c=="string"?c:String(JSON.stringify(c)))+"'")}if(this.type.kind==="number"){for(var D=null,H=0,Y=this.args;H<Y.length;H+=1){if((D=Y[H].evaluate(a))===null)return 0;var ee=Number(D);if(!isNaN(ee))return ee}throw new zo("Could not convert "+JSON.stringify(D)+" to number.")}return this.type.kind==="formatted"?ko.fromString(ll(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Yo.fromString(ll(this.args[0].evaluate(a))):ll(this.args[0].evaluate(a))},ua.prototype.eachChild=function(a){this.args.forEach(a)},ua.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},ua.prototype.serialize=function(){if(this.type.kind==="formatted")return new $s([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vs(this.args[0]).serialize();var a=["to-"+this.type.kind];return this.eachChild(function(c){a.push(c.serialize())}),a};var Ua=["Unknown","Point","LineString","Polygon"],cl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};cl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},cl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Ua[this.feature.type]:this.feature.type:null},cl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},cl.prototype.canonicalID=function(){return this.canonical},cl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},cl.prototype.parseColor=function(a){var c=this._parseColorCache[a];return c||(c=this._parseColorCache[a]=Oi.parse(a)),c};var xe=function(a,c,f,x){this.name=a,this.type=c,this._evaluate=f,this.args=x};xe.prototype.evaluate=function(a){return this._evaluate(a,this.args)},xe.prototype.eachChild=function(a){this.args.forEach(a)},xe.prototype.outputDefined=function(){return!1},xe.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))},xe.parse=function(a,c){var f,x=a[0],S=xe.definitions[x];if(!S)return c.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0);for(var I=Array.isArray(S)?S[0]:S.type,D=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,H=D.filter(function(ni){var Pr=ni[0];return!Array.isArray(Pr)||Pr.length===a.length-1}),Y=null,ee=0,ie=H;ee<ie.length;ee+=1){var se=ie[ee],Ae=se[0],Te=se[1];Y=new zc(c.registry,c.path,null,c.scope);for(var ke=[],Ve=!1,et=1;et<a.length;et++){var Xe=a[et],at=Array.isArray(Ae)?Ae[et-1]:Ae.type,_t=Y.parse(Xe,1+ke.length,at);if(!_t){Ve=!0;break}ke.push(_t)}if(!Ve)if(Array.isArray(Ae)&&Ae.length!==ke.length)Y.error("Expected "+Ae.length+" arguments, but found "+ke.length+" instead.");else{for(var bt=0;bt<ke.length;bt++){var Mt=Array.isArray(Ae)?Ae[bt]:Ae.type,Ut=ke[bt];Y.concat(bt+1).checkSubtype(Mt,Ut.type)}if(Y.errors.length===0)return new xe(x,I,Te,ke)}}if(H.length===1)(f=c.errors).push.apply(f,Y.errors);else{for(var $t=(H.length?H:D).map(function(ni){var Pr;return Pr=ni[0],Array.isArray(Pr)?"("+Pr.map(Li).join(", ")+")":"("+Li(Pr.type)+"...)"}).join(" | "),Ar=[],Qr=1;Qr<a.length;Qr++){var Cr=c.parse(a[Qr],1+Ar.length);if(!Cr)return null;Ar.push(Li(Cr.type))}c.error("Expected arguments of type "+$t+", but found ("+Ar.join(", ")+") instead.")}return null},xe.register=function(a,c){for(var f in xe.definitions=c,c)a[f]=xe};var Be=function(a,c,f){this.type=Ii,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=c};function Je(a,c){a[0]=Math.min(a[0],c[0]),a[1]=Math.min(a[1],c[1]),a[2]=Math.max(a[2],c[0]),a[3]=Math.max(a[3],c[1])}function vt(a,c){return!(a[0]<=c[0]||a[2]>=c[2]||a[1]<=c[1]||a[3]>=c[3])}function tr(a,c){var f=(180+a[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,S=Math.pow(2,c.z);return[Math.round(f*S*8192),Math.round(x*S*8192)]}function qr(a,c,f){return c[1]>a[1]!=f[1]>a[1]&&a[0]<(f[0]-c[0])*(a[1]-c[1])/(f[1]-c[1])+c[0]}function sn(a,c){for(var f,x,S,I,D,H,Y,ee=!1,ie=0,se=c.length;ie<se;ie++)for(var Ae=c[ie],Te=0,ke=Ae.length;Te<ke-1;Te++){if((I=(f=a)[0]-(x=Ae[Te])[0])*(Y=f[1]-(S=Ae[Te+1])[1])-(H=f[0]-S[0])*(D=f[1]-x[1])==0&&I*H<=0&&D*Y<=0)return!1;qr(a,Ae[Te],Ae[Te+1])&&(ee=!ee)}return ee}function Co(a,c){for(var f=0;f<c.length;f++)if(sn(a,c[f]))return!0;return!1}function ts(a,c,f,x){var S=x[0]-f[0],I=x[1]-f[1],D=(a[0]-f[0])*I-S*(a[1]-f[1]),H=(c[0]-f[0])*I-S*(c[1]-f[1]);return D>0&&H<0||D<0&&H>0}function vs(a,c,f){for(var x=0,S=f;x<S.length;x+=1)for(var I=S[x],D=0;D<I.length-1;++D)if((se=[(ie=I[D+1])[0]-(ee=I[D])[0],ie[1]-ee[1]])[0]*(Ae=[(Y=c)[0]-(H=a)[0],Y[1]-H[1]])[1]-se[1]*Ae[0]!=0&&ts(H,Y,ee,ie)&&ts(ee,ie,H,Y))return!0;var H,Y,ee,ie,se,Ae;return!1}function Sa(a,c){for(var f=0;f<a.length;++f)if(!sn(a[f],c))return!1;for(var x=0;x<a.length-1;++x)if(vs(a[x],a[x+1],c))return!1;return!0}function np(a,c){for(var f=0;f<c.length;f++)if(Sa(a,c[f]))return!0;return!1}function $u(a,c,f){for(var x=[],S=0;S<a.length;S++){for(var I=[],D=0;D<a[S].length;D++){var H=tr(a[S][D],f);Je(c,H),I.push(H)}x.push(I)}return x}function Wh(a,c,f){for(var x=[],S=0;S<a.length;S++){var I=$u(a[S],c,f);x.push(I)}return x}function Wf(a,c,f,x){if(a[0]<f[0]||a[0]>f[2]){var S=.5*x,I=a[0]-f[0]>S?-x:f[0]-a[0]>S?x:0;I===0&&(I=a[0]-f[2]>S?-x:f[2]-a[0]>S?x:0),a[0]+=I}Je(c,a)}function RA(a,c,f,x){for(var S=8192*Math.pow(2,x.z),I=[8192*x.x,8192*x.y],D=[],H=0,Y=a;H<Y.length;H+=1)for(var ee=0,ie=Y[H];ee<ie.length;ee+=1){var se=ie[ee],Ae=[se.x+I[0],se.y+I[1]];Wf(Ae,c,f,S),D.push(Ae)}return D}function ef(a,c,f,x){for(var S,I=8192*Math.pow(2,x.z),D=[8192*x.x,8192*x.y],H=[],Y=0,ee=a;Y<ee.length;Y+=1){for(var ie=[],se=0,Ae=ee[Y];se<Ae.length;se+=1){var Te=Ae[se],ke=[Te.x+D[0],Te.y+D[1]];Je(c,ke),ie.push(ke)}H.push(ie)}if(c[2]-c[0]<=I/2){(S=c)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(var Ve=0,et=H;Ve<et.length;Ve+=1)for(var Xe=0,at=et[Ve];Xe<at.length;Xe+=1)Wf(at[Xe],c,f,I)}return H}Be.parse=function(a,c){if(a.length!==2)return c.error("Expected one argument.");var f=a[1];if(typeof f!="object"||Array.isArray(f))return c.error("Collator options argument must be an object.");var x=c.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,sr);if(!x)return null;var S=c.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,sr);if(!S)return null;var I=null;return f.locale&&!(I=c.parse(f.locale,1,br))?null:new Be(x,S,I)},Be.prototype.evaluate=function(a){return new yo(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)},Be.prototype.eachChild=function(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)},Be.prototype.outputDefined=function(){return!1},Be.prototype.serialize=function(){var a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var ul=function(a,c){this.type=sr,this.geojson=a,this.geometries=c};function Nc(a){if(a instanceof xe&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ul)return!1;var c=!0;return a.eachChild(function(f){c&&!Nc(f)&&(c=!1)}),c}function kc(a){if(a instanceof xe&&a.name==="feature-state")return!1;var c=!0;return a.eachChild(function(f){c&&!kc(f)&&(c=!1)}),c}function cu(a,c){if(a instanceof xe&&c.indexOf(a.name)>=0)return!1;var f=!0;return a.eachChild(function(x){f&&!cu(x,c)&&(f=!1)}),f}ul.parse=function(a,c){if(a.length!==2)return c.error("'within' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(Uo(a[1])){var f=a[1];if(f.type==="FeatureCollection")for(var x=0;x<f.features.length;++x){var S=f.features[x].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new ul(f,f.features[x].geometry)}else if(f.type==="Feature"){var I=f.geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new ul(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ul(f,f)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ul.prototype.evaluate=function(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(c,f){var x=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=c.canonicalID();if(f.type==="Polygon"){var D=$u(f.coordinates,S,I),H=RA(c.geometry(),x,S,I);if(!vt(x,S))return!1;for(var Y=0,ee=H;Y<ee.length;Y+=1)if(!sn(ee[Y],D))return!1}if(f.type==="MultiPolygon"){var ie=Wh(f.coordinates,S,I),se=RA(c.geometry(),x,S,I);if(!vt(x,S))return!1;for(var Ae=0,Te=se;Ae<Te.length;Ae+=1)if(!Co(Te[Ae],ie))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(c,f){var x=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=c.canonicalID();if(f.type==="Polygon"){var D=$u(f.coordinates,S,I),H=ef(c.geometry(),x,S,I);if(!vt(x,S))return!1;for(var Y=0,ee=H;Y<ee.length;Y+=1)if(!Sa(ee[Y],D))return!1}if(f.type==="MultiPolygon"){var ie=Wh(f.coordinates,S,I),se=ef(c.geometry(),x,S,I);if(!vt(x,S))return!1;for(var Ae=0,Te=se;Ae<Te.length;Ae+=1)if(!np(Te[Ae],ie))return!1}return!0}(a,this.geometries)}return!1},ul.prototype.eachChild=function(){},ul.prototype.outputDefined=function(){return!0},ul.prototype.serialize=function(){return["within",this.geojson]};var Uc=function(a,c){this.type=c.type,this.name=a,this.boundExpression=c};Uc.parse=function(a,c){if(a.length!==2||typeof a[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");var f=a[1];return c.scope.has(f)?new Uc(f,c.scope.get(f)):c.error('Unknown variable "'+f+'". Make sure "'+f+'" has been bound in an enclosing "let" expression before using it.',1)},Uc.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)},Uc.prototype.eachChild=function(){},Uc.prototype.outputDefined=function(){return!1},Uc.prototype.serialize=function(){return["var",this.name]};var zc=function(a,c,f,x,S){c===void 0&&(c=[]),x===void 0&&(x=new Dr),S===void 0&&(S=[]),this.registry=a,this.path=c,this.key=c.map(function(I){return"["+I+"]"}).join(""),this.scope=x,this.errors=S,this.expectedType=f};function qh(a,c){for(var f,x=a.length-1,S=0,I=x,D=0;S<=I;)if((f=a[D=Math.floor((S+I)/2)])<=c){if(D===x||c<a[D+1])return D;S=D+1}else{if(!(f>c))throw new zo("Input is not a number.");I=D-1}return 0}zc.prototype.parse=function(a,c,f,x,S){return S===void 0&&(S={}),c?this.concat(c,f,x)._parse(a,S):this._parse(a,S)},zc.prototype._parse=function(a,c){function f(ee,ie,se){return se==="assert"?new pn(ie,[ee]):se==="coerce"?new ua(ie,[ee]):ee}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var x=a[0];if(typeof x!="string")return this.error("Expression name must be a string, but found "+typeof x+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var S=this.registry[x];if(S){var I=S.parse(a,this);if(!I)return null;if(this.expectedType){var D=this.expectedType,H=I.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||H.kind!=="value")if(D.kind!=="color"&&D.kind!=="formatted"&&D.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string"){if(this.checkSubtype(D,H))return null}else I=f(I,D,c.typeAnnotation||"coerce");else I=f(I,D,c.typeAnnotation||"assert")}if(!(I instanceof cs)&&I.type.kind!=="resolvedImage"&&function ee(ie){if(ie instanceof Uc)return ee(ie.boundExpression);if(ie instanceof xe&&ie.name==="error"||ie instanceof Be||ie instanceof ul)return!1;var se=ie instanceof ua||ie instanceof pn,Ae=!0;return ie.eachChild(function(Te){Ae=se?Ae&&ee(Te):Ae&&Te instanceof cs}),!!Ae&&Nc(ie)&&cu(ie,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(I)){var Y=new cl;try{I=new cs(I.type,I.evaluate(Y))}catch(ee){return this.error(ee.message),null}}return I}return this.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof a+" instead.")},zc.prototype.concat=function(a,c,f){var x=typeof a=="number"?this.path.concat(a):this.path,S=f?this.scope.concat(f):this.scope;return new zc(this.registry,x,c||null,S,this.errors)},zc.prototype.error=function(a){for(var c=[],f=arguments.length-1;f-- >0;)c[f]=arguments[f+1];var x=""+this.key+c.map(function(S){return"["+S+"]"}).join("");this.errors.push(new Xt(x,a))},zc.prototype.checkSubtype=function(a,c){var f=$i(a,c);return f&&this.error(f),f};var fa=function(a,c,f){this.type=a,this.input=c,this.labels=[],this.outputs=[];for(var x=0,S=f;x<S.length;x+=1){var I=S[x],D=I[1];this.labels.push(I[0]),this.outputs.push(D)}};function Mo(a,c,f){return a*(1-f)+c*f}fa.parse=function(a,c){if(a.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");var f=c.parse(a[1],1,Ot);if(!f)return null;var x=[],S=null;c.expectedType&&c.expectedType.kind!=="value"&&(S=c.expectedType);for(var I=1;I<a.length;I+=2){var D=I===1?-1/0:a[I],H=a[I+1],Y=I,ee=I+1;if(typeof D!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(x.length&&x[x.length-1][0]>=D)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Y);var ie=c.parse(H,ee,S);if(!ie)return null;S=S||ie.type,x.push([D,ie])}return new fa(S,f,x)},fa.prototype.evaluate=function(a){var c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(a);var x=this.input.evaluate(a);if(x<=c[0])return f[0].evaluate(a);var S=c.length;return x>=c[S-1]?f[S-1].evaluate(a):f[qh(c,x)].evaluate(a)},fa.prototype.eachChild=function(a){a(this.input);for(var c=0,f=this.outputs;c<f.length;c+=1)a(f[c])},fa.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},fa.prototype.serialize=function(){for(var a=["step",this.input.serialize()],c=0;c<this.labels.length;c++)c>0&&a.push(this.labels[c]),a.push(this.outputs[c].serialize());return a};var uu=Object.freeze({__proto__:null,number:Mo,color:function(a,c,f){return new Oi(Mo(a.r,c.r,f),Mo(a.g,c.g,f),Mo(a.b,c.b,f),Mo(a.a,c.a,f))},array:function(a,c,f){return a.map(function(x,S){return Mo(x,c[S],f)})}}),Xh=6/29*3*(6/29),BA=Math.PI/180,OA=180/Math.PI;function qf(a){return a>.008856451679035631?Math.pow(a,1/3):a/Xh+4/29}function op(a){return a>6/29?a*a*a:Xh*(a-4/29)}function sp(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function ap(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function tf(a){var c=ap(a.r),f=ap(a.g),x=ap(a.b),S=qf((.4124564*c+.3575761*f+.1804375*x)/.95047),I=qf((.2126729*c+.7151522*f+.072175*x)/1);return{l:116*I-16,a:500*(S-I),b:200*(I-qf((.0193339*c+.119192*f+.9503041*x)/1.08883)),alpha:a.a}}function lp(a){var c=(a.l+16)/116,f=isNaN(a.a)?c:c+a.a/500,x=isNaN(a.b)?c:c-a.b/200;return c=1*op(c),f=.95047*op(f),x=1.08883*op(x),new Oi(sp(3.2404542*f-1.5371385*c-.4985314*x),sp(-.969266*f+1.8760108*c+.041556*x),sp(.0556434*f-.2040259*c+1.0572252*x),a.alpha)}function cp(a,c,f){var x=c-a;return a+f*(x>180||x<-180?x-360*Math.round(x/360):x)}var Xf={forward:tf,reverse:lp,interpolate:function(a,c,f){return{l:Mo(a.l,c.l,f),a:Mo(a.a,c.a,f),b:Mo(a.b,c.b,f),alpha:Mo(a.alpha,c.alpha,f)}}},Yf={forward:function(a){var c=tf(a),f=c.l,x=c.a,S=c.b,I=Math.atan2(S,x)*OA;return{h:I<0?I+360:I,c:Math.sqrt(x*x+S*S),l:f,alpha:a.a}},reverse:function(a){var c=a.h*BA,f=a.c;return lp({l:a.l,a:Math.cos(c)*f,b:Math.sin(c)*f,alpha:a.alpha})},interpolate:function(a,c,f){return{h:cp(a.h,c.h,f),c:Mo(a.c,c.c,f),l:Mo(a.l,c.l,f),alpha:Mo(a.alpha,c.alpha,f)}}},DA=Object.freeze({__proto__:null,lab:Xf,hcl:Yf}),P=function(a,c,f,x,S){this.type=a,this.operator=c,this.interpolation=f,this.input=x,this.labels=[],this.outputs=[];for(var I=0,D=S;I<D.length;I+=1){var H=D[I],Y=H[1];this.labels.push(H[0]),this.outputs.push(Y)}};function U(a,c,f,x){var S=x-f,I=a-f;return S===0?0:c===1?I/S:(Math.pow(c,I)-1)/(Math.pow(c,S)-1)}P.interpolationFactor=function(a,c,f,x){var S=0;if(a.name==="exponential")S=U(c,a.base,f,x);else if(a.name==="linear")S=U(c,1,f,x);else if(a.name==="cubic-bezier"){var I=a.controlPoints;S=new s(I[0],I[1],I[2],I[3]).solve(U(c,1,f,x))}return S},P.parse=function(a,c){var f=a[0],x=a[1],S=a[2],I=a.slice(3);if(!Array.isArray(x)||x.length===0)return c.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){var D=x[1];if(typeof D!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:D}}else{if(x[0]!=="cubic-bezier")return c.error("Unknown interpolation type "+String(x[0]),1,0);var H=x.slice(1);if(H.length!==4||H.some(function(et){return typeof et!="number"||et<0||et>1}))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:H}}if(a.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(!(S=c.parse(S,2,Ot)))return null;var Y=[],ee=null;f==="interpolate-hcl"||f==="interpolate-lab"?ee=lr:c.expectedType&&c.expectedType.kind!=="value"&&(ee=c.expectedType);for(var ie=0;ie<I.length;ie+=2){var se=I[ie],Ae=I[ie+1],Te=ie+3,ke=ie+4;if(typeof se!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Te);if(Y.length&&Y[Y.length-1][0]>=se)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Te);var Ve=c.parse(Ae,ke,ee);if(!Ve)return null;ee=ee||Ve.type,Y.push([se,Ve])}return ee.kind==="number"||ee.kind==="color"||ee.kind==="array"&&ee.itemType.kind==="number"&&typeof ee.N=="number"?new P(ee,f,x,S,Y):c.error("Type "+Li(ee)+" is not interpolatable.")},P.prototype.evaluate=function(a){var c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(a);var x=this.input.evaluate(a);if(x<=c[0])return f[0].evaluate(a);var S=c.length;if(x>=c[S-1])return f[S-1].evaluate(a);var I=qh(c,x),D=P.interpolationFactor(this.interpolation,x,c[I],c[I+1]),H=f[I].evaluate(a),Y=f[I+1].evaluate(a);return this.operator==="interpolate"?uu[this.type.kind.toLowerCase()](H,Y,D):this.operator==="interpolate-hcl"?Yf.reverse(Yf.interpolate(Yf.forward(H),Yf.forward(Y),D)):Xf.reverse(Xf.interpolate(Xf.forward(H),Xf.forward(Y),D))},P.prototype.eachChild=function(a){a(this.input);for(var c=0,f=this.outputs;c<f.length;c+=1)a(f[c])},P.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},P.prototype.serialize=function(){var a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var c=[this.operator,a,this.input.serialize()],f=0;f<this.labels.length;f++)c.push(this.labels[f],this.outputs[f].serialize());return c};var G=function(a,c){this.type=a,this.args=c};G.parse=function(a,c){if(a.length<2)return c.error("Expectected at least one argument.");var f=null,x=c.expectedType;x&&x.kind!=="value"&&(f=x);for(var S=[],I=0,D=a.slice(1);I<D.length;I+=1){var H=c.parse(D[I],1+S.length,f,void 0,{typeAnnotation:"omit"});if(!H)return null;f=f||H.type,S.push(H)}var Y=x&&S.some(function(ee){return $i(x,ee.type)});return new G(Y?pr:f,S)},G.prototype.evaluate=function(a){for(var c,f=null,x=0,S=0,I=this.args;S<I.length&&(x++,(f=I[S].evaluate(a))&&f instanceof Yo&&!f.available&&(c||(c=f.name),f=null,x===this.args.length&&(f=c)),f===null);S+=1);return f},G.prototype.eachChild=function(a){this.args.forEach(a)},G.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},G.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(c){a.push(c.serialize())}),a};var Q=function(a,c){this.type=c.type,this.bindings=[].concat(a),this.result=c};Q.prototype.evaluate=function(a){return this.result.evaluate(a)},Q.prototype.eachChild=function(a){for(var c=0,f=this.bindings;c<f.length;c+=1)a(f[c][1]);a(this.result)},Q.parse=function(a,c){if(a.length<4)return c.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var f=[],x=1;x<a.length-1;x+=2){var S=a[x];if(typeof S!="string")return c.error("Expected string, but found "+typeof S+" instead.",x);if(/[^a-zA-Z0-9_]/.test(S))return c.error("Variable names must contain only alphanumeric characters or '_'.",x);var I=c.parse(a[x+1],x+1);if(!I)return null;f.push([S,I])}var D=c.parse(a[a.length-1],a.length-1,c.expectedType,f);return D?new Q(f,D):null},Q.prototype.outputDefined=function(){return this.result.outputDefined()},Q.prototype.serialize=function(){for(var a=["let"],c=0,f=this.bindings;c<f.length;c+=1){var x=f[c];a.push(x[0],x[1].serialize())}return a.push(this.result.serialize()),a};var le=function(a,c,f){this.type=a,this.index=c,this.input=f};le.parse=function(a,c){if(a.length!==3)return c.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var f=c.parse(a[1],1,Ot),x=c.parse(a[2],2,Qi(c.expectedType||pr));return f&&x?new le(x.type.itemType,f,x):null},le.prototype.evaluate=function(a){var c=this.index.evaluate(a),f=this.input.evaluate(a);if(c<0)throw new zo("Array index out of bounds: "+c+" < 0.");if(c>=f.length)throw new zo("Array index out of bounds: "+c+" > "+(f.length-1)+".");if(c!==Math.floor(c))throw new zo("Array index must be an integer, but found "+c+" instead.");return f[c]},le.prototype.eachChild=function(a){a(this.index),a(this.input)},le.prototype.outputDefined=function(){return!1},le.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ce=function(a,c){this.type=sr,this.needle=a,this.haystack=c};ce.parse=function(a,c){if(a.length!==3)return c.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var f=c.parse(a[1],1,pr),x=c.parse(a[2],2,pr);return f&&x?Ln(f.type,[sr,br,Ot,Mr,pr])?new ce(f,x):c.error("Expected first argument to be of type boolean, string, number or null, but found "+Li(f.type)+" instead"):null},ce.prototype.evaluate=function(a){var c=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!en(c,["boolean","string","number","null"]))throw new zo("Expected first argument to be of type boolean, string, number or null, but found "+Li(zn(c))+" instead.");if(!en(f,["string","array"]))throw new zo("Expected second argument to be of type array or string, but found "+Li(zn(f))+" instead.");return f.indexOf(c)>=0},ce.prototype.eachChild=function(a){a(this.needle),a(this.haystack)},ce.prototype.outputDefined=function(){return!0},ce.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var _e=function(a,c,f){this.type=Ot,this.needle=a,this.haystack=c,this.fromIndex=f};_e.parse=function(a,c){if(a.length<=2||a.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var f=c.parse(a[1],1,pr),x=c.parse(a[2],2,pr);if(!f||!x)return null;if(!Ln(f.type,[sr,br,Ot,Mr,pr]))return c.error("Expected first argument to be of type boolean, string, number or null, but found "+Li(f.type)+" instead");if(a.length===4){var S=c.parse(a[3],3,Ot);return S?new _e(f,x,S):null}return new _e(f,x)},_e.prototype.evaluate=function(a){var c=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!en(c,["boolean","string","number","null"]))throw new zo("Expected first argument to be of type boolean, string, number or null, but found "+Li(zn(c))+" instead.");if(!en(f,["string","array"]))throw new zo("Expected second argument to be of type array or string, but found "+Li(zn(f))+" instead.");if(this.fromIndex){var x=this.fromIndex.evaluate(a);return f.indexOf(c,x)}return f.indexOf(c)},_e.prototype.eachChild=function(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Qe=function(a,c,f,x,S,I){this.inputType=a,this.type=c,this.input=f,this.cases=x,this.outputs=S,this.otherwise=I};Qe.parse=function(a,c){if(a.length<5)return c.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(a.length%2!=1)return c.error("Expected an even number of arguments.");var f,x;c.expectedType&&c.expectedType.kind!=="value"&&(x=c.expectedType);for(var S={},I=[],D=2;D<a.length-1;D+=2){var H=a[D],Y=a[D+1];Array.isArray(H)||(H=[H]);var ee=c.concat(D);if(H.length===0)return ee.error("Expected at least one branch label.");for(var ie=0,se=H;ie<se.length;ie+=1){var Ae=se[ie];if(typeof Ae!="number"&&typeof Ae!="string")return ee.error("Branch labels must be numbers or strings.");if(typeof Ae=="number"&&Math.abs(Ae)>Number.MAX_SAFE_INTEGER)return ee.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ae=="number"&&Math.floor(Ae)!==Ae)return ee.error("Numeric branch labels must be integer values.");if(f){if(ee.checkSubtype(f,zn(Ae)))return null}else f=zn(Ae);if(S[String(Ae)]!==void 0)return ee.error("Branch labels must be unique.");S[String(Ae)]=I.length}var Te=c.parse(Y,D,x);if(!Te)return null;x=x||Te.type,I.push(Te)}var ke=c.parse(a[1],1,pr);if(!ke)return null;var Ve=c.parse(a[a.length-1],a.length-1,x);return Ve?ke.type.kind!=="value"&&c.concat(1).checkSubtype(f,ke.type)?null:new Qe(f,x,ke,S,I,Ve):null},Qe.prototype.evaluate=function(a){var c=this.input.evaluate(a);return(zn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(a)},Qe.prototype.eachChild=function(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)},Qe.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})&&this.otherwise.outputDefined()},Qe.prototype.serialize=function(){for(var a=this,c=["match",this.input.serialize()],f=[],x={},S=0,I=Object.keys(this.cases).sort();S<I.length;S+=1){var D=I[S];(se=x[this.cases[D]])===void 0?(x[this.cases[D]]=f.length,f.push([this.cases[D],[D]])):f[se][1].push(D)}for(var H=function(Te){return a.inputType.kind==="number"?Number(Te):Te},Y=0,ee=f;Y<ee.length;Y+=1){var ie=ee[Y],se=ie[0],Ae=ie[1];c.push(Ae.length===1?H(Ae[0]):Ae.map(H)),c.push(this.outputs[outputIndex$1].serialize())}return c.push(this.otherwise.serialize()),c};var qe=function(a,c,f){this.type=a,this.branches=c,this.otherwise=f};qe.parse=function(a,c){if(a.length<4)return c.error("Expected at least 3 arguments, but found only "+(a.length-1)+".");if(a.length%2!=0)return c.error("Expected an odd number of arguments.");var f;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);for(var x=[],S=1;S<a.length-1;S+=2){var I=c.parse(a[S],S,sr);if(!I)return null;var D=c.parse(a[S+1],S+1,f);if(!D)return null;x.push([I,D]),f=f||D.type}var H=c.parse(a[a.length-1],a.length-1,f);return H?new qe(f,x,H):null},qe.prototype.evaluate=function(a){for(var c=0,f=this.branches;c<f.length;c+=1){var x=f[c],S=x[1];if(x[0].evaluate(a))return S.evaluate(a)}return this.otherwise.evaluate(a)},qe.prototype.eachChild=function(a){for(var c=0,f=this.branches;c<f.length;c+=1){var x=f[c],S=x[1];a(x[0]),a(S)}a(this.otherwise)},qe.prototype.outputDefined=function(){return this.branches.every(function(a){return a[1].outputDefined()})&&this.otherwise.outputDefined()},qe.prototype.serialize=function(){var a=["case"];return this.eachChild(function(c){a.push(c.serialize())}),a};var ct=function(a,c,f,x){this.type=a,this.input=c,this.beginIndex=f,this.endIndex=x};function Nt(a,c){return a==="=="||a==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function jt(a,c,f,x){return x.compare(c,f)===0}function dt(a,c,f){var x=a!=="=="&&a!=="!=";return function(){function S(I,D,H){this.type=sr,this.lhs=I,this.rhs=D,this.collator=H,this.hasUntypedArgument=I.type.kind==="value"||D.type.kind==="value"}return S.parse=function(I,D){if(I.length!==3&&I.length!==4)return D.error("Expected two or three arguments.");var H=I[0],Y=D.parse(I[1],1,pr);if(!Y)return null;if(!Nt(H,Y.type))return D.concat(1).error('"'+H+`" comparisons are not supported for type '`+Li(Y.type)+"'.");var ee=D.parse(I[2],2,pr);if(!ee)return null;if(!Nt(H,ee.type))return D.concat(2).error('"'+H+`" comparisons are not supported for type '`+Li(ee.type)+"'.");if(Y.type.kind!==ee.type.kind&&Y.type.kind!=="value"&&ee.type.kind!=="value")return D.error("Cannot compare types '"+Li(Y.type)+"' and '"+Li(ee.type)+"'.");x&&(Y.type.kind==="value"&&ee.type.kind!=="value"?Y=new pn(ee.type,[Y]):Y.type.kind!=="value"&&ee.type.kind==="value"&&(ee=new pn(Y.type,[ee])));var ie=null;if(I.length===4){if(Y.type.kind!=="string"&&ee.type.kind!=="string"&&Y.type.kind!=="value"&&ee.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(!(ie=D.parse(I[3],3,Ii)))return null}return new S(Y,ee,ie)},S.prototype.evaluate=function(I){var D=this.lhs.evaluate(I),H=this.rhs.evaluate(I);if(x&&this.hasUntypedArgument){var Y=zn(D),ee=zn(H);if(Y.kind!==ee.kind||Y.kind!=="string"&&Y.kind!=="number")throw new zo('Expected arguments for "'+a+'" to be (string, string) or (number, number), but found ('+Y.kind+", "+ee.kind+") instead.")}if(this.collator&&!x&&this.hasUntypedArgument){var ie=zn(D),se=zn(H);if(ie.kind!=="string"||se.kind!=="string")return c(I,D,H)}return this.collator?f(I,D,H,this.collator.evaluate(I)):c(I,D,H)},S.prototype.eachChild=function(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)},S.prototype.outputDefined=function(){return!0},S.prototype.serialize=function(){var I=[a];return this.eachChild(function(D){I.push(D.serialize())}),I},S}()}ct.parse=function(a,c){if(a.length<=2||a.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var f=c.parse(a[1],1,pr),x=c.parse(a[2],2,Ot);if(!f||!x)return null;if(!Ln(f.type,[Qi(pr),br,pr]))return c.error("Expected first argument to be of type array or string, but found "+Li(f.type)+" instead");if(a.length===4){var S=c.parse(a[3],3,Ot);return S?new ct(f.type,f,x,S):null}return new ct(f.type,f,x)},ct.prototype.evaluate=function(a){var c=this.input.evaluate(a),f=this.beginIndex.evaluate(a);if(!en(c,["string","array"]))throw new zo("Expected first argument to be of type array or string, but found "+Li(zn(c))+" instead.");if(this.endIndex){var x=this.endIndex.evaluate(a);return c.slice(f,x)}return c.slice(f)},ct.prototype.eachChild=function(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)},ct.prototype.outputDefined=function(){return!1},ct.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var fr=dt("==",function(a,c,f){return c===f},jt),mi=dt("!=",function(a,c,f){return c!==f},function(a,c,f,x){return!jt(0,c,f,x)}),ut=dt("<",function(a,c,f){return c<f},function(a,c,f,x){return x.compare(c,f)<0}),St=dt(">",function(a,c,f){return c>f},function(a,c,f,x){return x.compare(c,f)>0}),cr=dt("<=",function(a,c,f){return c<=f},function(a,c,f,x){return x.compare(c,f)<=0}),Xr=dt(">=",function(a,c,f){return c>=f},function(a,c,f,x){return x.compare(c,f)>=0}),g=function(a,c,f,x,S){this.type=br,this.number=a,this.locale=c,this.currency=f,this.minFractionDigits=x,this.maxFractionDigits=S};g.parse=function(a,c){if(a.length!==3)return c.error("Expected two arguments.");var f=c.parse(a[1],1,Ot);if(!f)return null;var x=a[2];if(typeof x!="object"||Array.isArray(x))return c.error("NumberFormat options argument must be an object.");var S=null;if(x.locale&&!(S=c.parse(x.locale,1,br)))return null;var I=null;if(x.currency&&!(I=c.parse(x.currency,1,br)))return null;var D=null;if(x["min-fraction-digits"]&&!(D=c.parse(x["min-fraction-digits"],1,Ot)))return null;var H=null;return x["max-fraction-digits"]&&!(H=c.parse(x["max-fraction-digits"],1,Ot))?null:new g(f,S,I,D,H)},g.prototype.evaluate=function(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))},g.prototype.eachChild=function(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)},g.prototype.outputDefined=function(){return!1},g.prototype.serialize=function(){var a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]};var ki=function(a){this.type=Ot,this.input=a};ki.parse=function(a,c){if(a.length!==2)return c.error("Expected 1 argument, but found "+(a.length-1)+" instead.");var f=c.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?c.error("Expected argument of type string or array, but found "+Li(f.type)+" instead."):new ki(f):null},ki.prototype.evaluate=function(a){var c=this.input.evaluate(a);if(typeof c=="string"||Array.isArray(c))return c.length;throw new zo("Expected value to be of type string or array, but found "+Li(zn(c))+" instead.")},ki.prototype.eachChild=function(a){a(this.input)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){var a=["length"];return this.eachChild(function(c){a.push(c.serialize())}),a};var Wr={"==":fr,"!=":mi,">":St,"<":ut,">=":Xr,"<=":cr,array:pn,at:le,boolean:pn,case:qe,coalesce:G,collator:Be,format:$s,image:Vs,in:ce,"index-of":_e,interpolate:P,"interpolate-hcl":P,"interpolate-lab":P,length:ki,let:Q,literal:cs,match:Qe,number:pn,"number-format":g,object:pn,slice:ct,step:fa,string:pn,"to-boolean":ua,"to-color":ua,"to-number":ua,"to-string":ua,var:Uc,within:ul};function Re(a,c){var f=c[0],x=c[1],S=c[2],I=c[3];f=f.evaluate(a),x=x.evaluate(a),S=S.evaluate(a);var D=I?I.evaluate(a):1,H=zs(f,x,S,D);if(H)throw new zo(H);return new Oi(f/255*D,x/255*D,S/255*D,D)}function Ti(a,c){return a in c}function An(a,c){var f=c[a];return f===void 0?null:f}function Qn(a){return{type:a}}function En(a){return{result:"success",value:a}}function ln(a){return{result:"error",value:a}}function $n(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function ji(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Gi(a){return!!a.expression&&a.expression.interpolated}function an(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function ea(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Yh(a){return a}function Hs(a,c,f){return a!==void 0?a:c!==void 0?c:f!==void 0?f:void 0}function Ko(a,c,f,x,S){return Hs(typeof f===S?x[f]:void 0,a.default,c.default)}function fu(a,c,f){if(an(f)!=="number")return Hs(a.default,c.default);var x=a.stops.length;if(x===1||f<=a.stops[0][0])return a.stops[0][1];if(f>=a.stops[x-1][0])return a.stops[x-1][1];var S=qh(a.stops.map(function(I){return I[0]}),f);return a.stops[S][1]}function fl(a,c,f){var x=a.base!==void 0?a.base:1;if(an(f)!=="number")return Hs(a.default,c.default);var S=a.stops.length;if(S===1||f<=a.stops[0][0])return a.stops[0][1];if(f>=a.stops[S-1][0])return a.stops[S-1][1];var I=qh(a.stops.map(function(se){return se[0]}),f),D=function(se,Ae,Te,ke){var Ve=ke-Te,et=se-Te;return Ve===0?0:Ae===1?et/Ve:(Math.pow(Ae,et)-1)/(Math.pow(Ae,Ve)-1)}(f,x,a.stops[I][0],a.stops[I+1][0]),H=a.stops[I][1],Y=a.stops[I+1][1],ee=uu[c.type]||Yh;if(a.colorSpace&&a.colorSpace!=="rgb"){var ie=DA[a.colorSpace];ee=function(se,Ae){return ie.reverse(ie.interpolate(ie.forward(se),ie.forward(Ae),D))}}return typeof H.evaluate=="function"?{evaluate:function(){for(var se=[],Ae=arguments.length;Ae--;)se[Ae]=arguments[Ae];var Te=H.evaluate.apply(void 0,se),ke=Y.evaluate.apply(void 0,se);if(Te!==void 0&&ke!==void 0)return ee(Te,ke,D)}}:ee(H,Y,D)}function hu(a,c,f){return c.type==="color"?f=Oi.parse(f):c.type==="formatted"?f=ko.fromString(f.toString()):c.type==="resolvedImage"?f=Yo.fromString(f.toString()):an(f)===c.type||c.type==="enum"&&c.values[f]||(f=void 0),Hs(f,a.default,c.default)}xe.register(Wr,{error:[{kind:"error"},[br],function(a,c){throw new zo(c[0].evaluate(a))}],typeof:[br,[pr],function(a,c){return Li(zn(c[0].evaluate(a)))}],"to-rgba":[Qi(Ot,4),[lr],function(a,c){return c[0].evaluate(a).toArray()}],rgb:[lr,[Ot,Ot,Ot],Re],rgba:[lr,[Ot,Ot,Ot,Ot],Re],has:{type:sr,overloads:[[[br],function(a,c){return Ti(c[0].evaluate(a),a.properties())}],[[br,bi],function(a,c){var f=c[1];return Ti(c[0].evaluate(a),f.evaluate(a))}]]},get:{type:pr,overloads:[[[br],function(a,c){return An(c[0].evaluate(a),a.properties())}],[[br,bi],function(a,c){var f=c[1];return An(c[0].evaluate(a),f.evaluate(a))}]]},"feature-state":[pr,[br],function(a,c){return An(c[0].evaluate(a),a.featureState||{})}],properties:[bi,[],function(a){return a.properties()}],"geometry-type":[br,[],function(a){return a.geometryType()}],id:[pr,[],function(a){return a.id()}],zoom:[Ot,[],function(a){return a.globals.zoom}],"heatmap-density":[Ot,[],function(a){return a.globals.heatmapDensity||0}],"line-progress":[Ot,[],function(a){return a.globals.lineProgress||0}],accumulated:[pr,[],function(a){return a.globals.accumulated===void 0?null:a.globals.accumulated}],"+":[Ot,Qn(Ot),function(a,c){for(var f=0,x=0,S=c;x<S.length;x+=1)f+=S[x].evaluate(a);return f}],"*":[Ot,Qn(Ot),function(a,c){for(var f=1,x=0,S=c;x<S.length;x+=1)f*=S[x].evaluate(a);return f}],"-":{type:Ot,overloads:[[[Ot,Ot],function(a,c){var f=c[1];return c[0].evaluate(a)-f.evaluate(a)}],[[Ot],function(a,c){return-c[0].evaluate(a)}]]},"/":[Ot,[Ot,Ot],function(a,c){var f=c[1];return c[0].evaluate(a)/f.evaluate(a)}],"%":[Ot,[Ot,Ot],function(a,c){var f=c[1];return c[0].evaluate(a)%f.evaluate(a)}],ln2:[Ot,[],function(){return Math.LN2}],pi:[Ot,[],function(){return Math.PI}],e:[Ot,[],function(){return Math.E}],"^":[Ot,[Ot,Ot],function(a,c){var f=c[1];return Math.pow(c[0].evaluate(a),f.evaluate(a))}],sqrt:[Ot,[Ot],function(a,c){return Math.sqrt(c[0].evaluate(a))}],log10:[Ot,[Ot],function(a,c){return Math.log(c[0].evaluate(a))/Math.LN10}],ln:[Ot,[Ot],function(a,c){return Math.log(c[0].evaluate(a))}],log2:[Ot,[Ot],function(a,c){return Math.log(c[0].evaluate(a))/Math.LN2}],sin:[Ot,[Ot],function(a,c){return Math.sin(c[0].evaluate(a))}],cos:[Ot,[Ot],function(a,c){return Math.cos(c[0].evaluate(a))}],tan:[Ot,[Ot],function(a,c){return Math.tan(c[0].evaluate(a))}],asin:[Ot,[Ot],function(a,c){return Math.asin(c[0].evaluate(a))}],acos:[Ot,[Ot],function(a,c){return Math.acos(c[0].evaluate(a))}],atan:[Ot,[Ot],function(a,c){return Math.atan(c[0].evaluate(a))}],min:[Ot,Qn(Ot),function(a,c){return Math.min.apply(Math,c.map(function(f){return f.evaluate(a)}))}],max:[Ot,Qn(Ot),function(a,c){return Math.max.apply(Math,c.map(function(f){return f.evaluate(a)}))}],abs:[Ot,[Ot],function(a,c){return Math.abs(c[0].evaluate(a))}],round:[Ot,[Ot],function(a,c){var f=c[0].evaluate(a);return f<0?-Math.round(-f):Math.round(f)}],floor:[Ot,[Ot],function(a,c){return Math.floor(c[0].evaluate(a))}],ceil:[Ot,[Ot],function(a,c){return Math.ceil(c[0].evaluate(a))}],"filter-==":[sr,[br,pr],function(a,c){var f=c[0],x=c[1];return a.properties()[f.value]===x.value}],"filter-id-==":[sr,[pr],function(a,c){var f=c[0];return a.id()===f.value}],"filter-type-==":[sr,[br],function(a,c){var f=c[0];return a.geometryType()===f.value}],"filter-<":[sr,[br,pr],function(a,c){var f=c[0],x=c[1],S=a.properties()[f.value],I=x.value;return typeof S==typeof I&&S<I}],"filter-id-<":[sr,[pr],function(a,c){var f=c[0],x=a.id(),S=f.value;return typeof x==typeof S&&x<S}],"filter->":[sr,[br,pr],function(a,c){var f=c[0],x=c[1],S=a.properties()[f.value],I=x.value;return typeof S==typeof I&&S>I}],"filter-id->":[sr,[pr],function(a,c){var f=c[0],x=a.id(),S=f.value;return typeof x==typeof S&&x>S}],"filter-<=":[sr,[br,pr],function(a,c){var f=c[0],x=c[1],S=a.properties()[f.value],I=x.value;return typeof S==typeof I&&S<=I}],"filter-id-<=":[sr,[pr],function(a,c){var f=c[0],x=a.id(),S=f.value;return typeof x==typeof S&&x<=S}],"filter->=":[sr,[br,pr],function(a,c){var f=c[0],x=c[1],S=a.properties()[f.value],I=x.value;return typeof S==typeof I&&S>=I}],"filter-id->=":[sr,[pr],function(a,c){var f=c[0],x=a.id(),S=f.value;return typeof x==typeof S&&x>=S}],"filter-has":[sr,[pr],function(a,c){return c[0].value in a.properties()}],"filter-has-id":[sr,[],function(a){return a.id()!==null&&a.id()!==void 0}],"filter-type-in":[sr,[Qi(br)],function(a,c){return c[0].value.indexOf(a.geometryType())>=0}],"filter-id-in":[sr,[Qi(pr)],function(a,c){return c[0].value.indexOf(a.id())>=0}],"filter-in-small":[sr,[br,Qi(pr)],function(a,c){var f=c[0];return c[1].value.indexOf(a.properties()[f.value])>=0}],"filter-in-large":[sr,[br,Qi(pr)],function(a,c){var f=c[0],x=c[1];return function(S,I,D,H){for(;D<=H;){var Y=D+H>>1;if(I[Y]===S)return!0;I[Y]>S?H=Y-1:D=Y+1}return!1}(a.properties()[f.value],x.value,0,x.value.length-1)}],all:{type:sr,overloads:[[[sr,sr],function(a,c){var f=c[1];return c[0].evaluate(a)&&f.evaluate(a)}],[Qn(sr),function(a,c){for(var f=0,x=c;f<x.length;f+=1)if(!x[f].evaluate(a))return!1;return!0}]]},any:{type:sr,overloads:[[[sr,sr],function(a,c){var f=c[1];return c[0].evaluate(a)||f.evaluate(a)}],[Qn(sr),function(a,c){for(var f=0,x=c;f<x.length;f+=1)if(x[f].evaluate(a))return!0;return!1}]]},"!":[sr,[sr],function(a,c){return!c[0].evaluate(a)}],"is-supported-script":[sr,[br],function(a,c){var f=a.globals&&a.globals.isSupportedScript;return!f||f(c[0].evaluate(a))}],upcase:[br,[br],function(a,c){return c[0].evaluate(a).toUpperCase()}],downcase:[br,[br],function(a,c){return c[0].evaluate(a).toLowerCase()}],concat:[br,Qn(pr),function(a,c){return c.map(function(f){return ll(f.evaluate(a))}).join("")}],"resolved-locale":[br,[Ii],function(a,c){return c[0].evaluate(a).resolvedLocale()}]});var Sn=function(a,c){this.expression=a,this._warningHistory={},this._evaluator=new cl,this._defaultValue=c?function(f){return f.type==="color"&&ea(f.default)?new Oi(0,0,0,0):f.type==="color"?Oi.parse(f.default)||null:f.default===void 0?null:f.default}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null};function ha(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Wr}function gi(a,c){var f=new zc(Wr,[],c?function(S){var I={color:lr,string:br,number:Ot,enum:br,boolean:sr,formatted:vn,resolvedImage:Di};return S.type==="array"?Qi(I[S.value]||pr,S.length):I[S.type]}(c):void 0),x=f.parse(a,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?En(new Sn(x,c)):ln(f.errors)}Sn.prototype.evaluateWithoutErrorHandling=function(a,c,f,x,S,I){return this._evaluator.globals=a,this._evaluator.feature=c,this._evaluator.featureState=f,this._evaluator.canonical=x,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)},Sn.prototype.evaluate=function(a,c,f,x,S,I){this._evaluator.globals=a,this._evaluator.feature=c||null,this._evaluator.featureState=f||null,this._evaluator.canonical=x,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I||null;try{var D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new zo("Expected value to be one of "+Object.keys(this._enumValues).map(function(H){return JSON.stringify(H)}).join(", ")+", but found "+JSON.stringify(D)+" instead.");return D}catch(H){return this._warningHistory[H.message]||(this._warningHistory[H.message]=!0,typeof console<"u"&&console.warn(H.message)),this._defaultValue}};var Fe=function(a,c){this.kind=a,this._styleExpression=c,this.isStateDependent=a!=="constant"&&!kc(c.expression)};Fe.prototype.evaluateWithoutErrorHandling=function(a,c,f,x,S,I){return this._styleExpression.evaluateWithoutErrorHandling(a,c,f,x,S,I)},Fe.prototype.evaluate=function(a,c,f,x,S,I){return this._styleExpression.evaluate(a,c,f,x,S,I)};var _i=function(a,c,f,x){this.kind=a,this.zoomStops=f,this._styleExpression=c,this.isStateDependent=a!=="camera"&&!kc(c.expression),this.interpolationType=x};function Kh(a,c){if((a=gi(a,c)).result==="error")return a;var f=a.value.expression,x=Nc(f);if(!x&&!$n(c))return ln([new Xt("","data expressions not supported")]);var S=cu(f,["zoom"]);if(!S&&!ji(c))return ln([new Xt("","zoom expressions not supported")]);var I=function D(H){var Y=null;if(H instanceof Q)Y=D(H.result);else if(H instanceof G)for(var ee=0,ie=H.args;ee<ie.length&&!(Y=D(ie[ee]));ee+=1);else(H instanceof fa||H instanceof P)&&H.input instanceof xe&&H.input.name==="zoom"&&(Y=H);return Y instanceof Xt||H.eachChild(function(se){var Ae=D(se);Ae instanceof Xt?Y=Ae:!Y&&Ae?Y=new Xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Y&&Ae&&Y!==Ae&&(Y=new Xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Y}(f);return I||S?I instanceof Xt?ln([I]):I instanceof P&&!Gi(c)?ln([new Xt("",'"interpolate" expressions cannot be used with this property')]):En(I?new _i(x?"camera":"composite",a.value,I.labels,I instanceof P?I.interpolation:void 0):new Fe(x?"constant":"source",a.value)):ln([new Xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}_i.prototype.evaluateWithoutErrorHandling=function(a,c,f,x,S,I){return this._styleExpression.evaluateWithoutErrorHandling(a,c,f,x,S,I)},_i.prototype.evaluate=function(a,c,f,x,S,I){return this._styleExpression.evaluate(a,c,f,x,S,I)},_i.prototype.interpolationFactor=function(a,c,f){return this.interpolationType?P.interpolationFactor(this.interpolationType,a,c,f):0};var Vc=function(a,c){this._parameters=a,this._specification=c,Ht(this,function f(x,S){var I,D,H,Y=S.type==="color",ee=x.stops&&typeof x.stops[0][0]=="object",ie=ee||!(ee||x.property!==void 0),se=x.type||(Gi(S)?"exponential":"interval");if(Y&&((x=Ht({},x)).stops&&(x.stops=x.stops.map(function(Cr){return[Cr[0],Oi.parse(Cr[1])]})),x.default=Oi.parse(x.default?x.default:S.default)),x.colorSpace&&x.colorSpace!=="rgb"&&!DA[x.colorSpace])throw new Error("Unknown color space: "+x.colorSpace);if(se==="exponential")I=fl;else if(se==="interval")I=fu;else if(se==="categorical"){I=Ko,D=Object.create(null);for(var Ae=0,Te=x.stops;Ae<Te.length;Ae+=1){var ke=Te[Ae];D[ke[0]]=ke[1]}H=typeof x.stops[0][0]}else{if(se!=="identity")throw new Error('Unknown function type "'+se+'"');I=hu}if(ee){for(var Ve={},et=[],Xe=0;Xe<x.stops.length;Xe++){var at=x.stops[Xe],_t=at[0].zoom;Ve[_t]===void 0&&(Ve[_t]={zoom:_t,type:x.type,property:x.property,default:x.default,stops:[]},et.push(_t)),Ve[_t].stops.push([at[0].value,at[1]])}for(var bt=[],Mt=0,Ut=et;Mt<Ut.length;Mt+=1){var $t=Ut[Mt];bt.push([Ve[$t].zoom,f(Ve[$t],S)])}var Ar={name:"linear"};return{kind:"composite",interpolationType:Ar,interpolationFactor:P.interpolationFactor.bind(void 0,Ar),zoomStops:bt.map(function(Cr){return Cr[0]}),evaluate:function(Cr,ni){var Pr=Cr.zoom;return fl({stops:bt,base:x.base},S,Pr).evaluate(Pr,ni)}}}if(ie){var Qr=se==="exponential"?{name:"exponential",base:x.base!==void 0?x.base:1}:null;return{kind:"camera",interpolationType:Qr,interpolationFactor:P.interpolationFactor.bind(void 0,Qr),zoomStops:x.stops.map(function(Cr){return Cr[0]}),evaluate:function(Cr){return I(x,S,Cr.zoom,D,H)}}}return{kind:"source",evaluate:function(Cr,ni){var Pr=ni&&ni.properties?ni.properties[x.property]:void 0;return Pr===void 0?Hs(x.default,S.default):I(x,S,Pr,D,H)}}}(this._parameters,this._specification))};function Is(a){var c=a.key,f=a.value,x=a.valueSpec||{},S=a.objectElementValidators||{},I=a.style,D=a.styleSpec,H=[],Y=an(f);if(Y!=="object")return[new Ge(c,f,"object expected, "+Y+" found")];for(var ee in f){var ie=ee.split(".")[0],se=x[ie]||x["*"],Ae=void 0;if(S[ie])Ae=S[ie];else if(x[ie])Ae=vr;else if(S["*"])Ae=S["*"];else{if(!x["*"]){H.push(new Ge(c,f[ee],'unknown property "'+ee+'"'));continue}Ae=vr}H=H.concat(Ae({key:(c&&c+".")+ee,value:f[ee],valueSpec:se,style:I,styleSpec:D,object:f,objectKey:ee},f))}for(var Te in x)S[Te]||x[Te].required&&x[Te].default===void 0&&f[Te]===void 0&&H.push(new Ge(c,f,'missing required property "'+Te+'"'));return H}function Kf(a){var c=a.value,f=a.valueSpec,x=a.style,S=a.styleSpec,I=a.key,D=a.arrayElementValidator||vr;if(an(c)!=="array")return[new Ge(I,c,"array expected, "+an(c)+" found")];if(f.length&&c.length!==f.length)return[new Ge(I,c,"array length "+f.length+" expected, length "+c.length+" found")];if(f["min-length"]&&c.length<f["min-length"])return[new Ge(I,c,"array length at least "+f["min-length"]+" expected, length "+c.length+" found")];var H={type:f.value,values:f.values};S.$version<7&&(H.function=f.function),an(f.value)==="object"&&(H=f.value);for(var Y=[],ee=0;ee<c.length;ee++)Y=Y.concat(D({array:c,arrayIndex:ee,value:c[ee],valueSpec:H,style:x,styleSpec:S,key:I+"["+ee+"]"}));return Y}function Xl(a){var c=a.key,f=a.value,x=a.valueSpec,S=an(f);return S==="number"&&f!=f&&(S="NaN"),S!=="number"?[new Ge(c,f,"number expected, "+S+" found")]:"minimum"in x&&f<x.minimum?[new Ge(c,f,f+" is less than the minimum value "+x.minimum)]:"maximum"in x&&f>x.maximum?[new Ge(c,f,f+" is greater than the maximum value "+x.maximum)]:[]}function Ie(a){var c,f,x,S=a.valueSpec,I=Zt(a.value.type),D={},H=I!=="categorical"&&a.value.property===void 0,Y=!H,ee=an(a.value.stops)==="array"&&an(a.value.stops[0])==="array"&&an(a.value.stops[0][0])==="object",ie=Is({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Te){if(I==="identity")return[new Ge(Te.key,Te.value,'identity function may not have a "stops" property')];var ke=[],Ve=Te.value;return ke=ke.concat(Kf({key:Te.key,value:Ve,valueSpec:Te.valueSpec,style:Te.style,styleSpec:Te.styleSpec,arrayElementValidator:se})),an(Ve)==="array"&&Ve.length===0&&ke.push(new Ge(Te.key,Ve,"array must have at least one stop")),ke},default:function(Te){return vr({key:Te.key,value:Te.value,valueSpec:S,style:Te.style,styleSpec:Te.styleSpec})}}});return I==="identity"&&H&&ie.push(new Ge(a.key,a.value,'missing required property "property"')),I==="identity"||a.value.stops||ie.push(new Ge(a.key,a.value,'missing required property "stops"')),I==="exponential"&&a.valueSpec.expression&&!Gi(a.valueSpec)&&ie.push(new Ge(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(Y&&!$n(a.valueSpec)?ie.push(new Ge(a.key,a.value,"property functions not supported")):H&&!ji(a.valueSpec)&&ie.push(new Ge(a.key,a.value,"zoom functions not supported"))),I!=="categorical"&&!ee||a.value.property!==void 0||ie.push(new Ge(a.key,a.value,'"property" property is required')),ie;function se(Te){var ke=[],Ve=Te.value,et=Te.key;if(an(Ve)!=="array")return[new Ge(et,Ve,"array expected, "+an(Ve)+" found")];if(Ve.length!==2)return[new Ge(et,Ve,"array length 2 expected, length "+Ve.length+" found")];if(ee){if(an(Ve[0])!=="object")return[new Ge(et,Ve,"object expected, "+an(Ve[0])+" found")];if(Ve[0].zoom===void 0)return[new Ge(et,Ve,"object stop key must have zoom")];if(Ve[0].value===void 0)return[new Ge(et,Ve,"object stop key must have value")];if(x&&x>Zt(Ve[0].zoom))return[new Ge(et,Ve[0].zoom,"stop zoom values must appear in ascending order")];Zt(Ve[0].zoom)!==x&&(x=Zt(Ve[0].zoom),f=void 0,D={}),ke=ke.concat(Is({key:et+"[0]",value:Ve[0],valueSpec:{zoom:{}},style:Te.style,styleSpec:Te.styleSpec,objectElementValidators:{zoom:Xl,value:Ae}}))}else ke=ke.concat(Ae({key:et+"[0]",value:Ve[0],valueSpec:{},style:Te.style,styleSpec:Te.styleSpec},Ve));return ha(Pt(Ve[1]))?ke.concat([new Ge(et+"[1]",Ve[1],"expressions are not allowed in function stops.")]):ke.concat(vr({key:et+"[1]",value:Ve[1],valueSpec:S,style:Te.style,styleSpec:Te.styleSpec}))}function Ae(Te,ke){var Ve=an(Te.value),et=Zt(Te.value),Xe=Te.value!==null?Te.value:ke;if(c){if(Ve!==c)return[new Ge(Te.key,Xe,Ve+" stop domain type must match previous stop domain type "+c)]}else c=Ve;if(Ve!=="number"&&Ve!=="string"&&Ve!=="boolean")return[new Ge(Te.key,Xe,"stop domain value must be a number, string, or boolean")];if(Ve!=="number"&&I!=="categorical"){var at="number expected, "+Ve+" found";return $n(S)&&I===void 0&&(at+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(Te.key,Xe,at)]}return I!=="categorical"||Ve!=="number"||isFinite(et)&&Math.floor(et)===et?I!=="categorical"&&Ve==="number"&&f!==void 0&&et<f?[new Ge(Te.key,Xe,"stop domain values must appear in ascending order")]:(f=et,I==="categorical"&&et in D?[new Ge(Te.key,Xe,"stop domain values must be unique")]:(D[et]=!0,[])):[new Ge(Te.key,Xe,"integer expected, found "+et)]}}function hl(a){var c=(a.expressionContext==="property"?Kh:gi)(Pt(a.value),a.valueSpec);if(c.result==="error")return c.value.map(function(x){return new Ge(""+a.key+x.key,a.value,x.message)});var f=c.value.expression||c.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!f.outputDefined())return[new Ge(a.key,a.value,'Invalid data expression for "'+a.propertyKey+'". Output values must be contained as literals within the expression.')];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!kc(f))return[new Ge(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!kc(f))return[new Ge(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!cu(f,["zoom","feature-state"]))return[new Ge(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Nc(f))return[new Ge(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hc(a){var c=a.key,f=a.value,x=a.valueSpec,S=[];return Array.isArray(x.values)?x.values.indexOf(Zt(f))===-1&&S.push(new Ge(c,f,"expected one of ["+x.values.join(", ")+"], "+JSON.stringify(f)+" found")):Object.keys(x.values).indexOf(Zt(f))===-1&&S.push(new Ge(c,f,"expected one of ["+Object.keys(x.values).join(", ")+"], "+JSON.stringify(f)+" found")),S}function Hc(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(var c=0,f=a.slice(1);c<f.length;c+=1){var x=f[c];if(!Hc(x)&&typeof x!="boolean")return!1}return!0;default:return!0}}Vc.deserialize=function(a){return new Vc(a._parameters,a._specification)},Vc.serialize=function(a){return{_parameters:a._parameters,_specification:a._specification}};var rf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Zf(a){if(a==null)return{filter:function(){return!0},needGeometry:!1};Hc(a)||(a=jc(a));var c=gi(a,rf);if(c.result==="error")throw new Error(c.value.map(function(f){return f.key+": "+f.message}).join(", "));return{filter:function(f,x,S){return c.value.evaluate(f,x,{},S)},needGeometry:function f(x){if(!Array.isArray(x))return!1;if(x[0]==="within")return!0;for(var S=1;S<x.length;S++)if(f(x[S]))return!0;return!1}(a)}}function Jf(a,c){return a<c?-1:a>c?1:0}function jc(a){if(!a)return!0;var c,f=a[0];return a.length<=1?f!=="any":f==="=="?du(a[1],a[2],"=="):f==="!="?Vo(du(a[1],a[2],"==")):f==="<"||f===">"||f==="<="||f===">="?du(a[1],a[2],f):f==="any"?(c=a.slice(1),["any"].concat(c.map(jc))):f==="all"?["all"].concat(a.slice(1).map(jc)):f==="none"?["all"].concat(a.slice(1).map(jc).map(Vo)):f==="in"?Zh(a[1],a.slice(2)):f==="!in"?Vo(Zh(a[1],a.slice(2))):f==="has"?za(a[1]):f==="!has"?Vo(za(a[1])):f!=="within"||a}function du(a,c,f){switch(a){case"$type":return["filter-type-"+f,c];case"$id":return["filter-id-"+f,c];default:return["filter-"+f,a,c]}}function Zh(a,c){if(c.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(function(f){return typeof f!=typeof c[0]})?["filter-in-large",a,["literal",c.sort(Jf)]]:["filter-in-small",a,["literal",c]]}}function za(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Vo(a){return["!",a]}function ze(a){return Hc(Pt(a.value))?hl(Ht({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function c(f){var x=f.value,S=f.key;if(an(x)!=="array")return[new Ge(S,x,"array expected, "+an(x)+" found")];var I,D=f.styleSpec,H=[];if(x.length<1)return[new Ge(S,x,"filter array must have at least 1 element")];switch(H=H.concat(hc({key:S+"[0]",value:x[0],valueSpec:D.filter_operator,style:f.style,styleSpec:f.styleSpec})),Zt(x[0])){case"<":case"<=":case">":case">=":x.length>=2&&Zt(x[1])==="$type"&&H.push(new Ge(S,x,'"$type" cannot be use with operator "'+x[0]+'"'));case"==":case"!=":x.length!==3&&H.push(new Ge(S,x,'filter array for operator "'+x[0]+'" must have 3 elements'));case"in":case"!in":x.length>=2&&(I=an(x[1]))!=="string"&&H.push(new Ge(S+"[1]",x[1],"string expected, "+I+" found"));for(var Y=2;Y<x.length;Y++)I=an(x[Y]),Zt(x[1])==="$type"?H=H.concat(hc({key:S+"["+Y+"]",value:x[Y],valueSpec:D.geometry_type,style:f.style,styleSpec:f.styleSpec})):I!=="string"&&I!=="number"&&I!=="boolean"&&H.push(new Ge(S+"["+Y+"]",x[Y],"string, number, or boolean expected, "+I+" found"));break;case"any":case"all":case"none":for(var ee=1;ee<x.length;ee++)H=H.concat(c({key:S+"["+ee+"]",value:x[ee],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":I=an(x[1]),x.length!==2?H.push(new Ge(S,x,'filter array for "'+x[0]+'" operator must have 2 elements')):I!=="string"&&H.push(new Ge(S+"[1]",x[1],"string expected, "+I+" found"));break;case"within":I=an(x[1]),x.length!==2?H.push(new Ge(S,x,'filter array for "'+x[0]+'" operator must have 2 elements')):I!=="object"&&H.push(new Ge(S+"[1]",x[1],"object expected, "+I+" found"))}return H}(a)}function st(a,c){var f=a.key,x=a.style,S=a.styleSpec,I=a.value,D=a.objectKey,H=S[c+"_"+a.layerType];if(!H)return[];var Y=D.match(/^(.*)-transition$/);if(c==="paint"&&Y&&H[Y[1]]&&H[Y[1]].transition)return vr({key:f,value:I,valueSpec:S.transition,style:x,styleSpec:S});var ee,ie=a.valueSpec||H[D];if(!ie)return[new Ge(f,I,'unknown property "'+D+'"')];if(an(I)==="string"&&$n(ie)&&!ie.tokens&&(ee=/^{([^}]+)}$/.exec(I)))return[new Ge(f,I,'"'+D+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ee[1])+" }`.")];var se=[];return a.layerType==="symbol"&&(D==="text-field"&&x&&!x.glyphs&&se.push(new Ge(f,I,'use of "text-field" requires a style "glyphs" property')),D==="text-font"&&ea(Pt(I))&&Zt(I.type)==="identity"&&se.push(new Ge(f,I,'"text-font" does not support identity functions'))),se.concat(vr({key:a.key,value:I,valueSpec:ie,style:x,styleSpec:S,expressionContext:"property",propertyType:c,propertyKey:D}))}function Tt(a){return st(a,"paint")}function Lt(a){return st(a,"layout")}function Gt(a){var c=[],f=a.value,x=a.key,S=a.style,I=a.styleSpec;f.type||f.ref||c.push(new Ge(x,f,'either "type" or "ref" is required'));var D,H=Zt(f.type),Y=Zt(f.ref);if(f.id)for(var ee=Zt(f.id),ie=0;ie<a.arrayIndex;ie++){var se=S.layers[ie];Zt(se.id)===ee&&c.push(new Ge(x,f.id,'duplicate layer id "'+f.id+'", previously used at line '+se.id.__line__))}if("ref"in f)["type","source","source-layer","filter","layout"].forEach(function(ke){ke in f&&c.push(new Ge(x,f[ke],'"'+ke+'" is prohibited for ref layers'))}),S.layers.forEach(function(ke){Zt(ke.id)===Y&&(D=ke)}),D?D.ref?c.push(new Ge(x,f.ref,"ref cannot reference another ref layer")):H=Zt(D.type):c.push(new Ge(x,f.ref,'ref layer "'+Y+'" not found'));else if(H!=="background")if(f.source){var Ae=S.sources&&S.sources[f.source],Te=Ae&&Zt(Ae.type);Ae?Te==="vector"&&H==="raster"?c.push(new Ge(x,f.source,'layer "'+f.id+'" requires a raster source')):Te==="raster"&&H!=="raster"?c.push(new Ge(x,f.source,'layer "'+f.id+'" requires a vector source')):Te!=="vector"||f["source-layer"]?Te==="raster-dem"&&H!=="hillshade"?c.push(new Ge(x,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="line"||!f.paint||!f.paint["line-gradient"]||Te==="geojson"&&Ae.lineMetrics||c.push(new Ge(x,f,'layer "'+f.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):c.push(new Ge(x,f,'layer "'+f.id+'" must specify a "source-layer"')):c.push(new Ge(x,f.source,'source "'+f.source+'" not found'))}else c.push(new Ge(x,f,'missing required property "source"'));return c=c.concat(Is({key:x,value:f,valueSpec:I.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vr({key:x+".type",value:f.type,valueSpec:I.layer.type,style:a.style,styleSpec:a.styleSpec,object:f,objectKey:"type"})},filter:ze,layout:function(ke){return Is({layer:f,key:ke.key,value:ke.value,style:ke.style,styleSpec:ke.styleSpec,objectElementValidators:{"*":function(Ve){return Lt(Ht({layerType:H},Ve))}}})},paint:function(ke){return Is({layer:f,key:ke.key,value:ke.value,style:ke.style,styleSpec:ke.styleSpec,objectElementValidators:{"*":function(Ve){return Tt(Ht({layerType:H},Ve))}}})}}}))}function _r(a){var c=a.value,f=a.key,x=an(c);return x!=="string"?[new Ge(f,c,"string expected, "+x+" found")]:[]}var hr={promoteId:function(a){var c=a.key,f=a.value;if(an(f)==="string")return _r({key:c,value:f});var x=[];for(var S in f)x.push.apply(x,_r({key:c+"."+S,value:f[S]}));return x}};function yr(a){var c=a.value,f=a.key,x=a.styleSpec,S=a.style;if(!c.type)return[new Ge(f,c,'"type" is required')];var I,D=Zt(c.type);switch(D){case"vector":case"raster":case"raster-dem":return Is({key:f,value:c,valueSpec:x["source_"+D.replace("-","_")],style:a.style,styleSpec:x,objectElementValidators:hr});case"geojson":if(I=Is({key:f,value:c,valueSpec:x.source_geojson,style:S,styleSpec:x,objectElementValidators:hr}),c.cluster)for(var H in c.clusterProperties){var Y=c.clusterProperties[H],ee=Y[0],ie=typeof ee=="string"?[ee,["accumulated"],["get",H]]:ee;I.push.apply(I,hl({key:f+"."+H+".map",value:Y[1],expressionContext:"cluster-map"})),I.push.apply(I,hl({key:f+"."+H+".reduce",value:ie,expressionContext:"cluster-reduce"}))}return I;case"video":return Is({key:f,value:c,valueSpec:x.source_video,style:S,styleSpec:x});case"image":return Is({key:f,value:c,valueSpec:x.source_image,style:S,styleSpec:x});case"canvas":return[new Ge(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hc({key:f+".type",value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:S,styleSpec:x})}}function Lr(a){var c=a.value,f=a.styleSpec,x=f.light,S=a.style,I=[],D=an(c);if(c===void 0)return I;if(D!=="object")return I.concat([new Ge("light",c,"object expected, "+D+" found")]);for(var H in c){var Y=H.match(/^(.*)-transition$/);I=I.concat(Y&&x[Y[1]]&&x[Y[1]].transition?vr({key:H,value:c[H],valueSpec:f.transition,style:S,styleSpec:f}):x[H]?vr({key:H,value:c[H],valueSpec:x[H],style:S,styleSpec:f}):[new Ge(H,c[H],'unknown property "'+H+'"')])}return I}var Fi={"*":function(){return[]},array:Kf,boolean:function(a){var c=a.value,f=a.key,x=an(c);return x!=="boolean"?[new Ge(f,c,"boolean expected, "+x+" found")]:[]},number:Xl,color:function(a){var c=a.key,f=a.value,x=an(f);return x!=="string"?[new Ge(c,f,"color expected, "+x+" found")]:Si(f)===null?[new Ge(c,f,'color expected, "'+f+'" found')]:[]},constants:ht,enum:hc,filter:ze,function:Ie,layer:Gt,object:Is,source:yr,light:Lr,string:_r,formatted:function(a){return _r(a).length===0?[]:hl(a)},resolvedImage:function(a){return _r(a).length===0?[]:hl(a)}};function vr(a){var c=a.value,f=a.valueSpec,x=a.styleSpec;return f.expression&&ea(Zt(c))?Ie(a):f.expression&&ha(Pt(c))?hl(a):f.type&&Fi[f.type]?Fi[f.type](a):Is(Ht({},a,{valueSpec:f.type?x[f.type]:f}))}function jr(a){var c=a.value,f=a.key,x=_r(a);return x.length||(c.indexOf("{fontstack}")===-1&&x.push(new Ge(f,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&x.push(new Ge(f,c,'"glyphs" url must include a "{range}" token'))),x}function Ci(a,c){c===void 0&&(c=Se);var f=[];return f=f.concat(vr({key:"",value:a,valueSpec:c.$root,styleSpec:c,style:a,objectElementValidators:{glyphs:jr,"*":function(){return[]}}})),a.constants&&(f=f.concat(ht({key:"constants",value:a.constants,style:a,styleSpec:c}))),fi(f)}function fi(a){return[].concat(a).sort(function(c,f){return c.line-f.line})}function Mn(a){return function(){for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];return fi(a.apply(this,c))}}Ci.source=Mn(yr),Ci.light=Mn(Lr),Ci.layer=Mn(Gt),Ci.filter=Mn(ze),Ci.paintProperty=Mn(Tt),Ci.layoutProperty=Mn(Lt);var rs=Ci,js=rs.light,Va=rs.paintProperty,ta=rs.layoutProperty;function dl(a,c){var f=!1;if(c&&c.length)for(var x=0,S=c;x<S.length;x+=1)a.fire(new tt(new Error(S[x].message))),f=!0;return f}var vo=us;function us(a,c,f){var x=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var S=new Int32Array(this.arrayBuffer);a=S[0],this.d=(c=S[1])+2*(f=S[2]);for(var I=0;I<this.d*this.d;I++){var D=S[3+I],H=S[3+I+1];x.push(D===H?null:S.subarray(D,H))}var Y=S[3+x.length+1];this.keys=S.subarray(S[3+x.length],Y),this.bboxes=S.subarray(Y),this.insert=this._insertReadonly}else{this.d=c+2*f;for(var ee=0;ee<this.d*this.d;ee++)x.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=a,this.padding=f,this.scale=c/a,this.uid=0;var ie=f/c*a;this.min=-ie,this.max=a+ie}us.prototype.insert=function(a,c,f,x,S){this._forEachCell(c,f,x,S,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(x),this.bboxes.push(S)},us.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},us.prototype._insertCell=function(a,c,f,x,S,I){this.cells[S].push(I)},us.prototype.query=function(a,c,f,x,S){var I=this.min,D=this.max;if(a<=I&&c<=I&&D<=f&&D<=x&&!S)return Array.prototype.slice.call(this.keys);var H=[];return this._forEachCell(a,c,f,x,this._queryCell,H,{},S),H},us.prototype._queryCell=function(a,c,f,x,S,I,D,H){var Y=this.cells[S];if(Y!==null)for(var ee=this.keys,ie=this.bboxes,se=0;se<Y.length;se++){var Ae=Y[se];if(D[Ae]===void 0){var Te=4*Ae;(H?H(ie[Te+0],ie[Te+1],ie[Te+2],ie[Te+3]):a<=ie[Te+2]&&c<=ie[Te+3]&&f>=ie[Te+0]&&x>=ie[Te+1])?(D[Ae]=!0,I.push(ee[Ae])):D[Ae]=!1}}},us.prototype._forEachCell=function(a,c,f,x,S,I,D,H){for(var Y=this._convertToCellCoord(a),ee=this._convertToCellCoord(c),ie=this._convertToCellCoord(f),se=this._convertToCellCoord(x),Ae=Y;Ae<=ie;Ae++)for(var Te=ee;Te<=se;Te++){var ke=this.d*Te+Ae;if((!H||H(this._convertFromCellCoord(Ae),this._convertFromCellCoord(Te),this._convertFromCellCoord(Ae+1),this._convertFromCellCoord(Te+1)))&&S.call(this,a,c,f,x,ke,I,D,H))return}},us.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},us.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},us.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,c=3+this.cells.length+1+1,f=0,x=0;x<this.cells.length;x++)f+=this.cells[x].length;var S=new Int32Array(c+f+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;for(var I=c,D=0;D<a.length;D++){var H=a[D];S[3+D]=I,S.set(H,I),I+=H.length}return S[3+a.length]=I,S.set(this.keys,I),S[3+a.length+1]=I+=this.keys.length,S.set(this.bboxes,I),I+=this.bboxes.length,S.buffer};var Jh=v.ImageData,Yg=v.ImageBitmap,xn={};function Tr(a,c,f){f===void 0&&(f={}),Object.defineProperty(c,"_classRegistryKey",{value:a,writeable:!1}),xn[a]={klass:c,omit:f.omit||[],shallow:f.shallow||[]}}for(var lo in Tr("Object",Object),vo.serialize=function(a,c){var f=a.toArrayBuffer();return c&&c.push(f),{buffer:f}},vo.deserialize=function(a){return new vo(a.buffer)},Tr("Grid",vo),Tr("Color",Oi),Tr("Error",Error),Tr("ResolvedImage",Yo),Tr("StylePropertyFunction",Vc),Tr("StyleExpression",Sn,{omit:["_evaluator"]}),Tr("ZoomDependentExpression",_i),Tr("ZoomConstantExpression",Fe),Tr("CompoundExpression",xe,{omit:["_evaluate"]}),Wr)Wr[lo]._classRegistryKey||Tr("Expression_"+lo,Wr[lo]);function Qf(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function nf(a){return Yg&&a instanceof Yg}function Ha(a,c){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Qf(a)||nf(a))return c&&c.push(a),a;if(ArrayBuffer.isView(a)){var f=a;return c&&c.push(f.buffer),f}if(a instanceof Jh)return c&&c.push(a.data.buffer),a;if(Array.isArray(a)){for(var x=[],S=0,I=a;S<I.length;S+=1)x.push(Ha(I[S],c));return x}if(typeof a=="object"){var D=a.constructor,H=D._classRegistryKey;if(!H)throw new Error("can't serialize object of unregistered class");var Y=D.serialize?D.serialize(a,c):{};if(!D.serialize){for(var ee in a)if(a.hasOwnProperty(ee)&&!(xn[H].omit.indexOf(ee)>=0)){var ie=a[ee];Y[ee]=xn[H].shallow.indexOf(ee)>=0?ie:Ha(ie,c)}a instanceof Error&&(Y.message=a.message)}if(Y.$name)throw new Error("$name property is reserved for worker serialization logic.");return H!=="Object"&&(Y.$name=H),Y}throw new Error("can't serialize object of type "+typeof a)}function ja(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Qf(a)||nf(a)||ArrayBuffer.isView(a)||a instanceof Jh)return a;if(Array.isArray(a))return a.map(ja);if(typeof a=="object"){var c=a.$name||"Object",f=xn[c].klass;if(!f)throw new Error("can't deserialize unregistered class "+c);if(f.deserialize)return f.deserialize(a);for(var x=Object.create(f.prototype),S=0,I=Object.keys(a);S<I.length;S+=1){var D=I[S];if(D!=="$name"){var H=a[D];x[D]=xn[c].shallow.indexOf(D)>=0?H:ja(H)}}return x}throw new Error("can't deserialize object of type "+typeof a)}var LA=function(){this.first=!0};LA.prototype.update=function(a,c){var f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=c),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))};var gr={"Latin-1 Supplement":function(a){return a>=128&&a<=255},Arabic:function(a){return a>=1536&&a<=1791},"Arabic Supplement":function(a){return a>=1872&&a<=1919},"Arabic Extended-A":function(a){return a>=2208&&a<=2303},"Hangul Jamo":function(a){return a>=4352&&a<=4607},"Unified Canadian Aboriginal Syllabics":function(a){return a>=5120&&a<=5759},Khmer:function(a){return a>=6016&&a<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(a){return a>=6320&&a<=6399},"General Punctuation":function(a){return a>=8192&&a<=8303},"Letterlike Symbols":function(a){return a>=8448&&a<=8527},"Number Forms":function(a){return a>=8528&&a<=8591},"Miscellaneous Technical":function(a){return a>=8960&&a<=9215},"Control Pictures":function(a){return a>=9216&&a<=9279},"Optical Character Recognition":function(a){return a>=9280&&a<=9311},"Enclosed Alphanumerics":function(a){return a>=9312&&a<=9471},"Geometric Shapes":function(a){return a>=9632&&a<=9727},"Miscellaneous Symbols":function(a){return a>=9728&&a<=9983},"Miscellaneous Symbols and Arrows":function(a){return a>=11008&&a<=11263},"CJK Radicals Supplement":function(a){return a>=11904&&a<=12031},"Kangxi Radicals":function(a){return a>=12032&&a<=12255},"Ideographic Description Characters":function(a){return a>=12272&&a<=12287},"CJK Symbols and Punctuation":function(a){return a>=12288&&a<=12351},Hiragana:function(a){return a>=12352&&a<=12447},Katakana:function(a){return a>=12448&&a<=12543},Bopomofo:function(a){return a>=12544&&a<=12591},"Hangul Compatibility Jamo":function(a){return a>=12592&&a<=12687},Kanbun:function(a){return a>=12688&&a<=12703},"Bopomofo Extended":function(a){return a>=12704&&a<=12735},"CJK Strokes":function(a){return a>=12736&&a<=12783},"Katakana Phonetic Extensions":function(a){return a>=12784&&a<=12799},"Enclosed CJK Letters and Months":function(a){return a>=12800&&a<=13055},"CJK Compatibility":function(a){return a>=13056&&a<=13311},"CJK Unified Ideographs Extension A":function(a){return a>=13312&&a<=19903},"Yijing Hexagram Symbols":function(a){return a>=19904&&a<=19967},"CJK Unified Ideographs":function(a){return a>=19968&&a<=40959},"Yi Syllables":function(a){return a>=40960&&a<=42127},"Yi Radicals":function(a){return a>=42128&&a<=42191},"Hangul Jamo Extended-A":function(a){return a>=43360&&a<=43391},"Hangul Syllables":function(a){return a>=44032&&a<=55215},"Hangul Jamo Extended-B":function(a){return a>=55216&&a<=55295},"Private Use Area":function(a){return a>=57344&&a<=63743},"CJK Compatibility Ideographs":function(a){return a>=63744&&a<=64255},"Arabic Presentation Forms-A":function(a){return a>=64336&&a<=65023},"Vertical Forms":function(a){return a>=65040&&a<=65055},"CJK Compatibility Forms":function(a){return a>=65072&&a<=65103},"Small Form Variants":function(a){return a>=65104&&a<=65135},"Arabic Presentation Forms-B":function(a){return a>=65136&&a<=65279},"Halfwidth and Fullwidth Forms":function(a){return a>=65280&&a<=65519}};function up(a){for(var c=0,f=a;c<f.length;c+=1)if(of(f[c].charCodeAt(0)))return!0;return!1}function of(a){return!(a!==746&&a!==747&&(a<4352||!(gr["Bopomofo Extended"](a)||gr.Bopomofo(a)||gr["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||gr["CJK Compatibility Ideographs"](a)||gr["CJK Compatibility"](a)||gr["CJK Radicals Supplement"](a)||gr["CJK Strokes"](a)||!(!gr["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||gr["CJK Unified Ideographs Extension A"](a)||gr["CJK Unified Ideographs"](a)||gr["Enclosed CJK Letters and Months"](a)||gr["Hangul Compatibility Jamo"](a)||gr["Hangul Jamo Extended-A"](a)||gr["Hangul Jamo Extended-B"](a)||gr["Hangul Jamo"](a)||gr["Hangul Syllables"](a)||gr.Hiragana(a)||gr["Ideographic Description Characters"](a)||gr.Kanbun(a)||gr["Kangxi Radicals"](a)||gr["Katakana Phonetic Extensions"](a)||gr.Katakana(a)&&a!==12540||!(!gr["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!gr["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||gr["Unified Canadian Aboriginal Syllabics"](a)||gr["Unified Canadian Aboriginal Syllabics Extended"](a)||gr["Vertical Forms"](a)||gr["Yijing Hexagram Symbols"](a)||gr["Yi Syllables"](a)||gr["Yi Radicals"](a))))}function Gc(a){return!(of(a)||function(c){return!!(gr["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||gr["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||gr["Letterlike Symbols"](c)||gr["Number Forms"](c)||gr["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||gr["Control Pictures"](c)&&c!==9251||gr["Optical Character Recognition"](c)||gr["Enclosed Alphanumerics"](c)||gr["Geometric Shapes"](c)||gr["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||gr["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||gr["CJK Symbols and Punctuation"](c)||gr.Katakana(c)||gr["Private Use Area"](c)||gr["CJK Compatibility Forms"](c)||gr["Small Form Variants"](c)||gr["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(a))}function pl(a){return a>=1424&&a<=2303||gr["Arabic Presentation Forms-A"](a)||gr["Arabic Presentation Forms-B"](a)}function Ca(a,c){return!(!c&&pl(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||gr.Khmer(a))}function sf(a){for(var c=0,f=a;c<f.length;c+=1)if(pl(f[c].charCodeAt(0)))return!0;return!1}var dc=null,fs="unavailable",pc=null,FA=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(fs="error"),dc&&dc(a)};function af(){NA.fire(new ye("pluginStateChange",{pluginStatus:fs,pluginURL:pc}))}var NA=new rt,kA=function(){return fs},Il=function(){if(fs!=="deferred"||!pc)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fs="loading",af(),pc&&Ml({url:pc},function(a){a?FA(a):(fs="loaded",af())})},Al={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return fs==="loaded"||Al.applyArabicShaping!=null},isLoading:function(){return fs==="loading"},setState:function(a){fs=a.pluginStatus,pc=a.pluginURL},isParsed:function(){return Al.applyArabicShaping!=null&&Al.processBidirectionalText!=null&&Al.processStyledBidirectionalText!=null},getPluginURL:function(){return pc}},qi=function(a,c){this.zoom=a,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new LA,this.transition={})};qi.prototype.isSupportedScript=function(a){return function(c,f){for(var x=0,S=c;x<S.length;x+=1)if(!Ca(S[x].charCodeAt(0),f))return!1;return!0}(a,Al.isLoaded())},qi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},qi.prototype.getCrossfadeParameters=function(){var a=this.zoom,c=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*c}};var Ac=function(a,c){this.property=a,this.value=c,this.expression=function(f,x){if(ea(f))return new Vc(f,x);if(ha(f)){var S=Kh(f,x);if(S.result==="error")throw new Error(S.value.map(function(D){return D.key+": "+D.message}).join(", "));return S.value}var I=f;return typeof f=="string"&&x.type==="color"&&(I=Oi.parse(f)),{kind:"constant",evaluate:function(){return I}}}(c===void 0?a.specification.default:c,a.specification)};Ac.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ac.prototype.possiblyEvaluate=function(a,c,f){return this.property.possiblyEvaluate(this,a,c,f)};var Pl=function(a){this.property=a,this.value=new Ac(a,void 0)};Pl.prototype.transitioned=function(a,c){return new lf(this.property,this.value,c,z({},a.transition,this.transition),a.now)},Pl.prototype.untransitioned=function(){return new lf(this.property,this.value,null,{},0)};var Gs=function(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)};Gs.prototype.getValue=function(a){return $(this._values[a].value.value)},Gs.prototype.setValue=function(a,c){this._values.hasOwnProperty(a)||(this._values[a]=new Pl(this._values[a].property)),this._values[a].value=new Ac(this._values[a].property,c===null?void 0:$(c))},Gs.prototype.getTransition=function(a){return $(this._values[a].transition)},Gs.prototype.setTransition=function(a,c){this._values.hasOwnProperty(a)||(this._values[a]=new Pl(this._values[a].property)),this._values[a].transition=$(c)||void 0},Gs.prototype.serialize=function(){for(var a={},c=0,f=Object.keys(this._values);c<f.length;c+=1){var x=f[c],S=this.getValue(x);S!==void 0&&(a[x]=S);var I=this.getTransition(x);I!==void 0&&(a[x+"-transition"]=I)}return a},Gs.prototype.transitioned=function(a,c){for(var f=new pu(this._properties),x=0,S=Object.keys(this._values);x<S.length;x+=1){var I=S[x];f._values[I]=this._values[I].transitioned(a,c._values[I])}return f},Gs.prototype.untransitioned=function(){for(var a=new pu(this._properties),c=0,f=Object.keys(this._values);c<f.length;c+=1){var x=f[c];a._values[x]=this._values[x].untransitioned()}return a};var lf=function(a,c,f,x,S){this.property=a,this.value=c,this.begin=S+x.delay||0,this.end=this.begin+x.duration||0,a.specification.transition&&(x.delay||x.duration)&&(this.prior=f)};lf.prototype.possiblyEvaluate=function(a,c,f){var x=a.now||0,S=this.value.possiblyEvaluate(a,c,f),I=this.prior;if(I){if(x>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(x<this.begin)return I.possiblyEvaluate(a,c,f);var D=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(a,c,f),S,function(H){if(H<=0)return 0;if(H>=1)return 1;var Y=H*H,ee=Y*H;return 4*(H<.5?ee:3*(H-Y)+ee-.75)}(D))}return S};var pu=function(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)};pu.prototype.possiblyEvaluate=function(a,c,f){for(var x=new Qh(this._properties),S=0,I=Object.keys(this._values);S<I.length;S+=1){var D=I[S];x._values[D]=this._values[D].possiblyEvaluate(a,c,f)}return x},pu.prototype.hasTransition=function(){for(var a=0,c=Object.keys(this._values);a<c.length;a+=1)if(this._values[c[a]].prior)return!0;return!1};var Yl=function(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)};Yl.prototype.getValue=function(a){return $(this._values[a].value)},Yl.prototype.setValue=function(a,c){this._values[a]=new Ac(this._values[a].property,c===null?void 0:$(c))},Yl.prototype.serialize=function(){for(var a={},c=0,f=Object.keys(this._values);c<f.length;c+=1){var x=f[c],S=this.getValue(x);S!==void 0&&(a[x]=S)}return a},Yl.prototype.possiblyEvaluate=function(a,c,f){for(var x=new Qh(this._properties),S=0,I=Object.keys(this._values);S<I.length;S+=1){var D=I[S];x._values[D]=this._values[D].possiblyEvaluate(a,c,f)}return x};var Ps=function(a,c,f){this.property=a,this.value=c,this.parameters=f};Ps.prototype.isConstant=function(){return this.value.kind==="constant"},Ps.prototype.constantOr=function(a){return this.value.kind==="constant"?this.value.value:a},Ps.prototype.evaluate=function(a,c,f,x){return this.property.evaluate(this.value,this.parameters,a,c,f,x)};var Qh=function(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)};Qh.prototype.get=function(a){return this._values[a]};var ei=function(a){this.specification=a};ei.prototype.possiblyEvaluate=function(a,c){return a.expression.evaluate(c)},ei.prototype.interpolate=function(a,c,f){var x=uu[this.specification.type];return x?x(a,c,f):a};var zr=function(a,c){this.specification=a,this.overrides=c};zr.prototype.possiblyEvaluate=function(a,c,f,x){return new Ps(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(c,null,{},f,x)}:a.expression,c)},zr.prototype.interpolate=function(a,c,f){if(a.value.kind!=="constant"||c.value.kind!=="constant")return a;if(a.value.value===void 0||c.value.value===void 0)return new Ps(this,{kind:"constant",value:void 0},a.parameters);var x=uu[this.specification.type];return x?new Ps(this,{kind:"constant",value:x(a.value.value,c.value.value,f)},a.parameters):a},zr.prototype.evaluate=function(a,c,f,x,S,I){return a.kind==="constant"?a.value:a.evaluate(c,f,x,S,I)};var Au=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(f,x,S,I){if(f.value===void 0)return new Ps(this,{kind:"constant",value:void 0},x);if(f.expression.kind==="constant"){var D=f.expression.evaluate(x,null,{},S,I),H=f.property.specification.type==="resolvedImage"&&typeof D!="string"?D.name:D,Y=this._calculate(H,H,H,x);return new Ps(this,{kind:"constant",value:Y},x)}if(f.expression.kind==="camera"){var ee=this._calculate(f.expression.evaluate({zoom:x.zoom-1}),f.expression.evaluate({zoom:x.zoom}),f.expression.evaluate({zoom:x.zoom+1}),x);return new Ps(this,{kind:"constant",value:ee},x)}return new Ps(this,f.expression,x)},c.prototype.evaluate=function(f,x,S,I,D,H){if(f.kind==="source"){var Y=f.evaluate(x,S,I,D,H);return this._calculate(Y,Y,Y,x)}return f.kind==="composite"?this._calculate(f.evaluate({zoom:Math.floor(x.zoom)-1},S,I),f.evaluate({zoom:Math.floor(x.zoom)},S,I),f.evaluate({zoom:Math.floor(x.zoom)+1},S,I),x):f.value},c.prototype._calculate=function(f,x,S,I){return I.zoom>I.zoomHistory.lastIntegerZoom?{from:f,to:x}:{from:S,to:x}},c.prototype.interpolate=function(f){return f},c}(zr),da=function(a){this.specification=a};da.prototype.possiblyEvaluate=function(a,c,f,x){if(a.value!==void 0){if(a.expression.kind==="constant"){var S=a.expression.evaluate(c,null,{},f,x);return this._calculate(S,S,S,c)}return this._calculate(a.expression.evaluate(new qi(Math.floor(c.zoom-1),c)),a.expression.evaluate(new qi(Math.floor(c.zoom),c)),a.expression.evaluate(new qi(Math.floor(c.zoom+1),c)),c)}},da.prototype._calculate=function(a,c,f,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:a,to:c}:{from:f,to:c}},da.prototype.interpolate=function(a){return a};var ml=function(a){this.specification=a};ml.prototype.possiblyEvaluate=function(a,c,f,x){return!!a.expression.evaluate(c,null,{},f,x)},ml.prototype.interpolate=function(){return!1};var Rs=function(a){for(var c in this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],a){var f=a[c];f.specification.overridable&&this.overridableProperties.push(c);var x=this.defaultPropertyValues[c]=new Ac(f,void 0),S=this.defaultTransitionablePropertyValues[c]=new Pl(f);this.defaultTransitioningPropertyValues[c]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=x.possiblyEvaluate({})}};Tr("DataDrivenProperty",zr),Tr("DataConstantProperty",ei),Tr("CrossFadedDataDrivenProperty",Au),Tr("CrossFadedProperty",da),Tr("ColorRampProperty",ml);var Ma=function(a){function c(f,x){if(a.call(this),this.id=f.id,this.type=f.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},f.type!=="custom"&&(this.metadata=(f=f).metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),x.layout&&(this._unevaluatedLayout=new Yl(x.layout)),x.paint)){for(var S in this._transitionablePaint=new Gs(x.paint),f.paint)this.setPaintProperty(S,f.paint[S],{validate:!1});for(var I in f.layout)this.setLayoutProperty(I,f.layout[I],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qh(x.paint)}}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},c.prototype.getLayoutProperty=function(f){return f==="visibility"?this.visibility:this._unevaluatedLayout.getValue(f)},c.prototype.setLayoutProperty=function(f,x,S){S===void 0&&(S={}),x!=null&&this._validate(ta,"layers."+this.id+".layout."+f,f,x,S)||(f!=="visibility"?this._unevaluatedLayout.setValue(f,x):this.visibility=x)},c.prototype.getPaintProperty=function(f){return j(f,"-transition")?this._transitionablePaint.getTransition(f.slice(0,-11)):this._transitionablePaint.getValue(f)},c.prototype.setPaintProperty=function(f,x,S){if(S===void 0&&(S={}),x!=null&&this._validate(Va,"layers."+this.id+".paint."+f,f,x,S))return!1;if(j(f,"-transition"))return this._transitionablePaint.setTransition(f.slice(0,-11),x||void 0),!1;var I=this._transitionablePaint._values[f],D=I.property.specification["property-type"]==="cross-faded-data-driven",H=I.value.isDataDriven(),Y=I.value;this._transitionablePaint.setValue(f,x),this._handleSpecialPaintPropertyUpdate(f);var ee=this._transitionablePaint._values[f].value;return ee.isDataDriven()||H||D||this._handleOverridablePaintPropertyUpdate(f,Y,ee)},c.prototype._handleSpecialPaintPropertyUpdate=function(f){},c.prototype._handleOverridablePaintPropertyUpdate=function(f,x,S){return!1},c.prototype.isHidden=function(f){return!!(this.minzoom&&f<this.minzoom)||!!(this.maxzoom&&f>=this.maxzoom)||this.visibility==="none"},c.prototype.updateTransitions=function(f){this._transitioningPaint=this._transitionablePaint.transitioned(f,this._transitioningPaint)},c.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},c.prototype.recalculate=function(f,x){f.getCrossfadeParameters&&(this._crossfadeParameters=f.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(f,void 0,x)),this.paint=this._transitioningPaint.possiblyEvaluate(f,void 0,x)},c.prototype.serialize=function(){var f={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(f.layout=f.layout||{},f.layout.visibility=this.visibility),fe(f,function(x,S){return!(x===void 0||S==="layout"&&!Object.keys(x).length||S==="paint"&&!Object.keys(x).length)})},c.prototype._validate=function(f,x,S,I,D){return D===void 0&&(D={}),(!D||D.validate!==!1)&&dl(this,f.call(rs,{key:x,layerType:this.type,objectKey:S,value:I,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))},c.prototype.is3D=function(){return!1},c.prototype.isTileClipped=function(){return!1},c.prototype.hasOffscreenPass=function(){return!1},c.prototype.resize=function(){},c.prototype.isStateDependent=function(){for(var f in this.paint._values){var x=this.paint.get(f);if(x instanceof Ps&&$n(x.property.specification)&&(x.value.kind==="source"||x.value.kind==="composite")&&x.value.isStateDependent)return!0}return!1},c}(rt),UA={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},$f=function(a,c){this._structArray=a,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},In=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Bs(a,c){c===void 0&&(c=1);var f=0,x=0;return{members:a.map(function(S){var I=UA[S.type].BYTES_PER_ELEMENT,D=f=zA(f,Math.max(c,I)),H=S.components||1;return x=Math.max(x,I),f+=I*H,{name:S.name,type:S.type,components:H,offset:D}}),size:zA(f,Math.max(x,c)),alignment:c}}function zA(a,c){return Math.ceil(a/c)*c}In.serialize=function(a,c){return a._trim(),c&&(a.isTransferred=!0,c.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}},In.deserialize=function(a){var c=Object.create(this.prototype);return c.arrayBuffer=a.arrayBuffer,c.length=a.length,c.capacity=a.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c},In.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},In.prototype.clear=function(){this.length=0},In.prototype.resize=function(a){this.reserve(a),this.length=a},In.prototype.reserve=function(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}},In.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Wc=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x){var S=this.length;return this.resize(S+1),this.emplace(S,f,x)},c.prototype.emplace=function(f,x,S){var I=2*f;return this.int16[I+0]=x,this.int16[I+1]=S,f},c}(In);Wc.prototype.bytesPerElement=4,Tr("StructArrayLayout2i4",Wc);var $h=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I){var D=this.length;return this.resize(D+1),this.emplace(D,f,x,S,I)},c.prototype.emplace=function(f,x,S,I,D){var H=4*f;return this.int16[H+0]=x,this.int16[H+1]=S,this.int16[H+2]=I,this.int16[H+3]=D,f},c}(In);$h.prototype.bytesPerElement=8,Tr("StructArrayLayout4i8",$h);var Rl=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H){var Y=this.length;return this.resize(Y+1),this.emplace(Y,f,x,S,I,D,H)},c.prototype.emplace=function(f,x,S,I,D,H,Y){var ee=6*f;return this.int16[ee+0]=x,this.int16[ee+1]=S,this.int16[ee+2]=I,this.int16[ee+3]=D,this.int16[ee+4]=H,this.int16[ee+5]=Y,f},c}(In);Rl.prototype.bytesPerElement=12,Tr("StructArrayLayout2i4i12",Rl);var mn=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H){var Y=this.length;return this.resize(Y+1),this.emplace(Y,f,x,S,I,D,H)},c.prototype.emplace=function(f,x,S,I,D,H,Y){var ee=4*f,ie=8*f;return this.int16[ee+0]=x,this.int16[ee+1]=S,this.uint8[ie+4]=I,this.uint8[ie+5]=D,this.uint8[ie+6]=H,this.uint8[ie+7]=Y,f},c}(In);mn.prototype.bytesPerElement=8,Tr("StructArrayLayout2i4ub8",mn);var eh=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x){var S=this.length;return this.resize(S+1),this.emplace(S,f,x)},c.prototype.emplace=function(f,x,S){var I=2*f;return this.float32[I+0]=x,this.float32[I+1]=S,f},c}(In);eh.prototype.bytesPerElement=8,Tr("StructArrayLayout2f8",eh);var mc=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H,Y,ee,ie,se){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,f,x,S,I,D,H,Y,ee,ie,se)},c.prototype.emplace=function(f,x,S,I,D,H,Y,ee,ie,se,Ae){var Te=10*f;return this.uint16[Te+0]=x,this.uint16[Te+1]=S,this.uint16[Te+2]=I,this.uint16[Te+3]=D,this.uint16[Te+4]=H,this.uint16[Te+5]=Y,this.uint16[Te+6]=ee,this.uint16[Te+7]=ie,this.uint16[Te+8]=se,this.uint16[Te+9]=Ae,f},c}(In);mc.prototype.bytesPerElement=20,Tr("StructArrayLayout10ui20",mc);var fp=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H,Y,ee,ie,se,Ae,Te){var ke=this.length;return this.resize(ke+1),this.emplace(ke,f,x,S,I,D,H,Y,ee,ie,se,Ae,Te)},c.prototype.emplace=function(f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke){var Ve=12*f;return this.int16[Ve+0]=x,this.int16[Ve+1]=S,this.int16[Ve+2]=I,this.int16[Ve+3]=D,this.uint16[Ve+4]=H,this.uint16[Ve+5]=Y,this.uint16[Ve+6]=ee,this.uint16[Ve+7]=ie,this.int16[Ve+8]=se,this.int16[Ve+9]=Ae,this.int16[Ve+10]=Te,this.int16[Ve+11]=ke,f},c}(In);fp.prototype.bytesPerElement=24,Tr("StructArrayLayout4i4ui4i24",fp);var th=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S){var I=this.length;return this.resize(I+1),this.emplace(I,f,x,S)},c.prototype.emplace=function(f,x,S,I){var D=3*f;return this.float32[D+0]=x,this.float32[D+1]=S,this.float32[D+2]=I,f},c}(In);th.prototype.bytesPerElement=12,Tr("StructArrayLayout3f12",th);var ed=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f){var x=this.length;return this.resize(x+1),this.emplace(x,f)},c.prototype.emplace=function(f,x){return this.uint32[1*f+0]=x,f},c}(In);ed.prototype.bytesPerElement=4,Tr("StructArrayLayout1ul4",ed);var VA=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H,Y,ee,ie){var se=this.length;return this.resize(se+1),this.emplace(se,f,x,S,I,D,H,Y,ee,ie)},c.prototype.emplace=function(f,x,S,I,D,H,Y,ee,ie,se){var Ae=10*f,Te=5*f;return this.int16[Ae+0]=x,this.int16[Ae+1]=S,this.int16[Ae+2]=I,this.int16[Ae+3]=D,this.int16[Ae+4]=H,this.int16[Ae+5]=Y,this.uint32[Te+3]=ee,this.uint16[Ae+8]=ie,this.uint16[Ae+9]=se,f},c}(In);VA.prototype.bytesPerElement=20,Tr("StructArrayLayout6i1ul2ui20",VA);var rh=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H){var Y=this.length;return this.resize(Y+1),this.emplace(Y,f,x,S,I,D,H)},c.prototype.emplace=function(f,x,S,I,D,H,Y){var ee=6*f;return this.int16[ee+0]=x,this.int16[ee+1]=S,this.int16[ee+2]=I,this.int16[ee+3]=D,this.int16[ee+4]=H,this.int16[ee+5]=Y,f},c}(In);rh.prototype.bytesPerElement=12,Tr("StructArrayLayout2i2i2i12",rh);var xs=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D){var H=this.length;return this.resize(H+1),this.emplace(H,f,x,S,I,D)},c.prototype.emplace=function(f,x,S,I,D,H){var Y=4*f,ee=8*f;return this.float32[Y+0]=x,this.float32[Y+1]=S,this.float32[Y+2]=I,this.int16[ee+6]=D,this.int16[ee+7]=H,f},c}(In);xs.prototype.bytesPerElement=16,Tr("StructArrayLayout2f1f2i16",xs);var td=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I){var D=this.length;return this.resize(D+1),this.emplace(D,f,x,S,I)},c.prototype.emplace=function(f,x,S,I,D){var H=12*f,Y=3*f;return this.uint8[H+0]=x,this.uint8[H+1]=S,this.float32[Y+1]=I,this.float32[Y+2]=D,f},c}(In);td.prototype.bytesPerElement=12,Tr("StructArrayLayout2ub2f12",td);var Ga=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S){var I=this.length;return this.resize(I+1),this.emplace(I,f,x,S)},c.prototype.emplace=function(f,x,S,I){var D=3*f;return this.uint16[D+0]=x,this.uint16[D+1]=S,this.uint16[D+2]=I,f},c}(In);Ga.prototype.bytesPerElement=6,Tr("StructArrayLayout3ui6",Ga);var mu=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke,Ve,et,Xe,at){var _t=this.length;return this.resize(_t+1),this.emplace(_t,f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke,Ve,et,Xe,at)},c.prototype.emplace=function(f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke,Ve,et,Xe,at,_t){var bt=24*f,Mt=12*f,Ut=48*f;return this.int16[bt+0]=x,this.int16[bt+1]=S,this.uint16[bt+2]=I,this.uint16[bt+3]=D,this.uint32[Mt+2]=H,this.uint32[Mt+3]=Y,this.uint32[Mt+4]=ee,this.uint16[bt+10]=ie,this.uint16[bt+11]=se,this.uint16[bt+12]=Ae,this.float32[Mt+7]=Te,this.float32[Mt+8]=ke,this.uint8[Ut+36]=Ve,this.uint8[Ut+37]=et,this.uint8[Ut+38]=Xe,this.uint32[Mt+10]=at,this.int16[bt+22]=_t,f},c}(In);mu.prototype.bytesPerElement=48,Tr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",mu);var ih=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke,Ve,et,Xe,at,_t,bt,Mt,Ut,$t,Ar,Qr,Cr,ni,Pr,Vi){var Ai=this.length;return this.resize(Ai+1),this.emplace(Ai,f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke,Ve,et,Xe,at,_t,bt,Mt,Ut,$t,Ar,Qr,Cr,ni,Pr,Vi)},c.prototype.emplace=function(f,x,S,I,D,H,Y,ee,ie,se,Ae,Te,ke,Ve,et,Xe,at,_t,bt,Mt,Ut,$t,Ar,Qr,Cr,ni,Pr,Vi,Ai){var Gr=34*f,rn=17*f;return this.int16[Gr+0]=x,this.int16[Gr+1]=S,this.int16[Gr+2]=I,this.int16[Gr+3]=D,this.int16[Gr+4]=H,this.int16[Gr+5]=Y,this.int16[Gr+6]=ee,this.int16[Gr+7]=ie,this.uint16[Gr+8]=se,this.uint16[Gr+9]=Ae,this.uint16[Gr+10]=Te,this.uint16[Gr+11]=ke,this.uint16[Gr+12]=Ve,this.uint16[Gr+13]=et,this.uint16[Gr+14]=Xe,this.uint16[Gr+15]=at,this.uint16[Gr+16]=_t,this.uint16[Gr+17]=bt,this.uint16[Gr+18]=Mt,this.uint16[Gr+19]=Ut,this.uint16[Gr+20]=$t,this.uint16[Gr+21]=Ar,this.uint16[Gr+22]=Qr,this.uint32[rn+12]=Cr,this.float32[rn+13]=ni,this.float32[rn+14]=Pr,this.float32[rn+15]=Vi,this.float32[rn+16]=Ai,f},c}(In);ih.prototype.bytesPerElement=68,Tr("StructArrayLayout8i15ui1ul4f68",ih);var gu=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f){var x=this.length;return this.resize(x+1),this.emplace(x,f)},c.prototype.emplace=function(f,x){return this.float32[1*f+0]=x,f},c}(In);gu.prototype.bytesPerElement=4,Tr("StructArrayLayout1f4",gu);var Zo=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S){var I=this.length;return this.resize(I+1),this.emplace(I,f,x,S)},c.prototype.emplace=function(f,x,S,I){var D=3*f;return this.int16[D+0]=x,this.int16[D+1]=S,this.int16[D+2]=I,f},c}(In);Zo.prototype.bytesPerElement=6,Tr("StructArrayLayout3i6",Zo);var hp=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S){var I=this.length;return this.resize(I+1),this.emplace(I,f,x,S)},c.prototype.emplace=function(f,x,S,I){var D=4*f;return this.uint32[2*f+0]=x,this.uint16[D+2]=S,this.uint16[D+3]=I,f},c}(In);hp.prototype.bytesPerElement=8,Tr("StructArrayLayout1ul2ui8",hp);var cf=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x){var S=this.length;return this.resize(S+1),this.emplace(S,f,x)},c.prototype.emplace=function(f,x,S){var I=2*f;return this.uint16[I+0]=x,this.uint16[I+1]=S,f},c}(In);cf.prototype.bytesPerElement=4,Tr("StructArrayLayout2ui4",cf);var _u=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f){var x=this.length;return this.resize(x+1),this.emplace(x,f)},c.prototype.emplace=function(f,x){return this.uint16[1*f+0]=x,f},c}(In);_u.prototype.bytesPerElement=2,Tr("StructArrayLayout1ui2",_u);var yu=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(f,x,S,I){var D=this.length;return this.resize(D+1),this.emplace(D,f,x,S,I)},c.prototype.emplace=function(f,x,S,I,D){var H=4*f;return this.float32[H+0]=x,this.float32[H+1]=S,this.float32[H+2]=I,this.float32[H+3]=D,f},c}(In);yu.prototype.bytesPerElement=16,Tr("StructArrayLayout4f16",yu);var d=function(a){function c(){a.apply(this,arguments)}a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c;var f={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return f.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},f.x1.get=function(){return this._structArray.int16[this._pos2+2]},f.y1.get=function(){return this._structArray.int16[this._pos2+3]},f.x2.get=function(){return this._structArray.int16[this._pos2+4]},f.y2.get=function(){return this._structArray.int16[this._pos2+5]},f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(c.prototype,f),c}($f);d.prototype.size=20;var _=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.get=function(f){return new d(this,f)},c}(VA);Tr("CollisionBoxArray",_);var p=function(a){function c(){a.apply(this,arguments)}a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},f.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},f.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},f.segment.get=function(){return this._structArray.uint16[this._pos2+10]},f.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},f.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},f.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},f.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},f.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},f.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},f.placedOrientation.set=function(x){this._structArray.uint8[this._pos1+37]=x},f.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},f.hidden.set=function(x){this._structArray.uint8[this._pos1+38]=x},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},f.crossTileID.set=function(x){this._structArray.uint32[this._pos4+10]=x},f.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(c.prototype,f),c}($f);p.prototype.size=48;var b=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.get=function(f){return new p(this,f)},c}(mu);Tr("PlacedSymbolArray",b);var B=function(a){function c(){a.apply(this,arguments)}a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},f.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},f.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},f.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},f.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},f.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},f.key.get=function(){return this._structArray.uint16[this._pos2+8]},f.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},f.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},f.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},f.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},f.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},f.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},f.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},f.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},f.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},f.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},f.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},f.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},f.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},f.crossTileID.set=function(x){this._structArray.uint32[this._pos4+12]=x},f.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},f.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},f.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},f.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(c.prototype,f),c}($f);B.prototype.size=68;var k=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.get=function(f){return new B(this,f)},c}(ih);Tr("SymbolInstanceArray",k);var V=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.getoffsetX=function(f){return this.float32[1*f+0]},c}(gu);Tr("GlyphOffsetArray",V);var q=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.getx=function(f){return this.int16[3*f+0]},c.prototype.gety=function(f){return this.int16[3*f+1]},c.prototype.gettileUnitDistanceFromAnchor=function(f){return this.int16[3*f+2]},c}(Zo);Tr("SymbolLineVertexArray",q);var re=function(a){function c(){a.apply(this,arguments)}a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c;var f={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(c.prototype,f),c}($f);re.prototype.size=8;var ue=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.get=function(f){return new re(this,f)},c}(hp);Tr("FeatureIndexArray",ue);var Ee=Bs([{name:"a_pos",components:2,type:"Int16"}],4).members,Ce=function(a){a===void 0&&(a=[]),this.segments=a};function Me(a,c){return 256*(a=O(Math.floor(a),0,255))+O(Math.floor(c),0,255)}Ce.prototype.prepareSegment=function(a,c,f,x){var S=this.segments[this.segments.length-1];return a>Ce.MAX_VERTEX_ARRAY_LENGTH&&we("Max vertices per segment is "+Ce.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+a),(!S||S.vertexLength+a>Ce.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==x)&&(S={vertexOffset:c.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},x!==void 0&&(S.sortKey=x),this.segments.push(S)),S},Ce.prototype.get=function(){return this.segments},Ce.prototype.destroy=function(){for(var a=0,c=this.segments;a<c.length;a+=1){var f=c[a];for(var x in f.vaos)f.vaos[x].destroy()}},Ce.simpleSegment=function(a,c,f,x){return new Ce([{vertexOffset:a,primitiveOffset:c,vertexLength:f,primitiveLength:x,vaos:{},sortKey:0}])},Ce.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tr("SegmentVector",Ce);var He=Bs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ue=o(function(a){a.exports=function(c,f){var x,S,I,D,H,Y,ee,ie;for(S=c.length-(x=3&c.length),I=f,H=3432918353,Y=461845907,ie=0;ie<S;)ee=255&c.charCodeAt(ie)|(255&c.charCodeAt(++ie))<<8|(255&c.charCodeAt(++ie))<<16|(255&c.charCodeAt(++ie))<<24,++ie,I=27492+(65535&(D=5*(65535&(I=(I^=ee=(65535&(ee=(ee=(65535&ee)*H+(((ee>>>16)*H&65535)<<16)&4294967295)<<15|ee>>>17))*Y+(((ee>>>16)*Y&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(ee=0,x){case 3:ee^=(255&c.charCodeAt(ie+2))<<16;case 2:ee^=(255&c.charCodeAt(ie+1))<<8;case 1:I^=ee=(65535&(ee=(ee=(65535&(ee^=255&c.charCodeAt(ie)))*H+(((ee>>>16)*H&65535)<<16)&4294967295)<<15|ee>>>17))*Y+(((ee>>>16)*Y&65535)<<16)&4294967295}return I^=c.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0}}),Ze=o(function(a){a.exports=function(c,f){for(var x,S=c.length,I=f^S,D=0;S>=4;)x=1540483477*(65535&(x=255&c.charCodeAt(D)|(255&c.charCodeAt(++D))<<8|(255&c.charCodeAt(++D))<<16|(255&c.charCodeAt(++D))<<24))+((1540483477*(x>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),S-=4,++D;switch(S){case 3:I^=(255&c.charCodeAt(D+2))<<16;case 2:I^=(255&c.charCodeAt(D+1))<<8;case 1:I=1540483477*(65535&(I^=255&c.charCodeAt(D)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0}}),Ne=Ue,Ke=Ze;Ne.murmur3=Ue,Ne.murmur2=Ke;var it=function(){this.ids=[],this.positions=[],this.indexed=!1};it.prototype.add=function(a,c,f,x){this.ids.push(Ct(a)),this.positions.push(c,f,x)},it.prototype.getPositions=function(a){for(var c=Ct(a),f=0,x=this.ids.length-1;f<x;){var S=f+x>>1;this.ids[S]>=c?x=S:f=S+1}for(var I=[];this.ids[f]===c;)I.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return I},it.serialize=function(a,c){var f=new Float64Array(a.ids),x=new Uint32Array(a.positions);return function S(I,D,H,Y){for(;H<Y;){for(var ee=I[H+Y>>1],ie=H-1,se=Y+1;;){do ie++;while(I[ie]<ee);do se--;while(I[se]>ee);if(ie>=se)break;xt(I,ie,se),xt(D,3*ie,3*se),xt(D,3*ie+1,3*se+1),xt(D,3*ie+2,3*se+2)}se-H<Y-se?(S(I,D,H,se),H=se+1):(S(I,D,se+1,Y),Y=se)}}(f,x,0,f.length-1),c&&c.push(f.buffer,x.buffer),{ids:f,positions:x}},it.deserialize=function(a){var c=new it;return c.ids=a.ids,c.positions=a.positions,c.indexed=!0,c};var pt=Math.pow(2,53)-1;function Ct(a){var c=+a;return!isNaN(c)&&c<=pt?c:Ne(String(a))}function xt(a,c,f){var x=a[c];a[c]=a[f],a[f]=x}Tr("FeaturePositionMap",it);var Rt=function(a,c){this.gl=a.gl,this.location=c},Wt=function(a){function c(f,x){a.call(this,f,x),this.current=0}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))},c}(Rt),ar=function(a){function c(f,x){a.call(this,f,x),this.current=0}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))},c}(Rt),ir=function(a){function c(f,x){a.call(this,f,x),this.current=[0,0]}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))},c}(Rt),Ir=function(a){function c(f,x){a.call(this,f,x),this.current=[0,0,0]}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))},c}(Rt),ti=function(a){function c(f,x){a.call(this,f,x),this.current=[0,0,0,0]}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3]))},c}(Rt),oi=function(a){function c(f,x){a.call(this,f,x),this.current=Oi.transparent}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a))},c}(Rt),ii=new Float32Array(16),hn=function(a){function c(f,x){a.call(this,f,x),this.current=ii}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.set=function(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(var x=1;x<16;x++)if(f[x]!==this.current[x]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}},c}(Rt);function Or(a){return[Me(255*a.r,255*a.g),Me(255*a.b,255*a.a)]}var yi=function(a,c,f){this.value=a,this.uniformNames=c.map(function(x){return"u_"+x}),this.type=f};yi.prototype.setUniform=function(a,c,f){a.set(f.constantOr(this.value))},yi.prototype.getBinding=function(a,c,f){return this.type==="color"?new oi(a,c):new ar(a,c)};var vi=function(a,c){this.uniformNames=c.map(function(f){return"u_"+f}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};vi.prototype.setConstantPatternPositions=function(a,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=a.tlbr},vi.prototype.setUniform=function(a,c,f,x){var S=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)},vi.prototype.getBinding=function(a,c,f){return f.substr(0,9)==="u_pattern"?new ti(a,c):new ar(a,c)};var di=function(a,c,f,x){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=c.map(function(S){return{name:"a_"+S,type:"Float32",components:f==="color"?2:1,offset:0}}),this.paintVertexArray=new x};di.prototype.populatePaintArray=function(a,c,f,x,S){var I=this.paintVertexArray.length,D=this.expression.evaluate(new qi(0),c,{},x,[],S);this.paintVertexArray.resize(a),this._setPaintValue(I,a,D)},di.prototype.updatePaintArray=function(a,c,f,x){var S=this.expression.evaluate({zoom:0},f,x);this._setPaintValue(a,c,S)},di.prototype._setPaintValue=function(a,c,f){if(this.type==="color")for(var x=Or(f),S=a;S<c;S++)this.paintVertexArray.emplace(S,x[0],x[1]);else{for(var I=a;I<c;I++)this.paintVertexArray.emplace(I,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}},di.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},di.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var pi=function(a,c,f,x,S,I){this.expression=a,this.uniformNames=c.map(function(D){return"u_"+D+"_t"}),this.type=f,this.useIntegerZoom=x,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=c.map(function(D){return{name:"a_"+D,type:"Float32",components:f==="color"?4:2,offset:0}}),this.paintVertexArray=new I};pi.prototype.populatePaintArray=function(a,c,f,x,S){var I=this.expression.evaluate(new qi(this.zoom),c,{},x,[],S),D=this.expression.evaluate(new qi(this.zoom+1),c,{},x,[],S),H=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(H,a,I,D)},pi.prototype.updatePaintArray=function(a,c,f,x){var S=this.expression.evaluate({zoom:this.zoom},f,x),I=this.expression.evaluate({zoom:this.zoom+1},f,x);this._setPaintValue(a,c,S,I)},pi.prototype._setPaintValue=function(a,c,f,x){if(this.type==="color")for(var S=Or(f),I=Or(x),D=a;D<c;D++)this.paintVertexArray.emplace(D,S[0],S[1],I[0],I[1]);else{for(var H=a;H<c;H++)this.paintVertexArray.emplace(H,f,x);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(x))}},pi.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},pi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},pi.prototype.setUniform=function(a,c){var f=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,x=O(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(x)},pi.prototype.getBinding=function(a,c,f){return new ar(a,c)};var Pi=function(a,c,f,x,S,I){this.expression=a,this.type=c,this.useIntegerZoom=f,this.zoom=x,this.layerId=I,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S};Pi.prototype.populatePaintArray=function(a,c,f){var x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(x,a,c.patterns&&c.patterns[this.layerId],f)},Pi.prototype.updatePaintArray=function(a,c,f,x,S){this._setPaintValues(a,c,f.patterns&&f.patterns[this.layerId],S)},Pi.prototype._setPaintValues=function(a,c,f,x){if(x&&f){var S=x[f.min],I=x[f.mid],D=x[f.max];if(S&&I&&D)for(var H=a;H<c;H++)this.zoomInPaintVertexArray.emplace(H,I.tl[0],I.tl[1],I.br[0],I.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],I.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,I.tl[0],I.tl[1],I.br[0],I.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],I.pixelRatio,D.pixelRatio)}},Pi.prototype.upload=function(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,He.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,He.members,this.expression.isStateDependent))},Pi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var hi=function(a,c,f){this.binders={},this._buffers=[];var x=[];for(var S in a.paint._values)if(f(S)){var I=a.paint.get(S);if(I instanceof Ps&&$n(I.property.specification)){var D=bs(S,a.type),H=I.value,Y=I.property.specification.type,ee=I.property.useIntegerZoom,ie=I.property.specification["property-type"],se=ie==="cross-faded"||ie==="cross-faded-data-driven";if(H.kind==="constant")this.binders[S]=se?new vi(H.value,D):new yi(H.value,D,Y),x.push("/u_"+S);else if(H.kind==="source"||se){var Ae=Yn(S,Y,"source");this.binders[S]=se?new Pi(H,Y,ee,c,Ae,a.id):new di(H,D,Y,Ae),x.push("/a_"+S)}else{var Te=Yn(S,Y,"composite");this.binders[S]=new pi(H,D,Y,ee,c,Te),x.push("/z_"+S)}}}this.cacheKey=x.sort().join("")};hi.prototype.getMaxValue=function(a){var c=this.binders[a];return c instanceof di||c instanceof pi?c.maxValue:0},hi.prototype.populatePaintArrays=function(a,c,f,x,S){for(var I in this.binders){var D=this.binders[I];(D instanceof di||D instanceof pi||D instanceof Pi)&&D.populatePaintArray(a,c,f,x,S)}},hi.prototype.setConstantPatternPositions=function(a,c){for(var f in this.binders){var x=this.binders[f];x instanceof vi&&x.setConstantPatternPositions(a,c)}},hi.prototype.updatePaintArrays=function(a,c,f,x,S){var I=!1;for(var D in a)for(var H=0,Y=c.getPositions(D);H<Y.length;H+=1){var ee=Y[H],ie=f.feature(ee.index);for(var se in this.binders){var Ae=this.binders[se];if((Ae instanceof di||Ae instanceof pi||Ae instanceof Pi)&&Ae.expression.isStateDependent===!0){var Te=x.paint.get(se);Ae.expression=Te.value,Ae.updatePaintArray(ee.start,ee.end,ie,a[D],S),I=!0}}}return I},hi.prototype.defines=function(){var a=[];for(var c in this.binders){var f=this.binders[c];(f instanceof yi||f instanceof vi)&&a.push.apply(a,f.uniformNames.map(function(x){return"#define HAS_UNIFORM_"+x}))}return a},hi.prototype.getBinderAttributes=function(){var a=[];for(var c in this.binders){var f=this.binders[c];if(f instanceof di||f instanceof pi)for(var x=0;x<f.paintVertexAttributes.length;x++)a.push(f.paintVertexAttributes[x].name);else if(f instanceof Pi)for(var S=0;S<He.members.length;S++)a.push(He.members[S].name)}return a},hi.prototype.getBinderUniforms=function(){var a=[];for(var c in this.binders){var f=this.binders[c];if(f instanceof yi||f instanceof vi||f instanceof pi)for(var x=0,S=f.uniformNames;x<S.length;x+=1)a.push(S[x])}return a},hi.prototype.getPaintVertexBuffers=function(){return this._buffers},hi.prototype.getUniforms=function(a,c){var f=[];for(var x in this.binders){var S=this.binders[x];if(S instanceof yi||S instanceof vi||S instanceof pi)for(var I=0,D=S.uniformNames;I<D.length;I+=1){var H=D[I];if(c[H]){var Y=S.getBinding(a,c[H],H);f.push({name:H,property:x,binding:Y})}}}return f},hi.prototype.setUniforms=function(a,c,f,x){for(var S=0,I=c;S<I.length;S+=1){var D=I[S],H=D.name,Y=D.property;this.binders[Y].setUniform(D.binding,x,f.get(Y),H)}},hi.prototype.updatePaintBuffers=function(a){for(var c in this._buffers=[],this.binders){var f=this.binders[c];if(a&&f instanceof Pi){var x=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(f instanceof di||f instanceof pi)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}},hi.prototype.upload=function(a){for(var c in this.binders){var f=this.binders[c];(f instanceof di||f instanceof pi||f instanceof Pi)&&f.upload(a)}this.updatePaintBuffers()},hi.prototype.destroy=function(){for(var a in this.binders){var c=this.binders[a];(c instanceof di||c instanceof pi||c instanceof Pi)&&c.destroy()}};var li=function(a,c,f){f===void 0&&(f=function(){return!0}),this.programConfigurations={};for(var x=0,S=a;x<S.length;x+=1){var I=S[x];this.programConfigurations[I.id]=new hi(I,c,f)}this.needsUpload=!1,this._featureMap=new it,this._bufferOffset=0};function bs(a,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(c+"-","").replace(/-/g,"_")]}function Yn(a,c,f){var x={color:{source:eh,composite:yu},number:{source:gu,composite:eh}},S=function(I){return{"line-pattern":{source:mc,composite:mc},"fill-pattern":{source:mc,composite:mc},"fill-extrusion-pattern":{source:mc,composite:mc}}[I]}(a);return S&&S[f]||x[c][f]}li.prototype.populatePaintArrays=function(a,c,f,x,S,I){for(var D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(a,c,x,S,I);c.id!==void 0&&this._featureMap.add(c.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0},li.prototype.updatePaintArrays=function(a,c,f,x){for(var S=0,I=f;S<I.length;S+=1){var D=I[S];this.needsUpload=this.programConfigurations[D.id].updatePaintArrays(a,this._featureMap,c,D,x)||this.needsUpload}},li.prototype.get=function(a){return this.programConfigurations[a]},li.prototype.upload=function(a){if(this.needsUpload){for(var c in this.programConfigurations)this.programConfigurations[c].upload(a);this.needsUpload=!1}},li.prototype.destroy=function(){for(var a in this.programConfigurations)this.programConfigurations[a].destroy()},Tr("ConstantBinder",yi),Tr("CrossFadedConstantBinder",vi),Tr("SourceExpressionBinder",di),Tr("CrossFadedCompositeBinder",Pi),Tr("CompositeExpressionBinder",pi),Tr("ProgramConfiguration",hi,{omit:["_buffers"]}),Tr("ProgramConfigurationSet",li);var Ws=Math.pow(2,14)-1,ws=-Ws-1;function Io(a){for(var c=8192/a.extent,f=a.loadGeometry(),x=0;x<f.length;x++)for(var S=f[x],I=0;I<S.length;I++){var D=S[I],H=Math.round(D.x*c),Y=Math.round(D.y*c);D.x=O(H,ws,Ws),D.y=O(Y,ws,Ws),(H<D.x||H>D.x+1||Y<D.y||Y>D.y+1)&&we("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return f}function Jo(a,c){return{type:a.type,id:a.id,properties:a.properties,geometry:c?Io(a):[]}}function Wa(a,c,f,x,S){a.emplaceBack(2*c+(x+1)/2,2*f+(S+1)/2)}var pa=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Wc,this.indexArray=new Ga,this.segments=new Ce,this.programConfigurations=new li(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function vu(a,c){for(var f=0;f<a.length;f++)if(ro(c,a[f]))return!0;for(var x=0;x<c.length;x++)if(ro(a,c[x]))return!0;return!!rd(a,c)}function Ia(a,c,f){return!!ro(a,c)||!!xu(c,a,f)}function Kl(a,c){if(a.length===1)return oh(c,a[0]);for(var f=0;f<c.length;f++)for(var x=c[f],S=0;S<x.length;S++)if(ro(a,x[S]))return!0;for(var I=0;I<a.length;I++)if(oh(c,a[I]))return!0;for(var D=0;D<c.length;D++)if(rd(a,c[D]))return!0;return!1}function Bl(a,c,f){if(a.length>1){if(rd(a,c))return!0;for(var x=0;x<c.length;x++)if(xu(c[x],a,f))return!0}for(var S=0;S<a.length;S++)if(xu(a[S],c,f))return!0;return!1}function rd(a,c){if(a.length===0||c.length===0)return!1;for(var f=0;f<a.length-1;f++)for(var x=a[f],S=a[f+1],I=0;I<c.length-1;I++)if(nh(x,S,c[I],c[I+1]))return!0;return!1}function nh(a,c,f,x){return Oe(a,f,x)!==Oe(c,f,x)&&Oe(a,c,f)!==Oe(a,c,x)}function xu(a,c,f){var x=f*f;if(c.length===1)return a.distSqr(c[0])<x;for(var S=1;S<c.length;S++)if(uf(a,c[S-1],c[S])<x)return!0;return!1}function uf(a,c,f){var x=c.distSqr(f);if(x===0)return a.distSqr(c);var S=((a.x-c.x)*(f.x-c.x)+(a.y-c.y)*(f.y-c.y))/x;return a.distSqr(S<0?c:S>1?f:f.sub(c)._mult(S)._add(c))}function oh(a,c){for(var f,x,S,I=!1,D=0;D<a.length;D++)for(var H=0,Y=(f=a[D]).length-1;H<f.length;Y=H++)(x=f[H]).y>c.y!=(S=f[Y]).y>c.y&&c.x<(S.x-x.x)*(c.y-x.y)/(S.y-x.y)+x.x&&(I=!I);return I}function ro(a,c){for(var f=!1,x=0,S=a.length-1;x<a.length;S=x++){var I=a[x],D=a[S];I.y>c.y!=D.y>c.y&&c.x<(D.x-I.x)*(c.y-I.y)/(D.y-I.y)+I.x&&(f=!f)}return f}function id(a,c,f){var x=f[0],S=f[2];if(a.x<x.x&&c.x<x.x||a.x>S.x&&c.x>S.x||a.y<x.y&&c.y<x.y||a.y>S.y&&c.y>S.y)return!1;var I=Oe(a,c,f[0]);return I!==Oe(a,c,f[1])||I!==Oe(a,c,f[2])||I!==Oe(a,c,f[3])}function gc(a,c,f){var x=c.paint.get(a).value;return x.kind==="constant"?x.value:f.programConfigurations.get(c.id).getMaxValue(a)}function Ho(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Ts(a,c,f,x,S){if(!c[0]&&!c[1])return a;var I=u.convert(c)._mult(S);f==="viewport"&&I._rotate(-x);for(var D=[],H=0;H<a.length;H++)D.push(a[H].sub(I));return D}pa.prototype.populate=function(a,c,f){var x=this.layers[0],S=[],I=null;x.type==="circle"&&(I=x.layout.get("circle-sort-key"));for(var D=0,H=a;D<H.length;D+=1){var Y=H[D],ee=Y.feature,ie=Y.id,se=Y.index,Ae=Y.sourceLayerIndex,Te=this.layers[0]._featureFilter.needGeometry,ke=Jo(ee,Te);if(this.layers[0]._featureFilter.filter(new qi(this.zoom),ke,f)){var Ve=I?I.evaluate(ke,{},f):void 0,et={id:ie,properties:ee.properties,type:ee.type,sourceLayerIndex:Ae,index:se,geometry:Te?ke.geometry:Io(ee),patterns:{},sortKey:Ve};S.push(et)}}I&&S.sort(function(Ar,Qr){return Ar.sortKey-Qr.sortKey});for(var Xe=0,at=S;Xe<at.length;Xe+=1){var _t=at[Xe],bt=_t.geometry,Mt=_t.index,Ut=_t.sourceLayerIndex,$t=a[Mt].feature;this.addFeature(_t,bt,Mt,f),c.featureIndex.insert($t,bt,Mt,Ut,this.index)}},pa.prototype.update=function(a,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,f)},pa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pa.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Ee),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},pa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pa.prototype.addFeature=function(a,c,f,x){for(var S=0,I=c;S<I.length;S+=1)for(var D=0,H=I[S];D<H.length;D+=1){var Y=H[D],ee=Y.x,ie=Y.y;if(!(ee<0||ee>=8192||ie<0||ie>=8192)){var se=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Ae=se.vertexLength;Wa(this.layoutVertexArray,ee,ie,-1,-1),Wa(this.layoutVertexArray,ee,ie,1,-1),Wa(this.layoutVertexArray,ee,ie,1,1),Wa(this.layoutVertexArray,ee,ie,-1,1),this.indexArray.emplaceBack(Ae,Ae+1,Ae+2),this.indexArray.emplaceBack(Ae,Ae+3,Ae+2),se.vertexLength+=4,se.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{},x)},Tr("CircleBucket",pa,{omit:["layers"]});var bu=new Rs({"circle-sort-key":new zr(Se.layout_circle["circle-sort-key"])}),ff={paint:new Rs({"circle-radius":new zr(Se.paint_circle["circle-radius"]),"circle-color":new zr(Se.paint_circle["circle-color"]),"circle-blur":new zr(Se.paint_circle["circle-blur"]),"circle-opacity":new zr(Se.paint_circle["circle-opacity"]),"circle-translate":new ei(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new ei(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ei(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ei(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zr(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zr(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zr(Se.paint_circle["circle-stroke-opacity"])}),layout:bu},Cn=typeof Float32Array<"u"?Float32Array:Array;function qa(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Aa(a,c,f){var x=c[0],S=c[1],I=c[2],D=c[3],H=c[4],Y=c[5],ee=c[6],ie=c[7],se=c[8],Ae=c[9],Te=c[10],ke=c[11],Ve=c[12],et=c[13],Xe=c[14],at=c[15],_t=f[0],bt=f[1],Mt=f[2],Ut=f[3];return a[0]=_t*x+bt*H+Mt*se+Ut*Ve,a[1]=_t*S+bt*Y+Mt*Ae+Ut*et,a[2]=_t*I+bt*ee+Mt*Te+Ut*Xe,a[3]=_t*D+bt*ie+Mt*ke+Ut*at,a[4]=(_t=f[4])*x+(bt=f[5])*H+(Mt=f[6])*se+(Ut=f[7])*Ve,a[5]=_t*S+bt*Y+Mt*Ae+Ut*et,a[6]=_t*I+bt*ee+Mt*Te+Ut*Xe,a[7]=_t*D+bt*ie+Mt*ke+Ut*at,a[8]=(_t=f[8])*x+(bt=f[9])*H+(Mt=f[10])*se+(Ut=f[11])*Ve,a[9]=_t*S+bt*Y+Mt*Ae+Ut*et,a[10]=_t*I+bt*ee+Mt*Te+Ut*Xe,a[11]=_t*D+bt*ie+Mt*ke+Ut*at,a[12]=(_t=f[12])*x+(bt=f[13])*H+(Mt=f[14])*se+(Ut=f[15])*Ve,a[13]=_t*S+bt*Y+Mt*Ae+Ut*et,a[14]=_t*I+bt*ee+Mt*Te+Ut*Xe,a[15]=_t*D+bt*ie+Mt*ke+Ut*at,a}Math.hypot||(Math.hypot=function(){for(var a=arguments,c=0,f=arguments.length;f--;)c+=a[f]*a[f];return Math.sqrt(c)});var wu,Kg=Aa;function dp(a,c,f){var x=c[0],S=c[1],I=c[2],D=c[3];return a[0]=f[0]*x+f[4]*S+f[8]*I+f[12]*D,a[1]=f[1]*x+f[5]*S+f[9]*I+f[13]*D,a[2]=f[2]*x+f[6]*S+f[10]*I+f[14]*D,a[3]=f[3]*x+f[7]*S+f[11]*I+f[15]*D,a}wu=new Cn(3),Cn!=Float32Array&&(wu[0]=0,wu[1]=0,wu[2]=0),function(){var a=new Cn(4);Cn!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0)}();var hv=(function(){var a=new Cn(2);Cn!=Float32Array&&(a[0]=0,a[1]=0)}(),function(a){function c(f){a.call(this,f,ff)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.createBucket=function(f){return new pa(f)},c.prototype.queryRadius=function(f){var x=f;return gc("circle-radius",this,x)+gc("circle-stroke-width",this,x)+Ho(this.paint.get("circle-translate"))},c.prototype.queryIntersectsFeature=function(f,x,S,I,D,H,Y,ee){for(var ie=Ts(f,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),H.angle,Y),se=this.paint.get("circle-radius").evaluate(x,S)+this.paint.get("circle-stroke-width").evaluate(x,S),Ae=this.paint.get("circle-pitch-alignment")==="map",Te=Ae?ie:function($t,Ar){return $t.map(function(Qr){return nd(Qr,Ar)})}(ie,ee),ke=Ae?se*Y:se,Ve=0,et=I;Ve<et.length;Ve+=1)for(var Xe=0,at=et[Ve];Xe<at.length;Xe+=1){var _t=at[Xe],bt=Ae?_t:nd(_t,ee),Mt=ke,Ut=dp([],[_t.x,_t.y,0,1],ee);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Mt*=Ut[3]/H.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Mt*=H.cameraToCenterDistance/Ut[3]),Ia(Te,bt,Mt))return!0}return!1},c}(Ma));function nd(a,c){var f=dp([],[a.x,a.y,0,1],c);return new u(f[0]/f[3],f[1]/f[3])}var Zg=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c}(pa);function sh(a,c,f,x){var S=c.width,I=c.height;if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==S*I*f)throw new RangeError("mismatched image size")}else x=new Uint8Array(S*I*f);return a.width=S,a.height=I,a.data=x,a}function Zl(a,c,f){var x=c.width,S=c.height;if(x!==a.width||S!==a.height){var I=sh({},{width:x,height:S},f);_c(a,I,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,x),height:Math.min(a.height,S)},f),a.width=x,a.height=S,a.data=I.data}}function _c(a,c,f,x,S,I){if(S.width===0||S.height===0)return c;if(S.width>a.width||S.height>a.height||f.x>a.width-S.width||f.y>a.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>c.width||S.height>c.height||x.x>c.width-S.width||x.y>c.height-S.height)throw new RangeError("out of range destination coordinates for image copy");for(var D=a.data,H=c.data,Y=0;Y<S.height;Y++)for(var ee=((f.y+Y)*a.width+f.x)*I,ie=((x.y+Y)*c.width+x.x)*I,se=0;se<S.width*I;se++)H[ie+se]=D[ee+se];return c}Tr("HeatmapBucket",Zg,{omit:["layers"]});var Mi=function(a,c){sh(this,a,1,c)};Mi.prototype.resize=function(a){Zl(this,a,1)},Mi.prototype.clone=function(){return new Mi({width:this.width,height:this.height},new Uint8Array(this.data))},Mi.copy=function(a,c,f,x,S){_c(a,c,f,x,S,1)};var Qo=function(a,c){sh(this,a,4,c)};Qo.prototype.resize=function(a){Zl(this,a,4)},Qo.prototype.replace=function(a,c){c?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a},Qo.prototype.clone=function(){return new Qo({width:this.width,height:this.height},new Uint8Array(this.data))},Qo.copy=function(a,c,f,x,S){_c(a,c,f,x,S,4)},Tr("AlphaImage",Mi),Tr("RGBAImage",Qo);var bn={paint:new Rs({"heatmap-radius":new zr(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zr(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ei(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ml(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ei(Se.paint_heatmap["heatmap-opacity"])})};function Pa(a){var c={},f=a.resolution||256,x=a.clips?a.clips.length:1,S=a.image||new Qo({width:f,height:x}),I=function(ke,Ve,et){c[a.evaluationKey]=et;var Xe=a.expression.evaluate(c);S.data[ke+Ve+0]=Math.floor(255*Xe.r/Xe.a),S.data[ke+Ve+1]=Math.floor(255*Xe.g/Xe.a),S.data[ke+Ve+2]=Math.floor(255*Xe.b/Xe.a),S.data[ke+Ve+3]=Math.floor(255*Xe.a)};if(a.clips)for(var D=0,H=0;D<x;++D,H+=4*f)for(var Y=0,ee=0;Y<f;Y++,ee+=4){var ie=Y/(f-1),se=a.clips[D];I(H,ee,se.start*(1-ie)+se.end*ie)}else for(var Ae=0,Te=0;Ae<f;Ae++,Te+=4)I(0,Te,Ae/(f-1));return S}var Xw=function(a){function c(f){a.call(this,f,bn),this._updateColorRamp()}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.createBucket=function(f){return new Zg(f)},c.prototype._handleSpecialPaintPropertyUpdate=function(f){f==="heatmap-color"&&this._updateColorRamp()},c.prototype._updateColorRamp=function(){this.colorRamp=Pa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},c.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},c}(Ma),dv={paint:new Rs({"hillshade-illumination-direction":new ei(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ei(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ei(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ei(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ei(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ei(Se.paint_hillshade["hillshade-accent-color"])})},od=function(a){function c(f){a.call(this,f,dv)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},c}(Ma),eP=Bs([{name:"a_pos",components:2,type:"Int16"}],4).members,ma=hf,Jg=hf;function hf(a,c,f){f=f||2;var x,S,I,D,H,Y,ee,ie=c&&c.length,se=ie?c[0]*f:a.length,Ae=pv(a,0,se,f,!0),Te=[];if(!Ae||Ae.next===Ae.prev)return Te;if(ie&&(Ae=function(Ve,et,Xe,at){var _t,bt,Mt,Ut=[];for(_t=0,bt=et.length;_t<bt;_t++)(Mt=pv(Ve,et[_t]*at,_t<bt-1?et[_t+1]*at:Ve.length,at,!1))===Mt.next&&(Mt.steiner=!0),Ut.push(A(Mt));for(Ut.sort(sd),_t=0;_t<Ut.length;_t++)Kw(Ut[_t],Xe),Xe=nr(Xe,Xe.next);return Xe}(a,c,Ae,f)),a.length>80*f){x=I=a[0],S=D=a[1];for(var ke=f;ke<se;ke+=f)(H=a[ke])<x&&(x=H),(Y=a[ke+1])<S&&(S=Y),H>I&&(I=H),Y>D&&(D=Y);ee=(ee=Math.max(I-x,D-S))!==0?1/ee:0}return Sr(Ae,Te,f,x,S,ee),Te}function pv(a,c,f,x,S){var I,D;if(S===Ye(a,c,f,x)>0)for(I=c;I<f;I+=x)D=De(I,a[I],a[I+1],D);else for(I=f-x;I>=c;I-=x)D=De(I,a[I],a[I+1],D);return D&&R(D,D.next)&&($e(D),D=D.next),D}function nr(a,c){if(!a)return a;c||(c=a);var f,x=a;do if(f=!1,x.steiner||!R(x,x.next)&&C(x.prev,x,x.next)!==0)x=x.next;else{if($e(x),(x=c=x.prev)===x.next)break;f=!0}while(f||x!==c);return c}function Sr(a,c,f,x,S,I,D){if(a){!D&&I&&function(ie,se,Ae,Te){var ke=ie;do ke.z===null&&(ke.z=m(ke.x,ke.y,se,Ae,Te)),ke.prevZ=ke.prev,ke.nextZ=ke.next,ke=ke.next;while(ke!==ie);ke.prevZ.nextZ=null,ke.prevZ=null,function(Ve){var et,Xe,at,_t,bt,Mt,Ut,$t,Ar=1;do{for(Xe=Ve,Ve=null,bt=null,Mt=0;Xe;){for(Mt++,at=Xe,Ut=0,et=0;et<Ar&&(Ut++,at=at.nextZ);et++);for($t=Ar;Ut>0||$t>0&&at;)Ut!==0&&($t===0||!at||Xe.z<=at.z)?(_t=Xe,Xe=Xe.nextZ,Ut--):(_t=at,at=at.nextZ,$t--),bt?bt.nextZ=_t:Ve=_t,_t.prevZ=bt,bt=_t;Xe=at}bt.nextZ=null,Ar*=2}while(Mt>1)}(ke)}(a,x,S,I);for(var H,Y,ee=a;a.prev!==a.next;)if(H=a.prev,Y=a.next,I?Av(a,x,S,I):Yw(a))c.push(H.i/f),c.push(a.i/f),c.push(Y.i/f),$e(a),a=Y.next,ee=Y.next;else if((a=Y)===ee){D?D===1?Sr(a=Qg(nr(a),c,f),c,f,x,S,I,2):D===2&&$g(a,c,f,x,S,I):Sr(nr(a),c,f,x,S,I,1);break}}}function Yw(a){var c=a.prev,f=a,x=a.next;if(C(c,f,x)>=0)return!1;for(var S=a.next.next;S!==a.prev;){if(y(c.x,c.y,f.x,f.y,x.x,x.y,S.x,S.y)&&C(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function Av(a,c,f,x){var S=a.prev,I=a,D=a.next;if(C(S,I,D)>=0)return!1;for(var H=S.x>I.x?S.x>D.x?S.x:D.x:I.x>D.x?I.x:D.x,Y=S.y>I.y?S.y>D.y?S.y:D.y:I.y>D.y?I.y:D.y,ee=m(S.x<I.x?S.x<D.x?S.x:D.x:I.x<D.x?I.x:D.x,S.y<I.y?S.y<D.y?S.y:D.y:I.y<D.y?I.y:D.y,c,f,x),ie=m(H,Y,c,f,x),se=a.prevZ,Ae=a.nextZ;se&&se.z>=ee&&Ae&&Ae.z<=ie;){if(se!==a.prev&&se!==a.next&&y(S.x,S.y,I.x,I.y,D.x,D.y,se.x,se.y)&&C(se.prev,se,se.next)>=0||(se=se.prevZ,Ae!==a.prev&&Ae!==a.next&&y(S.x,S.y,I.x,I.y,D.x,D.y,Ae.x,Ae.y)&&C(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;se&&se.z>=ee;){if(se!==a.prev&&se!==a.next&&y(S.x,S.y,I.x,I.y,D.x,D.y,se.x,se.y)&&C(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;Ae&&Ae.z<=ie;){if(Ae!==a.prev&&Ae!==a.next&&y(S.x,S.y,I.x,I.y,D.x,D.y,Ae.x,Ae.y)&&C(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function Qg(a,c,f){var x=a;do{var S=x.prev,I=x.next.next;!R(S,I)&&L(S,x,x.next,I)&&te(S,I)&&te(I,S)&&(c.push(S.i/f),c.push(x.i/f),c.push(I.i/f),$e(x),$e(x.next),x=a=I),x=x.next}while(x!==a);return nr(x)}function $g(a,c,f,x,S,I){var D=a;do{for(var H=D.next.next;H!==D.prev;){if(D.i!==H.i&&w(D,H)){var Y=pe(D,H);return D=nr(D,D.next),Y=nr(Y,Y.next),Sr(D,c,f,x,S,I),void Sr(Y,c,f,x,S,I)}H=H.next}D=D.next}while(D!==a)}function sd(a,c){return a.x-c.x}function Kw(a,c){if(c=function(x,S){var I,D=S,H=x.x,Y=x.y,ee=-1/0;do{if(Y<=D.y&&Y>=D.next.y&&D.next.y!==D.y){var ie=D.x+(Y-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(ie<=H&&ie>ee){if(ee=ie,ie===H){if(Y===D.y)return D;if(Y===D.next.y)return D.next}I=D.x<D.next.x?D:D.next}}D=D.next}while(D!==S);if(!I)return null;if(H===ee)return I;var se,Ae=I,Te=I.x,ke=I.y,Ve=1/0;D=I;do H>=D.x&&D.x>=Te&&H!==D.x&&y(Y<ke?H:ee,Y,Te,ke,Y<ke?ee:H,Y,D.x,D.y)&&(se=Math.abs(Y-D.y)/(H-D.x),te(D,x)&&(se<Ve||se===Ve&&(D.x>I.x||D.x===I.x&&ah(I,D)))&&(I=D,Ve=se)),D=D.next;while(D!==Ae);return I}(a,c)){var f=pe(c,a);nr(c,c.next),nr(f,f.next)}}function ah(a,c){return C(a.prev,a,c.prev)<0&&C(c.next,a,a.next)<0}function m(a,c,f,x,S){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-f)*S)|a<<8))|a<<4))|a<<2))|a<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-x)*S)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function A(a){var c=a,f=a;do(c.x<f.x||c.x===f.x&&c.y<f.y)&&(f=c),c=c.next;while(c!==a);return f}function y(a,c,f,x,S,I,D,H){return(S-D)*(c-H)-(a-D)*(I-H)>=0&&(a-D)*(x-H)-(f-D)*(c-H)>=0&&(f-D)*(I-H)-(S-D)*(x-H)>=0}function w(a,c){return a.next.i!==c.i&&a.prev.i!==c.i&&!function(f,x){var S=f;do{if(S.i!==f.i&&S.next.i!==f.i&&S.i!==x.i&&S.next.i!==x.i&&L(S,S.next,f,x))return!0;S=S.next}while(S!==f);return!1}(a,c)&&(te(a,c)&&te(c,a)&&function(f,x){var S=f,I=!1,D=(f.x+x.x)/2,H=(f.y+x.y)/2;do S.y>H!=S.next.y>H&&S.next.y!==S.y&&D<(S.next.x-S.x)*(H-S.y)/(S.next.y-S.y)+S.x&&(I=!I),S=S.next;while(S!==f);return I}(a,c)&&(C(a.prev,a,c.prev)||C(a,c.prev,c))||R(a,c)&&C(a.prev,a,a.next)>0&&C(c.prev,c,c.next)>0)}function C(a,c,f){return(c.y-a.y)*(f.x-c.x)-(c.x-a.x)*(f.y-c.y)}function R(a,c){return a.x===c.x&&a.y===c.y}function L(a,c,f,x){var S=X(C(a,c,f)),I=X(C(a,c,x)),D=X(C(f,x,a)),H=X(C(f,x,c));return S!==I&&D!==H||!(S!==0||!N(a,f,c))||!(I!==0||!N(a,x,c))||!(D!==0||!N(f,a,x))||!(H!==0||!N(f,c,x))}function N(a,c,f){return c.x<=Math.max(a.x,f.x)&&c.x>=Math.min(a.x,f.x)&&c.y<=Math.max(a.y,f.y)&&c.y>=Math.min(a.y,f.y)}function X(a){return a>0?1:a<0?-1:0}function te(a,c){return C(a.prev,a,a.next)<0?C(a,c,a.next)>=0&&C(a,a.prev,c)>=0:C(a,c,a.prev)<0||C(a,a.next,c)<0}function pe(a,c){var f=new nt(a.i,a.x,a.y),x=new nt(c.i,c.x,c.y),S=a.next,I=c.prev;return a.next=c,c.prev=a,f.next=S,S.prev=f,x.next=f,f.prev=x,I.next=x,x.prev=I,x}function De(a,c,f,x){var S=new nt(a,c,f);return x?(S.next=x.next,S.prev=x,x.next.prev=S,x.next=S):(S.prev=S,S.next=S),S}function $e(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function nt(a,c,f){this.i=a,this.x=c,this.y=f,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ye(a,c,f,x){for(var S=0,I=c,D=f-x;I<f;I+=x)S+=(a[D]-a[I])*(a[I+1]+a[D+1]),D=I;return S}function yt(a,c,f,x,S){(function I(D,H,Y,ee,ie){for(;ee>Y;){if(ee-Y>600){var se=ee-Y+1,Ae=H-Y+1,Te=Math.log(se),ke=.5*Math.exp(2*Te/3),Ve=.5*Math.sqrt(Te*ke*(se-ke)/se)*(Ae-se/2<0?-1:1);I(D,H,Math.max(Y,Math.floor(H-Ae*ke/se+Ve)),Math.min(ee,Math.floor(H+(se-Ae)*ke/se+Ve)),ie)}var et=D[H],Xe=Y,at=ee;for(zt(D,Y,H),ie(D[ee],et)>0&&zt(D,Y,ee);Xe<at;){for(zt(D,Xe,at),Xe++,at--;ie(D[Xe],et)<0;)Xe++;for(;ie(D[at],et)>0;)at--}ie(D[Y],et)===0?zt(D,Y,at):zt(D,++at,ee),at<=H&&(Y=at+1),H<=at&&(ee=at-1)}})(a,c,f||0,x||a.length-1,S||kt)}function zt(a,c,f){var x=a[c];a[c]=a[f],a[f]=x}function kt(a,c){return a<c?-1:a>c?1:0}function Et(a,c){var f=a.length;if(f<=1)return[a];for(var x,S,I=[],D=0;D<f;D++){var H=he(a[D]);H!==0&&(a[D].area=Math.abs(H),S===void 0&&(S=H<0),S===H<0?(x&&I.push(x),x=[a[D]]):x.push(a[D]))}if(x&&I.push(x),c>1)for(var Y=0;Y<I.length;Y++)I[Y].length<=c||(yt(I[Y],c,1,I[Y].length-1,Bt),I[Y]=I[Y].slice(0,c));return I}function Bt(a,c){return c.area-a.area}function gt(a,c,f){for(var x=f.patternDependencies,S=!1,I=0,D=c;I<D.length;I+=1){var H=D[I].paint.get(a+"-pattern");H.isConstant()||(S=!0);var Y=H.constantOr(null);Y&&(S=!0,x[Y.to]=!0,x[Y.from]=!0)}return S}function Fr(a,c,f,x,S){for(var I=S.patternDependencies,D=0,H=c;D<H.length;D+=1){var Y=H[D],ee=Y.paint.get(a+"-pattern").value;if(ee.kind!=="constant"){var ie=ee.evaluate({zoom:x-1},f,{},S.availableImages),se=ee.evaluate({zoom:x},f,{},S.availableImages),Ae=ee.evaluate({zoom:x+1},f,{},S.availableImages);se=se&&se.name?se.name:se,Ae=Ae&&Ae.name?Ae.name:Ae,I[ie=ie&&ie.name?ie.name:ie]=!0,I[se]=!0,I[Ae]=!0,f.patterns[Y.id]={min:ie,mid:se,max:Ae}}}return f}hf.deviation=function(a,c,f,x){var S=c&&c.length,I=Math.abs(Ye(a,0,S?c[0]*f:a.length,f));if(S)for(var D=0,H=c.length;D<H;D++)I-=Math.abs(Ye(a,c[D]*f,D<H-1?c[D+1]*f:a.length,f));var Y=0;for(D=0;D<x.length;D+=3){var ee=x[D]*f,ie=x[D+1]*f,se=x[D+2]*f;Y+=Math.abs((a[ee]-a[se])*(a[ie+1]-a[ee+1])-(a[ee]-a[ie])*(a[se+1]-a[ee+1]))}return I===0&&Y===0?0:Math.abs((Y-I)/I)},hf.flatten=function(a){for(var c=a[0][0].length,f={vertices:[],holes:[],dimensions:c},x=0,S=0;S<a.length;S++){for(var I=0;I<a[S].length;I++)for(var D=0;D<c;D++)f.vertices.push(a[S][I][D]);S>0&&f.holes.push(x+=a[S-1].length)}return f},ma.default=Jg;var Nr=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wc,this.indexArray=new Ga,this.indexArray2=new cf,this.programConfigurations=new li(a.layers,a.zoom),this.segments=new Ce,this.segments2=new Ce,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};Nr.prototype.populate=function(a,c,f){this.hasPattern=gt("fill",this.layers,c);for(var x=this.layers[0].layout.get("fill-sort-key"),S=[],I=0,D=a;I<D.length;I+=1){var H=D[I],Y=H.feature,ee=H.id,ie=H.index,se=H.sourceLayerIndex,Ae=this.layers[0]._featureFilter.needGeometry,Te=Jo(Y,Ae);if(this.layers[0]._featureFilter.filter(new qi(this.zoom),Te,f)){var ke=x?x.evaluate(Te,{},f,c.availableImages):void 0,Ve={id:ee,properties:Y.properties,type:Y.type,sourceLayerIndex:se,index:ie,geometry:Ae?Te.geometry:Io(Y),patterns:{},sortKey:ke};S.push(Ve)}}x&&S.sort(function($t,Ar){return $t.sortKey-Ar.sortKey});for(var et=0,Xe=S;et<Xe.length;et+=1){var at=Xe[et],_t=at.geometry,bt=at.index,Mt=at.sourceLayerIndex;if(this.hasPattern){var Ut=Fr("fill",this.layers,at,this.zoom,c);this.patternFeatures.push(Ut)}else this.addFeature(at,_t,bt,f,{});c.featureIndex.insert(a[bt].feature,_t,bt,Mt,this.index)}},Nr.prototype.update=function(a,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,f)},Nr.prototype.addFeatures=function(a,c,f){for(var x=0,S=this.patternFeatures;x<S.length;x+=1){var I=S[x];this.addFeature(I,I.geometry,I.index,c,f)}},Nr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nr.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,eP),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0},Nr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Nr.prototype.addFeature=function(a,c,f,x,S){for(var I=0,D=Et(c,500);I<D.length;I+=1){for(var H=D[I],Y=0,ee=0,ie=H;ee<ie.length;ee+=1)Y+=ie[ee].length;for(var se=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray),Ae=se.vertexLength,Te=[],ke=[],Ve=0,et=H;Ve<et.length;Ve+=1){var Xe=et[Ve];if(Xe.length!==0){Xe!==H[0]&&ke.push(Te.length/2);var at=this.segments2.prepareSegment(Xe.length,this.layoutVertexArray,this.indexArray2),_t=at.vertexLength;this.layoutVertexArray.emplaceBack(Xe[0].x,Xe[0].y),this.indexArray2.emplaceBack(_t+Xe.length-1,_t),Te.push(Xe[0].x),Te.push(Xe[0].y);for(var bt=1;bt<Xe.length;bt++)this.layoutVertexArray.emplaceBack(Xe[bt].x,Xe[bt].y),this.indexArray2.emplaceBack(_t+bt-1,_t+bt),Te.push(Xe[bt].x),Te.push(Xe[bt].y);at.vertexLength+=Xe.length,at.primitiveLength+=Xe.length}}for(var Mt=ma(Te,ke),Ut=0;Ut<Mt.length;Ut+=3)this.indexArray.emplaceBack(Ae+Mt[Ut],Ae+Mt[Ut+1],Ae+Mt[Ut+2]);se.vertexLength+=Y,se.primitiveLength+=Mt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,S,x)},Tr("FillBucket",Nr,{omit:["layers","patternFeatures"]});var Rr=new Rs({"fill-sort-key":new zr(Se.layout_fill["fill-sort-key"])}),Vr={paint:new Rs({"fill-antialias":new ei(Se.paint_fill["fill-antialias"]),"fill-opacity":new zr(Se.paint_fill["fill-opacity"]),"fill-color":new zr(Se.paint_fill["fill-color"]),"fill-outline-color":new zr(Se.paint_fill["fill-outline-color"]),"fill-translate":new ei(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new ei(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Au(Se.paint_fill["fill-pattern"])}),layout:Rr},io=function(a){function c(f){a.call(this,f,Vr)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.recalculate=function(f,x){a.prototype.recalculate.call(this,f,x);var S=this.paint._values["fill-outline-color"];S.value.kind==="constant"&&S.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},c.prototype.createBucket=function(f){return new Nr(f)},c.prototype.queryRadius=function(){return Ho(this.paint.get("fill-translate"))},c.prototype.queryIntersectsFeature=function(f,x,S,I,D,H,Y){return Kl(Ts(f,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),H.angle,Y),I)},c.prototype.isTileClipped=function(){return!0},c}(Ma),Vn=Bs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Hn=Ui;function Ui(a,c,f,x,S){this.properties={},this.extent=f,this.type=0,this._pbf=a,this._geometry=-1,this._keys=x,this._values=S,a.readFields(tn,this,c)}function tn(a,c,f){a==1?c.id=f.readVarint():a==2?function(x,S){for(var I=x.readVarint()+x.pos;x.pos<I;){var D=S._keys[x.readVarint()],H=S._values[x.readVarint()];S.properties[D]=H}}(f,c):a==3?c.type=f.readVarint():a==4&&(c._geometry=f.pos)}function cn(a){for(var c,f,x=0,S=0,I=a.length,D=I-1;S<I;D=S++)x+=((f=a[D]).x-(c=a[S]).x)*(c.y+f.y);return x}Ui.types=["Unknown","Point","LineString","Polygon"],Ui.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var c,f=a.readVarint()+a.pos,x=1,S=0,I=0,D=0,H=[];a.pos<f;){if(S<=0){var Y=a.readVarint();x=7&Y,S=Y>>3}if(S--,x===1||x===2)I+=a.readSVarint(),D+=a.readSVarint(),x===1&&(c&&H.push(c),c=[]),c.push(new u(I,D));else{if(x!==7)throw new Error("unknown command "+x);c&&c.push(c[0].clone())}}return c&&H.push(c),H},Ui.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var c=a.readVarint()+a.pos,f=1,x=0,S=0,I=0,D=1/0,H=-1/0,Y=1/0,ee=-1/0;a.pos<c;){if(x<=0){var ie=a.readVarint();f=7&ie,x=ie>>3}if(x--,f===1||f===2)(S+=a.readSVarint())<D&&(D=S),S>H&&(H=S),(I+=a.readSVarint())<Y&&(Y=I),I>ee&&(ee=I);else if(f!==7)throw new Error("unknown command "+f)}return[D,Y,H,ee]},Ui.prototype.toGeoJSON=function(a,c,f){var x,S,I=this.extent*Math.pow(2,f),D=this.extent*a,H=this.extent*c,Y=this.loadGeometry(),ee=Ui.types[this.type];function ie(Te){for(var ke=0;ke<Te.length;ke++){var Ve=Te[ke];Te[ke]=[360*(Ve.x+D)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ve.y+H)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var se=[];for(x=0;x<Y.length;x++)se[x]=Y[x][0];ie(Y=se);break;case 2:for(x=0;x<Y.length;x++)ie(Y[x]);break;case 3:for(Y=function(Te){var ke=Te.length;if(ke<=1)return[Te];for(var Ve,et,Xe=[],at=0;at<ke;at++){var _t=cn(Te[at]);_t!==0&&(et===void 0&&(et=_t<0),et===_t<0?(Ve&&Xe.push(Ve),Ve=[Te[at]]):Ve.push(Te[at]))}return Ve&&Xe.push(Ve),Xe}(Y),x=0;x<Y.length;x++)for(S=0;S<Y[x].length;S++)ie(Y[x][S])}Y.length===1?Y=Y[0]:ee="Multi"+ee;var Ae={type:"Feature",geometry:{type:ee,coordinates:Y},properties:this.properties};return"id"in this&&(Ae.id=this.id),Ae};var co=zi;function zi(a,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Po,this,c),this.length=this._features.length}function Po(a,c,f){a===15?c.version=f.readVarint():a===1?c.name=f.readString():a===5?c.extent=f.readVarint():a===2?c._features.push(f.pos):a===3?c._keys.push(f.readString()):a===4&&c._values.push(function(x){for(var S=null,I=x.readVarint()+x.pos;x.pos<I;){var D=x.readVarint()>>3;S=D===1?x.readString():D===2?x.readFloat():D===3?x.readDouble():D===4?x.readVarint64():D===5?x.readVarint():D===6?x.readSVarint():D===7?x.readBoolean():null}return S}(f))}function gl(a,c,f){if(a===3){var x=new co(f,f.readVarint()+f.pos);x.length&&(c[x.name]=x)}}zi.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var c=this._pbf.readVarint()+this._pbf.pos;return new Hn(this._pbf,c,this.extent,this._keys,this._values)};var ad={VectorTile:function(a,c){this.layers=a.readFields(gl,{},c)},VectorTileFeature:Hn,VectorTileLayer:co},ete=ad.VectorTileFeature.types,tP=Math.pow(2,13);function mv(a,c,f,x,S,I,D,H){a.emplaceBack(c,f,2*Math.floor(x*tP)+D,S*tP*2,I*tP*2,Math.round(H))}var df=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Rl,this.indexArray=new Ga,this.programConfigurations=new li(a.layers,a.zoom),this.segments=new Ce,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function tte(a,c){return a.x===c.x&&(a.x<0||a.x>8192)||a.y===c.y&&(a.y<0||a.y>8192)}df.prototype.populate=function(a,c,f){this.features=[],this.hasPattern=gt("fill-extrusion",this.layers,c);for(var x=0,S=a;x<S.length;x+=1){var I=S[x],D=I.feature,H=I.id,Y=I.index,ee=I.sourceLayerIndex,ie=this.layers[0]._featureFilter.needGeometry,se=Jo(D,ie);if(this.layers[0]._featureFilter.filter(new qi(this.zoom),se,f)){var Ae={id:H,sourceLayerIndex:ee,index:Y,geometry:ie?se.geometry:Io(D),properties:D.properties,type:D.type,patterns:{}};this.hasPattern?this.features.push(Fr("fill-extrusion",this.layers,Ae,this.zoom,c)):this.addFeature(Ae,Ae.geometry,Y,f,{}),c.featureIndex.insert(D,Ae.geometry,Y,ee,this.index,!0)}}},df.prototype.addFeatures=function(a,c,f){for(var x=0,S=this.features;x<S.length;x+=1){var I=S[x];this.addFeature(I,I.geometry,I.index,c,f)}},df.prototype.update=function(a,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,f)},df.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},df.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},df.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Vn),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},df.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},df.prototype.addFeature=function(a,c,f,x,S){for(var I=0,D=Et(c,500);I<D.length;I+=1){for(var H=D[I],Y=0,ee=0,ie=H;ee<ie.length;ee+=1)Y+=ie[ee].length;for(var se=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ae=0,Te=H;Ae<Te.length;Ae+=1){var ke=Te[Ae];if(ke.length!==0&&!((rn=ke).every(function(Ri){return Ri.x<0})||rn.every(function(Ri){return Ri.x>8192})||rn.every(function(Ri){return Ri.y<0})||rn.every(function(Ri){return Ri.y>8192})))for(var Ve=0,et=0;et<ke.length;et++){var Xe=ke[et];if(et>=1){var at=ke[et-1];if(!tte(Xe,at)){se.vertexLength+4>Ce.MAX_VERTEX_ARRAY_LENGTH&&(se=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _t=Xe.sub(at)._perp()._unit(),bt=at.dist(Xe);Ve+bt>32768&&(Ve=0),mv(this.layoutVertexArray,Xe.x,Xe.y,_t.x,_t.y,0,0,Ve),mv(this.layoutVertexArray,Xe.x,Xe.y,_t.x,_t.y,0,1,Ve),mv(this.layoutVertexArray,at.x,at.y,_t.x,_t.y,0,0,Ve+=bt),mv(this.layoutVertexArray,at.x,at.y,_t.x,_t.y,0,1,Ve);var Mt=se.vertexLength;this.indexArray.emplaceBack(Mt,Mt+2,Mt+1),this.indexArray.emplaceBack(Mt+1,Mt+2,Mt+3),se.vertexLength+=4,se.primitiveLength+=2}}}}if(se.vertexLength+Y>Ce.MAX_VERTEX_ARRAY_LENGTH&&(se=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray)),ete[a.type]==="Polygon"){for(var Ut=[],$t=[],Ar=se.vertexLength,Qr=0,Cr=H;Qr<Cr.length;Qr+=1){var ni=Cr[Qr];if(ni.length!==0){ni!==H[0]&&$t.push(Ut.length/2);for(var Pr=0;Pr<ni.length;Pr++){var Vi=ni[Pr];mv(this.layoutVertexArray,Vi.x,Vi.y,0,0,1,1,0),Ut.push(Vi.x),Ut.push(Vi.y)}}}for(var Ai=ma(Ut,$t),Gr=0;Gr<Ai.length;Gr+=3)this.indexArray.emplaceBack(Ar+Ai[Gr],Ar+Ai[Gr+2],Ar+Ai[Gr+1]);se.primitiveLength+=Ai.length/3,se.vertexLength+=Y}}var rn;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,S,x)},Tr("FillExtrusionBucket",df,{omit:["layers","features"]});var rte={paint:new Rs({"fill-extrusion-opacity":new ei(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zr(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ei(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ei(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Au(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zr(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zr(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ei(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ite=function(a){function c(f){a.call(this,f,rte)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.createBucket=function(f){return new df(f)},c.prototype.queryRadius=function(){return Ho(this.paint.get("fill-extrusion-translate"))},c.prototype.is3D=function(){return!0},c.prototype.queryIntersectsFeature=function(f,x,S,I,D,H,Y,ee){var ie=Ts(f,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),H.angle,Y),se=this.paint.get("fill-extrusion-height").evaluate(x,S),Ae=this.paint.get("fill-extrusion-base").evaluate(x,S),Te=function(Ve,et,Xe,at){for(var _t=[],bt=0,Mt=Ve;bt<Mt.length;bt+=1){var Ut=Mt[bt],$t=[Ut.x,Ut.y,0,1];dp($t,$t,et),_t.push(new u($t[0]/$t[3],$t[1]/$t[3]))}return _t}(ie,ee),ke=function(Ve,et,Xe,at){for(var _t=[],bt=[],Mt=at[8]*et,Ut=at[9]*et,$t=at[10]*et,Ar=at[11]*et,Qr=at[8]*Xe,Cr=at[9]*Xe,ni=at[10]*Xe,Pr=at[11]*Xe,Vi=0,Ai=Ve;Vi<Ai.length;Vi+=1){for(var Gr=[],rn=[],Ri=0,_n=Ai[Vi];Ri<_n.length;Ri+=1){var si=_n[Ri],Pn=si.x,Bo=si.y,is=at[0]*Pn+at[4]*Bo+at[12],$o=at[1]*Pn+at[5]*Bo+at[13],Oo=at[2]*Pn+at[6]*Bo+at[14],ns=at[3]*Pn+at[7]*Bo+at[15],qs=Oo+$t,Xs=ns+Ar,Ya=is+Qr,ia=$o+Cr,Ka=Oo+ni,hs=ns+Pr,na=new u((is+Mt)/Xs,($o+Ut)/Xs);na.z=qs/Xs,Gr.push(na);var un=new u(Ya/hs,ia/hs);un.z=Ka/hs,rn.push(un)}_t.push(Gr),bt.push(rn)}return[_t,bt]}(I,Ae,se,ee);return function(Ve,et,Xe){var at=1/0;Kl(Xe,et)&&(at=_k(Xe,et[0]));for(var _t=0;_t<et.length;_t++)for(var bt=et[_t],Mt=Ve[_t],Ut=0;Ut<bt.length-1;Ut++){var $t=bt[Ut],Ar=[$t,bt[Ut+1],Mt[Ut+1],Mt[Ut],$t];vu(Xe,Ar)&&(at=Math.min(at,_k(Xe,Ar)))}return at!==1/0&&at}(ke[0],ke[1],Te)},c}(Ma);function gv(a,c){return a.x*c.x+a.y*c.y}function _k(a,c){if(a.length===1){for(var f,x=0,S=c[x++];!f||S.equals(f);)if(!(f=c[x++]))return 1/0;for(;x<c.length;x++){var I=c[x],D=a[0],H=f.sub(S),Y=I.sub(S),ee=D.sub(S),ie=gv(H,H),se=gv(H,Y),Ae=gv(Y,Y),Te=gv(ee,H),ke=gv(ee,Y),Ve=ie*Ae-se*se,et=(Ae*Te-se*ke)/Ve,Xe=(ie*ke-se*Te)/Ve,at=S.z*(1-et-Xe)+f.z*et+I.z*Xe;if(isFinite(at))return at}return 1/0}for(var _t=1/0,bt=0,Mt=c;bt<Mt.length;bt+=1)_t=Math.min(_t,Mt[bt].z);return _t}var nte=Bs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ote=Bs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ste=ad.VectorTileFeature.types,ate=Math.cos(Math.PI/180*37.5),yk=Math.pow(2,14)/.5,_l=function(a){var c=this;this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(f){c.gradients[f.id]={}}),this.layoutVertexArray=new mn,this.layoutVertexArray2=new eh,this.indexArray=new Ga,this.programConfigurations=new li(a.layers,a.zoom),this.segments=new Ce,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};_l.prototype.populate=function(a,c,f){this.hasPattern=gt("line",this.layers,c);for(var x=this.layers[0].layout.get("line-sort-key"),S=[],I=0,D=a;I<D.length;I+=1){var H=D[I],Y=H.feature,ee=H.id,ie=H.index,se=H.sourceLayerIndex,Ae=this.layers[0]._featureFilter.needGeometry,Te=Jo(Y,Ae);if(this.layers[0]._featureFilter.filter(new qi(this.zoom),Te,f)){var ke=x?x.evaluate(Te,{},f):void 0,Ve={id:ee,properties:Y.properties,type:Y.type,sourceLayerIndex:se,index:ie,geometry:Ae?Te.geometry:Io(Y),patterns:{},sortKey:ke};S.push(Ve)}}x&&S.sort(function($t,Ar){return $t.sortKey-Ar.sortKey});for(var et=0,Xe=S;et<Xe.length;et+=1){var at=Xe[et],_t=at.geometry,bt=at.index,Mt=at.sourceLayerIndex;if(this.hasPattern){var Ut=Fr("line",this.layers,at,this.zoom,c);this.patternFeatures.push(Ut)}else this.addFeature(at,_t,bt,f,{});c.featureIndex.insert(a[bt].feature,_t,bt,Mt,this.index)}},_l.prototype.update=function(a,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,f)},_l.prototype.addFeatures=function(a,c,f){for(var x=0,S=this.patternFeatures;x<S.length;x+=1){var I=S[x];this.addFeature(I,I.geometry,I.index,c,f)}},_l.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_l.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_l.prototype.upload=function(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,ote)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,nte),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},_l.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_l.prototype.lineFeatureClips=function(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}},_l.prototype.addFeature=function(a,c,f,x,S){var I=this.layers[0].layout,D=I.get("line-join").evaluate(a,{}),H=I.get("line-cap"),Y=I.get("line-miter-limit"),ee=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(var ie=0,se=c;ie<se.length;ie+=1)this.addLine(se[ie],a,D,H,Y,ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,S,x)},_l.prototype.addLine=function(a,c,f,x,S,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var D=0;D<a.length-1;D++)this.totalDistance+=a[D].dist(a[D+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var H=ste[c.type]==="Polygon",Y=a.length;Y>=2&&a[Y-1].equals(a[Y-2]);)Y--;for(var ee=0;ee<Y-1&&a[ee].equals(a[ee+1]);)ee++;if(!(Y<(H?3:2))){f==="bevel"&&(S=1.05);var ie,se=this.overscaling<=16?122880/(512*this.overscaling):0,Ae=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray),Te=void 0,ke=void 0,Ve=void 0,et=void 0;this.e1=this.e2=-1,H&&(et=a[ee].sub(ie=a[Y-2])._unit()._perp());for(var Xe=ee;Xe<Y;Xe++)if(!(ke=Xe===Y-1?H?a[ee+1]:void 0:a[Xe+1])||!a[Xe].equals(ke)){et&&(Ve=et),ie&&(Te=ie),ie=a[Xe],et=ke?ke.sub(ie)._unit()._perp():Ve;var at=(Ve=Ve||et).add(et);at.x===0&&at.y===0||at._unit();var _t=Ve.x*et.x+Ve.y*et.y,bt=at.x*et.x+at.y*et.y,Mt=bt!==0?1/bt:1/0,Ut=2*Math.sqrt(2-2*bt),$t=bt<ate&&Te&&ke,Ar=Ve.x*et.y-Ve.y*et.x>0;if($t&&Xe>ee){var Qr=ie.dist(Te);if(Qr>2*se){var Cr=ie.sub(ie.sub(Te)._mult(se/Qr)._round());this.updateDistance(Te,Cr),this.addCurrentVertex(Cr,Ve,0,0,Ae),Te=Cr}}var ni=Te&&ke,Pr=ni?f:H?"butt":x;if(ni&&Pr==="round"&&(Mt<I?Pr="miter":Mt<=2&&(Pr="fakeround")),Pr==="miter"&&Mt>S&&(Pr="bevel"),Pr==="bevel"&&(Mt>2&&(Pr="flipbevel"),Mt<S&&(Pr="miter")),Te&&this.updateDistance(Te,ie),Pr==="miter")at._mult(Mt),this.addCurrentVertex(ie,at,0,0,Ae);else if(Pr==="flipbevel"){if(Mt>100)at=et.mult(-1);else{var Vi=Mt*Ve.add(et).mag()/Ve.sub(et).mag();at._perp()._mult(Vi*(Ar?-1:1))}this.addCurrentVertex(ie,at,0,0,Ae),this.addCurrentVertex(ie,at.mult(-1),0,0,Ae)}else if(Pr==="bevel"||Pr==="fakeround"){var Ai=-Math.sqrt(Mt*Mt-1),Gr=Ar?Ai:0,rn=Ar?0:Ai;if(Te&&this.addCurrentVertex(ie,Ve,Gr,rn,Ae),Pr==="fakeround")for(var Ri=Math.round(180*Ut/Math.PI/20),_n=1;_n<Ri;_n++){var si=_n/Ri;if(si!==.5){var Pn=si-.5;si+=si*Pn*(si-1)*((1.0904+_t*(_t*(3.55645-1.43519*_t)-3.2452))*Pn*Pn+(.848013+_t*(.215638*_t-1.06021)))}var Bo=et.sub(Ve)._mult(si)._add(Ve)._unit()._mult(Ar?-1:1);this.addHalfVertex(ie,Bo.x,Bo.y,!1,Ar,0,Ae)}ke&&this.addCurrentVertex(ie,et,-Gr,-rn,Ae)}else if(Pr==="butt")this.addCurrentVertex(ie,at,0,0,Ae);else if(Pr==="square"){var is=Te?1:-1;this.addCurrentVertex(ie,at,is,is,Ae)}else Pr==="round"&&(Te&&(this.addCurrentVertex(ie,Ve,0,0,Ae),this.addCurrentVertex(ie,Ve,1,1,Ae,!0)),ke&&(this.addCurrentVertex(ie,et,-1,-1,Ae,!0),this.addCurrentVertex(ie,et,0,0,Ae)));if($t&&Xe<Y-1){var $o=ie.dist(ke);if($o>2*se){var Oo=ie.add(ke.sub(ie)._mult(se/$o)._round());this.updateDistance(ie,Oo),this.addCurrentVertex(Oo,et,0,0,Ae),ie=Oo}}}}},_l.prototype.addCurrentVertex=function(a,c,f,x,S,I){I===void 0&&(I=!1);var D=c.y*x-c.x,H=-c.y-c.x*x;this.addHalfVertex(a,c.x+c.y*f,c.y-c.x*f,I,!1,f,S),this.addHalfVertex(a,D,H,I,!0,-x,S),this.distance>yk/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,c,f,x,S,I))},_l.prototype.addHalfVertex=function(a,c,f,x,S,I,D){var H=.5*(this.lineClips?this.scaledDistance*(yk-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a.x<<1)+(x?1:0),(a.y<<1)+(S?1:0),Math.round(63*c)+128,Math.round(63*f)+128,1+(I===0?0:I<0?-1:1)|(63&H)<<2,H>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Y=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Y),D.primitiveLength++),S?this.e2=Y:this.e1=Y},_l.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},_l.prototype.updateDistance=function(a,c){this.distance+=a.dist(c),this.updateScaledDistance()},Tr("LineBucket",_l,{omit:["layers","patternFeatures"]});var lte=new Rs({"line-cap":new ei(Se.layout_line["line-cap"]),"line-join":new zr(Se.layout_line["line-join"]),"line-miter-limit":new ei(Se.layout_line["line-miter-limit"]),"line-round-limit":new ei(Se.layout_line["line-round-limit"]),"line-sort-key":new zr(Se.layout_line["line-sort-key"])}),vk={paint:new Rs({"line-opacity":new zr(Se.paint_line["line-opacity"]),"line-color":new zr(Se.paint_line["line-color"]),"line-translate":new ei(Se.paint_line["line-translate"]),"line-translate-anchor":new ei(Se.paint_line["line-translate-anchor"]),"line-width":new zr(Se.paint_line["line-width"]),"line-gap-width":new zr(Se.paint_line["line-gap-width"]),"line-offset":new zr(Se.paint_line["line-offset"]),"line-blur":new zr(Se.paint_line["line-blur"]),"line-dasharray":new da(Se.paint_line["line-dasharray"]),"line-pattern":new Au(Se.paint_line["line-pattern"]),"line-gradient":new ml(Se.paint_line["line-gradient"])}),layout:lte},xk=new(function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(f,x){return x=new qi(Math.floor(x.zoom),{now:x.now,fadeDuration:x.fadeDuration,zoomHistory:x.zoomHistory,transition:x.transition}),a.prototype.possiblyEvaluate.call(this,f,x)},c.prototype.evaluate=function(f,x,S,I){return x=z({},x,{zoom:Math.floor(x.zoom)}),a.prototype.evaluate.call(this,f,x,S,I)},c}(zr))(vk.paint.properties["line-width"].specification);xk.useIntegerZoom=!0;var cte=function(a){function c(f){a.call(this,f,vk),this.gradientVersion=0}return a&&(c.__proto__=a),(c.prototype=Object.create(a&&a.prototype)).constructor=c,c.prototype._handleSpecialPaintPropertyUpdate=function(f){f==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%T)},c.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},c.prototype.recalculate=function(f,x){a.prototype.recalculate.call(this,f,x),this.paint._values["line-floorwidth"]=xk.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)},c.prototype.createBucket=function(f){return new _l(f)},c.prototype.queryRadius=function(f){var x=f,S=bk(gc("line-width",this,x),gc("line-gap-width",this,x)),I=gc("line-offset",this,x);return S/2+Math.abs(I)+Ho(this.paint.get("line-translate"))},c.prototype.queryIntersectsFeature=function(f,x,S,I,D,H,Y){var ee=Ts(f,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),H.angle,Y),ie=Y/2*bk(this.paint.get("line-width").evaluate(x,S),this.paint.get("line-gap-width").evaluate(x,S)),se=this.paint.get("line-offset").evaluate(x,S);return se&&(I=function(Ae,Te){for(var ke=[],Ve=new u(0,0),et=0;et<Ae.length;et++){for(var Xe=Ae[et],at=[],_t=0;_t<Xe.length;_t++){var bt=Xe[_t],Mt=Xe[_t+1],Ut=_t===0?Ve:bt.sub(Xe[_t-1])._unit()._perp(),$t=_t===Xe.length-1?Ve:Mt.sub(bt)._unit()._perp(),Ar=Ut._add($t)._unit();Ar._mult(1/(Ar.x*$t.x+Ar.y*$t.y)),at.push(Ar._mult(Te)._add(bt))}ke.push(at)}return ke}(I,se*Y)),function(Ae,Te,ke){for(var Ve=0;Ve<Te.length;Ve++){var et=Te[Ve];if(Ae.length>=3){for(var Xe=0;Xe<et.length;Xe++)if(ro(Ae,et[Xe]))return!0}if(Bl(Ae,et,ke))return!0}return!1}(ee,I,ie)},c.prototype.isTileClipped=function(){return!0},c}(Ma);function bk(a,c){return c>0?c+2*a:a}var ute=Bs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fte=Bs([{name:"a_projected_pos",components:3,type:"Float32"}],4),hte=(Bs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Bs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),wk=(Bs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Bs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),dte=Bs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pte(a,c,f){return a.sections.forEach(function(x){x.text=function(S,I,D){var H=I.layout.get("text-transform").evaluate(D,{});return H==="uppercase"?S=S.toLocaleUpperCase():H==="lowercase"&&(S=S.toLocaleLowerCase()),Al.applyArabicShaping&&(S=Al.applyArabicShaping(S)),S}(x.text,c,f)}),a}Bs([{name:"triangle",components:3,type:"Uint16"}]),Bs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Bs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Bs([{type:"Float32",name:"offsetX"}]),Bs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var _v={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Tk=function(a,c,f,x,S){var I,D,H=8*S-x-1,Y=(1<<H)-1,ee=Y>>1,ie=-7,se=f?S-1:0,Ae=f?-1:1,Te=a[c+se];for(se+=Ae,I=Te&(1<<-ie)-1,Te>>=-ie,ie+=H;ie>0;I=256*I+a[c+se],se+=Ae,ie-=8);for(D=I&(1<<-ie)-1,I>>=-ie,ie+=x;ie>0;D=256*D+a[c+se],se+=Ae,ie-=8);if(I===0)I=1-ee;else{if(I===Y)return D?NaN:1/0*(Te?-1:1);D+=Math.pow(2,x),I-=ee}return(Te?-1:1)*D*Math.pow(2,I-x)},Ek=function(a,c,f,x,S,I){var D,H,Y,ee=8*I-S-1,ie=(1<<ee)-1,se=ie>>1,Ae=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,Te=x?0:I-1,ke=x?1:-1,Ve=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(H=isNaN(c)?1:0,D=ie):(D=Math.floor(Math.log(c)/Math.LN2),c*(Y=Math.pow(2,-D))<1&&(D--,Y*=2),(c+=D+se>=1?Ae/Y:Ae*Math.pow(2,1-se))*Y>=2&&(D++,Y/=2),D+se>=ie?(H=0,D=ie):D+se>=1?(H=(c*Y-1)*Math.pow(2,S),D+=se):(H=c*Math.pow(2,se-1)*Math.pow(2,S),D=0));S>=8;a[f+Te]=255&H,Te+=ke,H/=256,S-=8);for(D=D<<S|H,ee+=S;ee>0;a[f+Te]=255&D,Te+=ke,D/=256,ee-=8);a[f+Te-ke]|=128*Ve},Zw=Ao;function Ao(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Ao.Varint=0,Ao.Fixed64=1,Ao.Bytes=2,Ao.Fixed32=5;var Sk=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ld(a){return a.type===Ao.Bytes?a.readVarint()+a.pos:a.pos+1}function e0(a,c,f){return f?4294967296*c+(a>>>0):4294967296*(c>>>0)+(a>>>0)}function Ck(a,c,f){var x=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));f.realloc(x);for(var S=f.pos-1;S>=a;S--)f.buf[S+x]=f.buf[S]}function Ate(a,c){for(var f=0;f<a.length;f++)c.writeVarint(a[f])}function mte(a,c){for(var f=0;f<a.length;f++)c.writeSVarint(a[f])}function gte(a,c){for(var f=0;f<a.length;f++)c.writeFloat(a[f])}function _te(a,c){for(var f=0;f<a.length;f++)c.writeDouble(a[f])}function yte(a,c){for(var f=0;f<a.length;f++)c.writeBoolean(a[f])}function vte(a,c){for(var f=0;f<a.length;f++)c.writeFixed32(a[f])}function xte(a,c){for(var f=0;f<a.length;f++)c.writeSFixed32(a[f])}function bte(a,c){for(var f=0;f<a.length;f++)c.writeFixed64(a[f])}function wte(a,c){for(var f=0;f<a.length;f++)c.writeSFixed64(a[f])}function Jw(a,c){return(a[c]|a[c+1]<<8|a[c+2]<<16)+16777216*a[c+3]}function t0(a,c,f){a[f]=c,a[f+1]=c>>>8,a[f+2]=c>>>16,a[f+3]=c>>>24}function Mk(a,c){return(a[c]|a[c+1]<<8|a[c+2]<<16)+(a[c+3]<<24)}function Tte(a,c,f){a===1&&f.readMessage(Ete,c)}function Ete(a,c,f){if(a===3){var x=f.readMessage(Ste,{}),S=x.width,I=x.height,D=x.left,H=x.top,Y=x.advance;c.push({id:x.id,bitmap:new Mi({width:S+6,height:I+6},x.bitmap),metrics:{width:S,height:I,left:D,top:H,advance:Y}})}}function Ste(a,c,f){a===1?c.id=f.readVarint():a===2?c.bitmap=f.readBytes():a===3?c.width=f.readVarint():a===4?c.height=f.readVarint():a===5?c.left=f.readSVarint():a===6?c.top=f.readSVarint():a===7&&(c.advance=f.readVarint())}function Ik(a){for(var c=0,f=0,x=0,S=a;x<S.length;x+=1){var I=S[x];c+=I.w*I.h,f=Math.max(f,I.w)}a.sort(function(Ve,et){return et.h-Ve.h});for(var D=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),f),h:1/0}],H=0,Y=0,ee=0,ie=a;ee<ie.length;ee+=1)for(var se=ie[ee],Ae=D.length-1;Ae>=0;Ae--){var Te=D[Ae];if(!(se.w>Te.w||se.h>Te.h)){if(se.x=Te.x,se.y=Te.y,Y=Math.max(Y,se.y+se.h),H=Math.max(H,se.x+se.w),se.w===Te.w&&se.h===Te.h){var ke=D.pop();Ae<D.length&&(D[Ae]=ke)}else se.h===Te.h?(Te.x+=se.w,Te.w-=se.w):se.w===Te.w?(Te.y+=se.h,Te.h-=se.h):(D.push({x:Te.x+se.w,y:Te.y,w:Te.w-se.w,h:se.h}),Te.y+=se.h,Te.h-=se.h);break}}return{w:H,h:Y,fill:c/(H*Y)||0}}Ao.prototype={destroy:function(){this.buf=null},readFields:function(a,c,f){for(f=f||this.length;this.pos<f;){var x=this.readVarint(),S=x>>3,I=this.pos;this.type=7&x,a(S,c,this),this.pos===I&&this.skip(x)}return c},readMessage:function(a,c){return this.readFields(a,c,this.readVarint()+this.pos)},readFixed32:function(){var a=Jw(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Mk(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Jw(this.buf,this.pos)+4294967296*Jw(this.buf,this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=Jw(this.buf,this.pos)+4294967296*Mk(this.buf,this.pos+4);return this.pos+=8,a},readFloat:function(){var a=Tk(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Tk(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var c,f,x=this.buf;return c=127&(f=x[this.pos++]),f<128?c:(c|=(127&(f=x[this.pos++]))<<7,f<128?c:(c|=(127&(f=x[this.pos++]))<<14,f<128?c:(c|=(127&(f=x[this.pos++]))<<21,f<128?c:function(S,I,D){var H,Y,ee=D.buf;if(H=(112&(Y=ee[D.pos++]))>>4,Y<128||(H|=(127&(Y=ee[D.pos++]))<<3,Y<128)||(H|=(127&(Y=ee[D.pos++]))<<10,Y<128)||(H|=(127&(Y=ee[D.pos++]))<<17,Y<128)||(H|=(127&(Y=ee[D.pos++]))<<24,Y<128)||(H|=(1&(Y=ee[D.pos++]))<<31,Y<128))return e0(S,H,I);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(f=x[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,c=this.pos;return this.pos=a,a-c>=12&&Sk?function(f,x,S){return Sk.decode(f.subarray(x,S))}(this.buf,c,a):function(f,x,S){for(var I="",D=x;D<S;){var H,Y,ee,ie=f[D],se=null,Ae=ie>239?4:ie>223?3:ie>191?2:1;if(D+Ae>S)break;Ae===1?ie<128&&(se=ie):Ae===2?(192&(H=f[D+1]))==128&&(se=(31&ie)<<6|63&H)<=127&&(se=null):Ae===3?(Y=f[D+2],(192&(H=f[D+1]))==128&&(192&Y)==128&&((se=(15&ie)<<12|(63&H)<<6|63&Y)<=2047||se>=55296&&se<=57343)&&(se=null)):Ae===4&&(Y=f[D+2],ee=f[D+3],(192&(H=f[D+1]))==128&&(192&Y)==128&&(192&ee)==128&&((se=(15&ie)<<18|(63&H)<<12|(63&Y)<<6|63&ee)<=65535||se>=1114112)&&(se=null)),se===null?(se=65533,Ae=1):se>65535&&(se-=65536,I+=String.fromCharCode(se>>>10&1023|55296),se=56320|1023&se),I+=String.fromCharCode(se),D+=Ae}return I}(this.buf,c,a)},readBytes:function(){var a=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,a);return this.pos=a,c},readPackedVarint:function(a,c){if(this.type!==Ao.Bytes)return a.push(this.readVarint(c));var f=ld(this);for(a=a||[];this.pos<f;)a.push(this.readVarint(c));return a},readPackedSVarint:function(a){if(this.type!==Ao.Bytes)return a.push(this.readSVarint());var c=ld(this);for(a=a||[];this.pos<c;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Ao.Bytes)return a.push(this.readBoolean());var c=ld(this);for(a=a||[];this.pos<c;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Ao.Bytes)return a.push(this.readFloat());var c=ld(this);for(a=a||[];this.pos<c;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Ao.Bytes)return a.push(this.readDouble());var c=ld(this);for(a=a||[];this.pos<c;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this